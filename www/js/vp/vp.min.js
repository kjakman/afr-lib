function inArray(a,b){for(var c=b.length,d=0;d<c;d++)if(b[d]==a)return!0;return!1}function loadJSON(a,b,c){var d=new XMLHttpRequest;d.onreadystatechange=function(){d.readyState===XMLHttpRequest.DONE&&(200===d.status?b&&b(JSON.parse(d.responseText)):c&&c(d))},d.open("GET",a,!0),d.send()}function currency2symbol(a){var b={USD:"$",EUR:"€",CRC:"₡",GBP:"£",ILS:"₪",INR:"₹",JPY:"¥",KRW:"₩",NGN:"₦",PHP:"₱",PLN:"zł",PYG:"₲",THB:"฿",UAH:"₴",VND:"₫",BTC:"฿"},c=b[a];return c?c:a}function numberWithCommas(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function logStackTrace(a){var b=[],c=!1;try{f.dont.exist+=0}catch(d){if(d.stack){for(var e=d.stack.split("\n"),f=0,g=e.length;f<g;f++)b.push(e[f]);b.shift(),c=!0}else if(window.opera&&d.message){for(var e=d.message.split("\n"),f=0,g=e.length;f<g;f++)if(e[f].match(/^\s*[A-Za-z0-9\-_\$]+\(/)){var h=e[f];e[f+1]&&(h+=" at "+e[f+1],f++),b.push(h)}b.shift(),c=!0}}if(!c)for(var i=arguments.callee.caller;i;){var j=i.toString(),k=j.substring(j.indexOf("function")+8,j.indexOf("("))||"anonymous";b.push(k),i=i.caller}a?console.log(b.slice(0,a).join("\n")):console.log(b.join("\n"))}function vp_update_info(a){var b=a.item,c=b.artist_id,d=a.artists&&c?a.artists[c]:{},e=a.curator,f=a.collection,g="";if(document.getElementById("vp__tab1")&&g_popup_buttons&&g_popup_tabs){!g_plugin_options.show_info_button,document.getElementById("vp__tab1-content").innerHTML=vp_artwork_info(a),document.getElementById("vp__tab2-content").innerHTML=g=vp_tab_content(d,"vp__tab2-inner-content"),document.getElementById("vp__tab3-content").innerHTML=g=vp_tab_content(f,"vp__tab3-inner-content"),document.getElementById("vp__tab4-content").innerHTML=g=vp_tab_content(e,"vp__tab4-inner-content");var h=document.getElementById("vp__tab1"),i=document.getElementById("vp__tab2"),j=document.getElementById("vp__tab3"),k=document.getElementById("vp__tab4");return h.style.display=inArray("artwork",g_popup_tabs)?"block":"none",i.style.display=inArray("artist",g_popup_tabs)?"block":"none",j.style.display=inArray("exhibition",g_popup_tabs)?"block":"none",void(k.style.display=inArray("gallery",g_popup_tabs)?"block":"none")}}function vp_tab_content(a,b){var c=a.display_name||a.title||"",d=a.description,e=a.image?"<br><img src='"+a.image+"' width='150px'><br>":"",f="";return c&&(f=f+"<h4>"+c+"</h4>"),e&&(f+=e),d&&(f=f+"<div class='vp__tab-inner-content' id='"+b+"'><p>"+d+"</p></div>"),f}function vp_artwork_info(a){var b=a.item,c="",d=b.artist_id,e=(a.artists&&d?a.artists[d]:null,vp_caption(a,b,1)),c="<h4>"+e+"</h4><br>";b.original_technique&&(c=c+"<i>"+b.original_technique+"</i><br>");var f=vp_size(b);f&&(c=c+"<i>"+f+"</i><br><br>"),b.original_count>0&&(1==b.original_count?c+="<i>Original of one</i><br>":c=c+"<i>Series of "+b.original_count+"</i><br>");var g=vp_price(b);return g&&(c=c+"<i>"+g+"</i><br>"),b.comment&&(c=c+"<hr><p>"+b.comment+"</p><br>"),c}function vp_artist_name(a,b){var c=a.artists,d=c&&b?c[b]:null,e=d?d.display_name:"Unknown arist";return e}function vp_caption(a,b,c){if("undefined"==typeof c)var c=0;var d=b.artist_id,e=a.artists,f=e&&d?e[d]:null,g=f?f.display_name:"Unknown arist",h=a.curator.display_name||"",i=parseInt(b.original_available),j=i>0?"#0f0":"#f00",k=i?'<span style="color:'+j+'">&#x25cf;</span> ':"";if(c>0){2==c&&(k="");var l=b.original_year?" ("+b.original_year+")":"";return k+b.title+l+" by "+g}var m=[],n="";inArray("dot",g_popup_title)&&(n=n+k+" "),inArray("gallery",g_popup_title)&&h&&(n=n+h+" presents:"),inArray("artwork",g_popup_title)&&b.title&&(n=n+" "+b.title),inArray("year",g_popup_title)&&b.original_year&&(n=n+" ("+b.original_year+")"),inArray("technique",g_popup_title)&&b.original_technique&&(n=n+" "+b.original_technique),n&&m.push(n),inArray("artist",g_popup_title)&&g&&m.push("by "+g);var o="";b.original_count>0&&(o=1==b.original_count?"Original of one":"Series of "+b.original_count);var p=vp_size(b),q=vp_price(b),r=p&&inArray("size",g_popup_title),s=q&&inArray("price",g_popup_title),t=o&&inArray("series",g_popup_title);return(r||s||t)&&(r&&m.push(p),t&&m.push(o),s&&m.push(q)),m.join(", ")}function vp_size(a){var b=a.original_height,c=a.original_width,d=b>0&&c>0?b+"x"+c+" cm":"";return d}function vp_price(a){var b=parseInt(a.original_available),c="";return c=a.original_price>0&&a.original_currency?currency2symbol(a.original_currency)+numberWithCommas(Math.round(a.original_price)):b>0?"Price on inquiry":""}function vp_load(a,b,c){var d=a.getAttribute("id"),e=b.plugin_id,f=g_site_url+"/home/app_data.php?oper=get-gallery&jsoncallback=handleStuff",g="&obj_type="+b.obj_type+"&obj_id="+b.obj_id+"&plugin_id="+b.plugin_id+"&target="+d,h=b.obj_type+"-"+b.obj_id;if(console.log("vpload on el: "+d+" plugin_id="+b.plugin_id+" data=",b),g_local_data)g_local=1,console.log("Local Data:",g_local_data),vp_process_json(g_local_data,d,c,b);else if(g_local_file)g_local=1,loadJSON(g_local_file,function(a){vp_process_json(a,d,c,b)},function(a){console.error(a)});else if(g_list[h]){var i="__vp_plugin-"+e;g_cids[i]=3;var j=g_list[h];j.plugin_id=b.plugin_id,j.container_id=b.container_id,console.log("Done - key is already loaded:"+h+"cid="+i+" data:",b," json:",j),vp_process_json(j,i,c,b)}else{console.log("Not loaded. Key="+h+" Loading from ajax_url:"+f+g);g_timer[e]=(new Date).getTime();$jsonp.send(f+g,{callbackName:"handleStuff",onSuccess:function(a){var b=a.plugin_id,d=a.container_id,e={plugin_id:b,container_id:d,obj_type:a.obj_type,obj_id:a.obj_id},f=vp_element_key(e);(new Date).getTime()-g_start,(new Date).getTime()-g_timer[b];g_cids[d]=2;var g=(g_cids[d],g_keys[f]||[]),h=g.length;console.log("Done. Data:",a),h>1&&console.log("More than one plugin for this data",g);vp_process_json(a,d,c,e)},onTimeout:function(){g_cids[d]=-2},timeout:5})}}function vp_process_json(a,b,c,d){var e=d.plugin_id,f=(d.obj_type,d.obj_id,vp_element_key(d));console.log("loaded: vp_process on plugin id="+e+" cid="+b+" data=",d),g_local||(b=a.container_id);var g=document.getElementById(b);if(!g)return console.log("Could not find element "+b+" local="+g_local),!1;var h="__vp-view-button-"+e,i=document.getElementById(h);i?(console.log("Done loading set to view on button: "+h+" cid="+b),i.innerHTML="View"):console.log("Could not find button "+h+" cid="+b);var j=g.className,k=j.replace(/transparent/,"");g.className=k,g_artists=a.artist_names||{};var l,m,n,o,p=[];if(g_user_id=a.user_id,g_user_name=a.user_name,g_user_id){g_follow=[];var q=a.follow;for(l=0;l<q.length;l++){var r=q[l];g_follow[r]=1}}n=a.items;for(l in n)m=n[l],o={},o.src=m.href,o.msrc=m.href_small?m.href_small:m.href,o.w=m.w,o.h=m.h,o.title=m.title,o.data=m,p.push(o);document.querySelectorAll(".pswp")[0];g.setAttribute("data-pswp-uid",b),g.onclick=onThumbnailsClick,console.log("register onclick on "+b),a.psitems=p,a.element=g,a.data=d,g_list[f]=a,c&&g_pswp&&(g_cid=b,g_pswp.items=p,g_pswp.invalidateCurrItems(),g_pswp.updateSize(!0),g_user_id?userBtn.style.display="block":userBtn.style.display="none")}function vp_element_data(a){var b=document.getElementById(a),c=b&&b.getAttribute("data-data");return JSON.parse(c)}function vp_element_key(a){var b=(a.plugin_id,a.obj_type),c=a.obj_id,d=b+"-"+c;return d}function reloadPhotoswipe(a,b,c,d,e){var f=vp_element_data(a),g=vp_element_key(f),h=g_list[g];g_cid=a,items=h.psitems,console.log("Reloading ps cid="+a+" index="+b+" on element:",c),vp_load(h.element,h.data,!0)}function vp_event_button(a,b){var c=a.timezone||"Europe/Amsterdam";return'<span class="addtocalendar atc-style-blue"><a class="atcb-link" tabindex="1"><i class="fa fa-calendar"></i> Add to Calendar<button class="pswp__button pswp__button--calendar" title="Calendar"></button></a><var class="atc_event"><var class="atc_date_start">'+a.start_time+'</var><var class="atc_date_end">'+a.end_time+'</var><var class="atc_timezone">'+c+'</var><var class="atc_title">'+a.title+'</var><var class="atc_description">'+a.description+'</var><var class="atc_location">'+a.start_address+'</var><var class="atc_organizer">'+b.display_name+'</var><var class="atc_organizer_email">'+b.email_address+"</var></var></span>"}function vp_events(a){var b,c=a.events||[],d=c.length,e="",f=a.curator;e="";for(var g=0;g<d;g++)b=c[g],e=e+vp_event(b,f)+"<br><br>";return e}function vp_get_date(a,b,c){if("undefined"==typeof b)var b=0;if("undefined"==typeof c)var c="";var d=a.split(/[- :]/);console.log("dt:",a),console.log("t:",d);var e=d[3]+":"+d[4];if(b)return e;if(b&&!c)return e;var f=new Date(Date.UTC(d[0],d[1]-1,d[2],d[3],d[4],d[5])),g=["January","February","March","April","May","June","July","August","September","October","November","December"],h=f.getDate(),i=f.getMonth(),j=f.getFullYear(),k=f.getHours(),l=f.getMinutes();return console.log(h,g[i],j,k,l),b?k+":"+l:h+" "+g[i]+" "+j}function vp_event(a,b){var c=a.address_formatted||a.start_address,d="";if(c){var e="http://maps.google.com/?q="+encodeURIComponent(c);d='<a href="'+e+'" target="new">View in Google Maps</a>'}var f=vp_get_date(a.start_time),g=vp_get_date(a.end_time),h=vp_get_date(a.start_time,1,a.timezone),i=vp_get_date(a.end_time,1,a.timezone);console.log("start date="+f),console.log("end date="+g),console.log("start time="+h),console.log("end time="+i);var j=f+" at "+h+"-"+i,k=vp_event_button(a,b),l='<table cellpadding="4" cellspacing="4" class="vp__event">  <tr>    <td align="left"><br>      <h4 style="font-size:20px;margin-bottom:4px">'+a.title+'</h4>      <p style="font-size:16px">'+j+" "+k+"<br>"+a.address_street+" "+(a.address_number&&a.address_number>0?a.address_number:"")+"<br>         "+a.address_city+"<br><br>         "+d+"<br><br></p>    </td>  </tr></table>";return l}function vp_follow_link(a,b){return a&&b&&b.media_id?"/login/?ref=%2Fmy-collection%2F%3F_aif%3D"+b.media_id+"%26_aid%3D"+a:""}function vp_contact_link(a){var b=g_pswp.getCurrentData(a)||{},c=b.item,d=b.curator||{},e=d.email_address||"",f=d.display_name||"gallery",g=vp_artist_name(b,c.artist_id);console.log("contact item: ",c);var h=c.title||"Untitled Image",i=f+": Collector Inquiry on &quot;"+h+"&quot; by "+g,j=e?f+" <"+e+">":"",k="media_collection_map",l=c.map_id,m="/share/?recipient="+encodeURIComponent(j)+"&subject="+encodeURIComponent(i);if(m=m+"&obj_type="+k+"&obj_id="+l,g_user_id&&b.user){var n="",o=b.user,p=o.display_name,q=o.email_address,n=p+" <"+q+">";m=m+"&sender="+encodeURIComponent(n)}return m}function vp_container(a,b){return b+=" vp__container",'<div class="'+b+'">'+a+"</div>"}function vp_infocalendar(a){var b=g_pswp.getCurrentData(a)||{};b.events;return vp_events(b)}function vp_infomap(a){var b=a.curator,c=!1;if(address_formatted=b.address_formatted)var d="http://maps.google.com/?q="+encodeURIComponent(address_formatted),e='<a href="'+d+'" target="new">View in Google Maps</a>';var f=b.location_lat,g=b.location_long;if(Math.abs(f)>0&&Math.abs(g)>0){c=!0;var h='<div id="mapCanvas" class="" style="width:286px;height:200px" data-lat="'+f+'" data-lng="'+g+'"></div>'}var i='<table cellpadding="4" cellspacing="4"><tr>  <td align="left"><br>'+h+'  </td></tr><tr>  <td align="left"><br>    <h4 style="font-size:20px;margin-bottom:4px">'+b.display_name+'</h4>    <p style="font-size:16px">'+b.address1+"<br>       "+b.city+"<br><br>       "+e+"<br><br></p>  </td></tr></table>";return i}function vp_infotabs(){var a='  <ul class="w3-pagination w3-white w3-border-bottom vp__tabs" style="width:100%;" id="infoTabs">   <li><a id="vp__tab1" class="vp__tab-links active" onclick="return vp_openTab(event, \'vp__tab1-content\')">Art</a></li>   <li><a id="vp__tab2" class="vp__tab-links" onclick="return vp_openTab(event, \'vp__tab2-content\')">Artist</a></li>   <li><a id="vp__tab3" class="vp__tab-links" onclick="return vp_openTab(event, \'vp__tab3-content\')">Exhibition</a></li>   <li><a id="vp__tab4" class="vp__tab-links" onclick="return vp_openTab(event, \'vp__tab4-content\')">Gallery</a></li>  </ul>  <div id="vp__tab1-content" class="w3-container vp__tab-content">  </div>  <div id="vp__tab2-content" class="w3-container vp__tab-content">  </div>  <div id="vp__tab3-content" class="w3-container vp__tab-content">  </div>  <div id="vp__tab4-content" class="w3-container vp__tab-content">  </div>';return a}function vp_popup(a){var b=vp_full_link(a);console.log("vp_popup: link="+b),window.open(b,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=no,width=640,height=620,top=100,left="+(window.screen?Math.round(screen.width/2-275):100))}function vp_full_link(a){var b=g_sharer_id?g_sharer_id:1,c="_aid="+b,d=a.indexOf("?")>-1?a+"&"+c:a+"?"+c;return g_site_url+d}function vp_iframe(a){var b=g_sharer_id?g_sharer_id:1,c="_aid="+b;return a=a.indexOf("?")>-1?a+"&"+c:a+"?"+c,'<iframe width="100%" height="100%" style="min-height:800px" src="'+g_site_url+a+'"></iframe>'}function vp_search(){var a=document.querySelectorAll(".vp-loader-photoswipe"),b=a.length;console.log("Load: Found "+b+" ps items g_keys:",g_keys);for(var c=0;c<b;c++){var d=a[c],e=d&&d.getAttribute("data-data");e=JSON.parse(e);var f=vp_element_key(e),g=d.getAttribute("id"),h=e.plugin_id,i=g_cids[g];g_keys[f];g_keys[f]||(g_keys[f]=[]);g_keys[f];console.log("Found plugin id:"+h+" cid:"+g+" key: "+f+" status:"+i+" g_keys:",g_keys),i?console.log("Not loading data for plugin id:"+h+" cid:"+g+" status:"+i):(g_cids[g]=1,g_keys[f].push(h),console.log("Loading data for plugin id:"+h+" cid:"+g+" status:"+i+" data:",e),vp_load(d,e,!1))}}function initModalMap(a){var b=document.getElementById(a),c=b&&b.getAttribute("data-lat"),d=b&&b.getAttribute("data-lng"),e={center:new google.maps.LatLng(c,d),zoom:12,mapTypeId:google.maps.MapTypeId.ROADMAP},f=new google.maps.Map(document.getElementById(a),e),g=new google.maps.Marker({position:new google.maps.LatLng(c,d)});g.setMap(f)}function vp_openTab(a,b){console.log("open tab "+b);var c,d,e;for(d=document.getElementsByClassName("vp__tab-content"),c=0;c<d.length;c++)d[c].style.display="none";for(e=document.getElementsByClassName("vp__tab-links"),c=0;c<e.length;c++)e[c].className=e[c].className.replace(" active","");document.getElementById(b).style.display="block",a.currentTarget.className+=" active"}function openTab(a,b){var c,d,e;for(d=document.getElementsByClassName("city"),c=0;c<d.length;c++)d[c].style.display="none";for(e=document.getElementsByClassName("tablink"),c=0;c<d.length;c++)e[c].classList.remove("w3-light-grey");document.getElementById(b).style.display="block",a.currentTarget.classList.add("w3-light-grey")}function openModal(){var a=document.getElementById("vp__w3modal");a.style.display="block"}function closeModal(){var a=document.getElementById("vp__w3modal");a.style.display="none"}function zoomOutMobile(){var a=document.querySelector("meta[name=viewport]"),b="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0";if(a)a.setAttribute("content",b);else{var c=document.createElement("meta");c.name="viewport",c.content=b,document.getElementsByTagName("head")[0].appendChild(c)}document.body.style.opacity=.9999,setTimeout(function(){document.body.style.opacity=1},1)}function inArray(a,b){for(var c=b.length,d=0;d<c;d++)if(b[d]==a)return!0;return!1}function appendHtml(a,b){var c=document.createElement("div");for(c.innerHTML=b;c.children.length>0;)a.appendChild(c.children[0])}function isEmail(a){var b=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return b.test(a)}function vp__close_modal(){var a=document.getElementById("vp__my_modal");a.style.display="none"}!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.PhotoSwipe=b()}(this,function(){"use strict";var a=function(a,b,c,d){var e={features:null,bind:function(a,b,c,d){var e=(d?"remove":"add")+"EventListener";b=b.split(" ");for(var f=0;f<b.length;f++)b[f]&&a[e](b[f],c,!1)},isArray:function(a){return a instanceof Array},createEl:function(a,b){var c=document.createElement(b||"div");return a&&(c.className=a),c},getScrollY:function(){var a=window.pageYOffset;return void 0!==a?a:document.documentElement.scrollTop},unbind:function(a,b,c){e.bind(a,b,c,!0)},removeClass:function(a,b){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");a.className=a.className.replace(c," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(a,b){e.hasClass(a,b)||(a.className+=(a.className?" ":"")+b)},hasClass:function(a,b){return a.className&&new RegExp("(^|\\s)"+b+"(\\s|$)").test(a.className)},getChildByClass:function(a,b){for(var c=a.firstChild;c;){if(e.hasClass(c,b))return c;c=c.nextSibling}},arraySearch:function(a,b,c){for(var d=a.length;d--;)if(a[d][c]===b)return d;return-1},extend:function(a,b,c){for(var d in b)if(b.hasOwnProperty(d)){if(c&&a.hasOwnProperty(d))continue;a[d]=b[d]}},easing:{sine:{out:function(a){return Math.sin(a*(Math.PI/2))},inOut:function(a){return-(Math.cos(Math.PI*a)-1)/2}},cubic:{out:function(a){return--a*a*a+1}}},detectFeatures:function(){if(e.features)return e.features;var a=e.createEl(),b=a.style,c="",d={};if(d.oldIE=document.all&&!document.addEventListener,d.touch="ontouchstart"in window,window.requestAnimationFrame&&(d.raf=window.requestAnimationFrame,d.caf=window.cancelAnimationFrame),d.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!d.pointerEvent){var f=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var g=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);g&&g.length>0&&(g=parseInt(g[1],10),g>=1&&g<8&&(d.isOldIOSPhone=!0))}var h=f.match(/Android\s([0-9\.]*)/),i=h?h[1]:0;i=parseFloat(i),i>=1&&(i<4.4&&(d.isOldAndroid=!0),d.androidVersion=i),d.isMobileOpera=/opera mini|opera mobi/i.test(f)}for(var j,k,l=["transform","perspective","animationName"],m=["","webkit","Moz","ms","O"],n=0;n<4;n++){c=m[n];for(var o=0;o<3;o++)j=l[o],k=c+(c?j.charAt(0).toUpperCase()+j.slice(1):j),!d[j]&&k in b&&(d[j]=k);c&&!d.raf&&(c=c.toLowerCase(),d.raf=window[c+"RequestAnimationFrame"],d.raf&&(d.caf=window[c+"CancelAnimationFrame"]||window[c+"CancelRequestAnimationFrame"]))}if(!d.raf){var p=0;d.raf=function(a){var b=(new Date).getTime(),c=Math.max(0,16-(b-p)),d=window.setTimeout(function(){a(b+c)},c);return p=b+c,d},d.caf=function(a){clearTimeout(a)}}return d.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,e.features=d,d}};e.detectFeatures(),e.features.oldIE&&(e.bind=function(a,b,c,d){b=b.split(" ");for(var e,f=(d?"detach":"attach")+"Event",g=function(){c.handleEvent.call(c)},h=0;h<b.length;h++)if(e=b[h])if("object"==typeof c&&c.handleEvent){if(d){if(!c["oldIE"+e])return!1}else c["oldIE"+e]=g;a[f]("on"+e,c["oldIE"+e])}else a[f]("on"+e,c)});var f=this,g=25,h=3,i={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(a){return"A"===a.tagName},getDoubleTapZoom:function(a,b){return a?1:b.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};e.extend(i,d);var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la=function(){return{x:0,y:0}},ma=la(),na=la(),oa=la(),pa={},qa=0,ra={},sa=la(),ta=0,ua=!0,va=[],wa={},xa=!1,ya=function(a,b){e.extend(f,b.publicMethods),va.push(a)},za=function(a){var b=_b();return a>b-1?a-b:a<0?b+a:a},Aa={},Ba=function(a,b){return Aa[a]||(Aa[a]=[]),Aa[a].push(b)},Ca=function(a){var b=Aa[a];if(b){var c=Array.prototype.slice.call(arguments);c.shift();for(var d=0;d<b.length;d++)b[d].apply(f,c)}},Da=function(){return(new Date).getTime()},Ea=function(a){ia=a,f.bg.style.opacity=a*i.bgOpacity},Fa=function(a,b,c,d,e){(!xa||e&&e!==f.currItem)&&(d/=e?e.fitRatio:f.currItem.fitRatio),a[E]=u+b+"px, "+c+"px"+v+" scale("+d+")"},Ga=function(a){da&&(a&&(s>f.currItem.fitRatio?xa||(lc(f.currItem,!1,!0),xa=!0):xa&&(lc(f.currItem),xa=!1)),Fa(da,oa.x,oa.y,s))},Ha=function(a){a.container&&Fa(a.container.style,a.initialPosition.x,a.initialPosition.y,a.initialZoomLevel,a)},Ia=function(a,b){b[E]=u+a+"px, 0px"+v},Ja=function(a,b){if(!i.loop&&b){var c=m+(sa.x*qa-a)/sa.x,d=Math.round(a-sb.x);(c<0&&d>0||c>=_b()-1&&d<0)&&(a=sb.x+d*i.mainScrollEndFriction)}sb.x=a,Ia(a,n)},Ka=function(a,b){var c=tb[a]-ra[a];return na[a]+ma[a]+c-c*(b/t)},La=function(a,b){a.x=b.x,a.y=b.y,b.id&&(a.id=b.id)},Ma=function(a){a.x=Math.round(a.x),a.y=Math.round(a.y)},Na=null,Oa=function(){Na&&(e.unbind(document,"mousemove",Oa),e.addClass(a,"pswp--has_mouse"),i.mouseUsed=!0,Ca("mouseUsed")),Na=setTimeout(function(){Na=null},100)},Pa=function(){e.bind(document,"keydown",f),N.transform&&e.bind(f.scrollWrap,"click",f),i.mouseUsed||e.bind(document,"mousemove",Oa),e.bind(window,"resize scroll",f),Ca("bindEvents")},Qa=function(){e.unbind(window,"resize",f),e.unbind(window,"scroll",r.scroll),e.unbind(document,"keydown",f),e.unbind(document,"mousemove",Oa),N.transform&&e.unbind(f.scrollWrap,"click",f),U&&e.unbind(window,p,f),Ca("unbindEvents")},Ra=function(a,b){var c=hc(f.currItem,pa,a);return b&&(ca=c),c},Sa=function(a){return a||(a=f.currItem),a.initialZoomLevel},Ta=function(a){return a||(a=f.currItem),a.w>0?i.maxSpreadZoom:1},Ua=function(a,b,c,d){return d===f.currItem.initialZoomLevel?(c[a]=f.currItem.initialPosition[a],!0):(c[a]=Ka(a,d),c[a]>b.min[a]?(c[a]=b.min[a],!0):c[a]<b.max[a]&&(c[a]=b.max[a],!0))},Va=function(){if(E){var b=N.perspective&&!G;return u="translate"+(b?"3d(":"("),void(v=N.perspective?", 0px)":")")}E="left",e.addClass(a,"pswp--ie"),Ia=function(a,b){b.left=a+"px"},Ha=function(a){var b=a.fitRatio>1?1:a.fitRatio,c=a.container.style,d=b*a.w,e=b*a.h;c.width=d+"px",c.height=e+"px",c.left=a.initialPosition.x+"px",c.top=a.initialPosition.y+"px"},Ga=function(){if(da){var a=da,b=f.currItem,c=b.fitRatio>1?1:b.fitRatio,d=c*b.w,e=c*b.h;a.width=d+"px",a.height=e+"px",a.left=oa.x+"px",a.top=oa.y+"px"}}},Wa=function(a){var b="";i.escKey&&27===a.keyCode?b="close":i.arrowKeys&&(37===a.keyCode?b="prev":39===a.keyCode&&(b="next")),b&&(a.ctrlKey||a.altKey||a.shiftKey||a.metaKey||(a.preventDefault?a.preventDefault():a.returnValue=!1,f[b]()))},Xa=function(a){a&&(X||W||ea||S)&&(a.preventDefault(),a.stopPropagation())},Ya=function(){f.setScrollOffset(0,e.getScrollY())},Za={},$a=0,_a=function(a){Za[a]&&(Za[a].raf&&I(Za[a].raf),$a--,delete Za[a])},ab=function(a){Za[a]&&_a(a),Za[a]||($a++,Za[a]={})},bb=function(){for(var a in Za)Za.hasOwnProperty(a)&&_a(a)},cb=function(a,b,c,d,e,f,g){var h,i=Da();ab(a);var j=function(){if(Za[a]){if(h=Da()-i,h>=d)return _a(a),f(c),void(g&&g());f((c-b)*e(h/d)+b),Za[a].raf=H(j)}};j()},db={shout:Ca,listen:Ba,viewportSize:pa,options:i,isMainScrollAnimating:function(){return ea},getZoomLevel:function(){return s},getCurrentIndex:function(){return m},isDragging:function(){return U},isZooming:function(){return _},setScrollOffset:function(a,b){ra.x=a,M=ra.y=b,Ca("updateScrollOffset",ra)},applyZoomPan:function(a,b,c,d){oa.x=b,oa.y=c,s=a,Ga(d)},init:function(){if(!j&&!k){var c;f.framework=e,f.template=a,f.bg=e.getChildByClass(a,"pswp__bg"),J=a.className,j=!0,N=e.detectFeatures(),H=N.raf,I=N.caf,E=N.transform,L=N.oldIE,f.scrollWrap=e.getChildByClass(a,"pswp__scroll-wrap"),f.container=e.getChildByClass(f.scrollWrap,"pswp__container"),n=f.container.style,f.itemHolders=y=[{el:f.container.children[0],wrap:0,index:-1},{el:f.container.children[1],wrap:0,index:-1},{el:f.container.children[2],wrap:0,index:-1}],y[0].el.style.display=y[2].el.style.display="none",Va(),r={resize:f.updateSize,scroll:Ya,keydown:Wa,click:Xa};var d=N.isOldIOSPhone||N.isOldAndroid||N.isMobileOpera;for(N.animationName&&N.transform&&!d||(i.showAnimationDuration=i.hideAnimationDuration=0),c=0;c<va.length;c++)f["init"+va[c]]();if(b){var g=f.ui=new b(f,e);g.init()}Ca("firstUpdate"),m=m||i.index||0,(isNaN(m)||m<0||m>=_b())&&(m=0),f.currItem=$b(m),(N.isOldIOSPhone||N.isOldAndroid)&&(ua=!1),a.setAttribute("aria-hidden","false"),i.modal&&(ua?a.style.position="fixed":(a.style.position="absolute",a.style.top=e.getScrollY()+"px")),void 0===M&&(Ca("initialLayout"),M=K=e.getScrollY());var l="pswp--open ";for(i.mainClass&&(l+=i.mainClass+" "),i.showHideOpacity&&(l+="pswp--animate_opacity "),l+=G?"pswp--touch":"pswp--notouch",l+=N.animationName?" pswp--css_animation":"",l+=N.svg?" pswp--svg":"",e.addClass(a,l),f.updateSize(),o=-1,ta=null,c=0;c<h;c++)Ia((c+o)*sa.x,y[c].el.style);L||e.bind(f.scrollWrap,q,f),Ba("initialZoomInEnd",function(){f.setContent(y[0],m-1),f.setContent(y[2],m+1),y[0].el.style.display=y[2].el.style.display="block",i.focus&&a.focus(),Pa()}),f.setContent(y[1],m),f.updateCurrItem(),Ca("afterInit"),ua||(w=setInterval(function(){$a||U||_||s!==f.currItem.initialZoomLevel||f.updateSize()},1e3)),e.addClass(a,"pswp--visible")}},close:function(){j&&(j=!1,k=!0,Ca("close"),Qa(),bc(f.currItem,null,!0,f.destroy))},destroy:function(){Ca("destroy"),Wb&&clearTimeout(Wb),a.setAttribute("aria-hidden","true"),a.className=J,w&&clearInterval(w),e.unbind(f.scrollWrap,q,f),e.unbind(window,"scroll",f),yb(),bb(),Aa=null},panTo:function(a,b,c){c||(a>ca.min.x?a=ca.min.x:a<ca.max.x&&(a=ca.max.x),b>ca.min.y?b=ca.min.y:b<ca.max.y&&(b=ca.max.y)),oa.x=a,oa.y=b,Ga()},handleEvent:function(a){a=a||window.event,r[a.type]&&r[a.type](a)},goTo:function(a){a=za(a);var b=a-m;ta=b,m=a,f.currItem=$b(m),qa-=b,Ja(sa.x*qa),bb(),ea=!1,f.updateCurrItem()},next:function(){f.goTo(m+1)},prev:function(){f.goTo(m-1)},updateCurrZoomItem:function(a){if(a&&Ca("beforeChange",0),y[1].el.children.length){var b=y[1].el.children[0];da=e.hasClass(b,"pswp__zoom-wrap")?b.style:null}else da=null;ca=f.currItem.bounds,t=s=f.currItem.initialZoomLevel,oa.x=ca.center.x,oa.y=ca.center.y,a&&Ca("afterChange")},invalidateCurrItems:function(){x=!0;for(var a=0;a<h;a++)y[a].item&&(y[a].item.needsUpdate=!0)},updateCurrItem:function(a){if(0!==ta){var b,c=Math.abs(ta);if(!(a&&c<2)){f.currItem=$b(m),xa=!1,Ca("beforeChange",ta),c>=h&&(o+=ta+(ta>0?-h:h),c=h);for(var d=0;d<c;d++)ta>0?(b=y.shift(),y[h-1]=b,o++,Ia((o+2)*sa.x,b.el.style),f.setContent(b,m-c+d+1+1)):(b=y.pop(),y.unshift(b),o--,Ia(o*sa.x,b.el.style),f.setContent(b,m+c-d-1-1));if(da&&1===Math.abs(ta)){var e=$b(z);e.initialZoomLevel!==s&&(hc(e,pa),lc(e),Ha(e))}ta=0,f.updateCurrZoomItem(),z=m,Ca("afterChange")}}},updateSize:function(b){if(!ua&&i.modal){var c=e.getScrollY();if(M!==c&&(a.style.top=c+"px",M=c),!b&&wa.x===window.innerWidth&&wa.y===window.innerHeight)return;wa.x=window.innerWidth,wa.y=window.innerHeight,a.style.height=wa.y+"px"}if(pa.x=f.scrollWrap.clientWidth,pa.y=f.scrollWrap.clientHeight,Ya(),sa.x=pa.x+Math.round(pa.x*i.spacing),sa.y=pa.y,Ja(sa.x*qa),Ca("beforeResize"),void 0!==o){for(var d,g,j,k=0;k<h;k++)d=y[k],Ia((k+o)*sa.x,d.el.style),j=m+k-1,i.loop&&_b()>2&&(j=za(j)),g=$b(j),g&&(x||g.needsUpdate||!g.bounds)?(f.cleanSlide(g),f.setContent(d,j),1===k&&(f.currItem=g,f.updateCurrZoomItem(!0)),g.needsUpdate=!1):d.index===-1&&j>=0&&f.setContent(d,j),g&&g.container&&(hc(g,pa),lc(g),Ha(g));x=!1}t=s=f.currItem.initialZoomLevel,ca=f.currItem.bounds,ca&&(oa.x=ca.center.x,oa.y=ca.center.y,Ga(!0)),Ca("resize")},zoomTo:function(a,b,c,d,f){b&&(t=s,tb.x=Math.abs(b.x)-oa.x,tb.y=Math.abs(b.y)-oa.y,La(na,oa));var g=Ra(a,!1),h={};Ua("x",g,h,a),Ua("y",g,h,a);var i=s,j={x:oa.x,y:oa.y};Ma(h);var k=function(b){1===b?(s=a,oa.x=h.x,oa.y=h.y):(s=(a-i)*b+i,oa.x=(h.x-j.x)*b+j.x,oa.y=(h.y-j.y)*b+j.y),f&&f(b),Ga(1===b)};c?cb("customZoomTo",0,1,c,d||e.easing.sine.inOut,k):k(1)}},eb=30,fb=10,gb={},hb={},ib={},jb={},kb={},lb=[],mb={},nb=[],ob={},pb=0,qb=la(),rb=0,sb=la(),tb=la(),ub=la(),vb=function(a,b){return a.x===b.x&&a.y===b.y},wb=function(a,b){return Math.abs(a.x-b.x)<g&&Math.abs(a.y-b.y)<g},xb=function(a,b){return ob.x=Math.abs(a.x-b.x),ob.y=Math.abs(a.y-b.y),Math.sqrt(ob.x*ob.x+ob.y*ob.y)},yb=function(){Y&&(I(Y),Y=null)},zb=function(){U&&(Y=H(zb),Pb())},Ab=function(){return!("fit"===i.scaleMode&&s===f.currItem.initialZoomLevel)},Bb=function(a,b){return!(!a||a===document)&&!(a.getAttribute("class")&&a.getAttribute("class").indexOf("pswp__scroll-wrap")>-1)&&(b(a)?a:Bb(a.parentNode,b))},Cb={},Db=function(a,b){return Cb.prevent=!Bb(a.target,i.isClickableElement),Ca("preventDragEvent",a,b,Cb),Cb.prevent},Eb=function(a,b){return b.x=a.pageX,b.y=a.pageY,b.id=a.identifier,b},Fb=function(a,b,c){c.x=.5*(a.x+b.x),c.y=.5*(a.y+b.y)},Gb=function(a,b,c){if(a-P>50){var d=nb.length>2?nb.shift():{};d.x=b,d.y=c,nb.push(d),P=a}},Hb=function(){var a=oa.y-f.currItem.initialPosition.y;return 1-Math.abs(a/(pa.y/2))},Ib={},Jb={},Kb=[],Lb=function(a){for(;Kb.length>0;)Kb.pop();return F?(ka=0,lb.forEach(function(a){0===ka?Kb[0]=a:1===ka&&(Kb[1]=a),ka++})):a.type.indexOf("touch")>-1?a.touches&&a.touches.length>0&&(Kb[0]=Eb(a.touches[0],Ib),a.touches.length>1&&(Kb[1]=Eb(a.touches[1],Jb))):(Ib.x=a.pageX,Ib.y=a.pageY,Ib.id="",Kb[0]=Ib),Kb},Mb=function(a,b){var c,d,e,g,h=0,j=oa[a]+b[a],k=b[a]>0,l=sb.x+b.x,m=sb.x-mb.x;return c=j>ca.min[a]||j<ca.max[a]?i.panEndFriction:1,j=oa[a]+b[a]*c,!i.allowPanToNext&&s!==f.currItem.initialZoomLevel||(da?"h"!==fa||"x"!==a||W||(k?(j>ca.min[a]&&(c=i.panEndFriction,h=ca.min[a]-j,d=ca.min[a]-na[a]),(d<=0||m<0)&&_b()>1?(g=l,m<0&&l>mb.x&&(g=mb.x)):ca.min.x!==ca.max.x&&(e=j)):(j<ca.max[a]&&(c=i.panEndFriction,h=j-ca.max[a],d=na[a]-ca.max[a]),(d<=0||m>0)&&_b()>1?(g=l,m>0&&l<mb.x&&(g=mb.x)):ca.min.x!==ca.max.x&&(e=j))):g=l,"x"!==a)?void(ea||Z||s>f.currItem.fitRatio&&(oa[a]+=b[a]*c)):(void 0!==g&&(Ja(g,!0),Z=g!==mb.x),ca.min.x!==ca.max.x&&(void 0!==e?oa.x=e:Z||(oa.x+=b.x*c)),void 0!==g)},Nb=function(a){if(!("mousedown"===a.type&&a.button>0)){if(Zb)return void a.preventDefault();if(!T||"mousedown"!==a.type){if(Db(a,!0)&&a.preventDefault(),Ca("pointerDown"),F){var b=e.arraySearch(lb,a.pointerId,"id");b<0&&(b=lb.length),lb[b]={x:a.pageX,y:a.pageY,id:a.pointerId}}var c=Lb(a),d=c.length;$=null,bb(),U&&1!==d||(U=ga=!0,e.bind(window,p,f),R=ja=ha=S=Z=X=V=W=!1,fa=null,Ca("firstTouchStart",c),La(na,oa),ma.x=ma.y=0,La(jb,c[0]),La(kb,jb),mb.x=sa.x*qa,nb=[{x:jb.x,y:jb.y}],P=O=Da(),Ra(s,!0),yb(),zb()),!_&&d>1&&!ea&&!Z&&(t=s,W=!1,_=V=!0,ma.y=ma.x=0,La(na,oa),La(gb,c[0]),La(hb,c[1]),Fb(gb,hb,ub),tb.x=Math.abs(ub.x)-oa.x,tb.y=Math.abs(ub.y)-oa.y,aa=ba=xb(gb,hb))}}},Ob=function(a){if(a.preventDefault(),F){var b=e.arraySearch(lb,a.pointerId,"id");if(b>-1){var c=lb[b];c.x=a.pageX,c.y=a.pageY}}if(U){var d=Lb(a);if(fa||X||_)$=d;else if(sb.x!==sa.x*qa)fa="h";else{var f=Math.abs(d[0].x-jb.x)-Math.abs(d[0].y-jb.y);Math.abs(f)>=fb&&(fa=f>0?"h":"v",$=d)}}},Pb=function(){if($){var a=$.length;if(0!==a)if(La(gb,$[0]),ib.x=gb.x-jb.x,ib.y=gb.y-jb.y,_&&a>1){if(jb.x=gb.x,jb.y=gb.y,!ib.x&&!ib.y&&vb($[1],hb))return;La(hb,$[1]),W||(W=!0,Ca("zoomGestureStarted"));var b=xb(gb,hb),c=Ub(b);c>f.currItem.initialZoomLevel+f.currItem.initialZoomLevel/15&&(ja=!0);var d=1,e=Sa(),g=Ta();if(c<e)if(i.pinchToClose&&!ja&&t<=f.currItem.initialZoomLevel){var h=e-c,j=1-h/(e/1.2);Ea(j),Ca("onPinchClose",j),ha=!0}else d=(e-c)/e,d>1&&(d=1),c=e-d*(e/3);else c>g&&(d=(c-g)/(6*e),d>1&&(d=1),c=g+d*e);d<0&&(d=0),aa=b,Fb(gb,hb,qb),ma.x+=qb.x-ub.x,ma.y+=qb.y-ub.y,La(ub,qb),oa.x=Ka("x",c),oa.y=Ka("y",c),R=c>s,s=c,Ga()}else{if(!fa)return;if(ga&&(ga=!1,Math.abs(ib.x)>=fb&&(ib.x-=$[0].x-kb.x),Math.abs(ib.y)>=fb&&(ib.y-=$[0].y-kb.y)),jb.x=gb.x,jb.y=gb.y,0===ib.x&&0===ib.y)return;if("v"===fa&&i.closeOnVerticalDrag&&!Ab()){ma.y+=ib.y,oa.y+=ib.y;var k=Hb();return S=!0,Ca("onVerticalDrag",k),Ea(k),void Ga()}Gb(Da(),gb.x,gb.y),X=!0,ca=f.currItem.bounds;var l=Mb("x",ib);l||(Mb("y",ib),Ma(oa),Ga())}}},Qb=function(a){if(N.isOldAndroid){if(T&&"mouseup"===a.type)return;a.type.indexOf("touch")>-1&&(clearTimeout(T),T=setTimeout(function(){T=0},600))}Ca("pointerUp"),Db(a,!1)&&a.preventDefault();var b;if(F){var c=e.arraySearch(lb,a.pointerId,"id");if(c>-1)if(b=lb.splice(c,1)[0],navigator.pointerEnabled)b.type=a.pointerType||"mouse";else{var d={4:"mouse",2:"touch",3:"pen"};b.type=d[a.pointerType],b.type||(b.type=a.pointerType||"mouse")}}var g,h=Lb(a),j=h.length;if("mouseup"===a.type&&(j=0),2===j)return $=null,
!0;1===j&&La(kb,h[0]),0!==j||fa||ea||(b||("mouseup"===a.type?b={x:a.pageX,y:a.pageY,type:"mouse"}:a.changedTouches&&a.changedTouches[0]&&(b={x:a.changedTouches[0].pageX,y:a.changedTouches[0].pageY,type:"touch"})),Ca("touchRelease",a,b));var k=-1;if(0===j&&(U=!1,e.unbind(window,p,f),yb(),_?k=0:rb!==-1&&(k=Da()-rb)),rb=1===j?Da():-1,g=k!==-1&&k<150?"zoom":"swipe",_&&j<2&&(_=!1,1===j&&(g="zoomPointerUp"),Ca("zoomGestureEnded")),$=null,X||W||ea||S)if(bb(),Q||(Q=Rb()),Q.calculateSwipeSpeed("x"),S){var l=Hb();if(l<i.verticalDragRange)f.close();else{var m=oa.y,n=ia;cb("verticalDrag",0,1,300,e.easing.cubic.out,function(a){oa.y=(f.currItem.initialPosition.y-m)*a+m,Ea((1-n)*a+n),Ga()}),Ca("onVerticalDrag",1)}}else{if((Z||ea)&&0===j){var o=Tb(g,Q);if(o)return;g="zoomPointerUp"}if(!ea)return"swipe"!==g?void Vb():void(!Z&&s>f.currItem.fitRatio&&Sb(Q))}},Rb=function(){var a,b,c={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(d){nb.length>1?(a=Da()-P+50,b=nb[nb.length-2][d]):(a=Da()-O,b=kb[d]),c.lastFlickOffset[d]=jb[d]-b,c.lastFlickDist[d]=Math.abs(c.lastFlickOffset[d]),c.lastFlickDist[d]>20?c.lastFlickSpeed[d]=c.lastFlickOffset[d]/a:c.lastFlickSpeed[d]=0,Math.abs(c.lastFlickSpeed[d])<.1&&(c.lastFlickSpeed[d]=0),c.slowDownRatio[d]=.95,c.slowDownRatioReverse[d]=1-c.slowDownRatio[d],c.speedDecelerationRatio[d]=1},calculateOverBoundsAnimOffset:function(a,b){c.backAnimStarted[a]||(oa[a]>ca.min[a]?c.backAnimDestination[a]=ca.min[a]:oa[a]<ca.max[a]&&(c.backAnimDestination[a]=ca.max[a]),void 0!==c.backAnimDestination[a]&&(c.slowDownRatio[a]=.7,c.slowDownRatioReverse[a]=1-c.slowDownRatio[a],c.speedDecelerationRatioAbs[a]<.05&&(c.lastFlickSpeed[a]=0,c.backAnimStarted[a]=!0,cb("bounceZoomPan"+a,oa[a],c.backAnimDestination[a],b||300,e.easing.sine.out,function(b){oa[a]=b,Ga()}))))},calculateAnimOffset:function(a){c.backAnimStarted[a]||(c.speedDecelerationRatio[a]=c.speedDecelerationRatio[a]*(c.slowDownRatio[a]+c.slowDownRatioReverse[a]-c.slowDownRatioReverse[a]*c.timeDiff/10),c.speedDecelerationRatioAbs[a]=Math.abs(c.lastFlickSpeed[a]*c.speedDecelerationRatio[a]),c.distanceOffset[a]=c.lastFlickSpeed[a]*c.speedDecelerationRatio[a]*c.timeDiff,oa[a]+=c.distanceOffset[a])},panAnimLoop:function(){if(Za.zoomPan&&(Za.zoomPan.raf=H(c.panAnimLoop),c.now=Da(),c.timeDiff=c.now-c.lastNow,c.lastNow=c.now,c.calculateAnimOffset("x"),c.calculateAnimOffset("y"),Ga(),c.calculateOverBoundsAnimOffset("x"),c.calculateOverBoundsAnimOffset("y"),c.speedDecelerationRatioAbs.x<.05&&c.speedDecelerationRatioAbs.y<.05))return oa.x=Math.round(oa.x),oa.y=Math.round(oa.y),Ga(),void _a("zoomPan")}};return c},Sb=function(a){return a.calculateSwipeSpeed("y"),ca=f.currItem.bounds,a.backAnimDestination={},a.backAnimStarted={},Math.abs(a.lastFlickSpeed.x)<=.05&&Math.abs(a.lastFlickSpeed.y)<=.05?(a.speedDecelerationRatioAbs.x=a.speedDecelerationRatioAbs.y=0,a.calculateOverBoundsAnimOffset("x"),a.calculateOverBoundsAnimOffset("y"),!0):(ab("zoomPan"),a.lastNow=Da(),void a.panAnimLoop())},Tb=function(a,b){var c;ea||(pb=m);var d;if("swipe"===a){var g=jb.x-kb.x,h=b.lastFlickDist.x<10;g>eb&&(h||b.lastFlickOffset.x>20)?d=-1:g<-eb&&(h||b.lastFlickOffset.x<-20)&&(d=1)}var j;d&&(m+=d,m<0?(m=i.loop?_b()-1:0,j=!0):m>=_b()&&(m=i.loop?0:_b()-1,j=!0),j&&!i.loop||(ta+=d,qa-=d,c=!0));var k,l=sa.x*qa,n=Math.abs(l-sb.x);return c||l>sb.x==b.lastFlickSpeed.x>0?(k=Math.abs(b.lastFlickSpeed.x)>0?n/Math.abs(b.lastFlickSpeed.x):333,k=Math.min(k,400),k=Math.max(k,250)):k=333,pb===m&&(c=!1),ea=!0,Ca("mainScrollAnimStart"),cb("mainScroll",sb.x,l,k,e.easing.cubic.out,Ja,function(){bb(),ea=!1,pb=-1,(c||pb!==m)&&f.updateCurrItem(),Ca("mainScrollAnimComplete")}),c&&f.updateCurrItem(!0),c},Ub=function(a){return 1/ba*a*t},Vb=function(){var a=s,b=Sa(),c=Ta();s<b?a=b:s>c&&(a=c);var d,g=1,h=ia;return ha&&!R&&!ja&&s<b?(f.close(),!0):(ha&&(d=function(a){Ea((g-h)*a+h)}),f.zoomTo(a,0,200,e.easing.cubic.out,d),!0)};ya("Gestures",{publicMethods:{initGestures:function(){var a=function(a,b,c,d,e){A=a+b,B=a+c,C=a+d,D=e?a+e:""};F=N.pointerEvent,F&&N.touch&&(N.touch=!1),F?navigator.pointerEnabled?a("pointer","down","move","up","cancel"):a("MSPointer","Down","Move","Up","Cancel"):N.touch?(a("touch","start","move","end","cancel"),G=!0):a("mouse","down","move","up"),p=B+" "+C+" "+D,q=A,F&&!G&&(G=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),f.likelyTouchDevice=G,r[A]=Nb,r[B]=Ob,r[C]=Qb,D&&(r[D]=r[C]),N.touch&&(q+=" mousedown",p+=" mousemove mouseup",r.mousedown=r[A],r.mousemove=r[B],r.mouseup=r[C]),G||(i.allowPanToNext=!1)}}});var Wb,Xb,Yb,Zb,$b,_b,ac,bc=function(b,c,d,g){Wb&&clearTimeout(Wb),Zb=!0,Yb=!0;var h;b.initialLayout?(h=b.initialLayout,b.initialLayout=null):h=i.getThumbBoundsFn&&i.getThumbBoundsFn(m);var j=d?i.hideAnimationDuration:i.showAnimationDuration,k=function(){_a("initialZoom"),d?(f.template.removeAttribute("style"),f.bg.removeAttribute("style")):(Ea(1),c&&(c.style.display="block"),e.addClass(a,"pswp--animated-in"),Ca("initialZoom"+(d?"OutEnd":"InEnd"))),g&&g(),Zb=!1};if(!j||!h||void 0===h.x)return Ca("initialZoom"+(d?"Out":"In")),s=b.initialZoomLevel,La(oa,b.initialPosition),Ga(),a.style.opacity=d?0:1,Ea(1),void(j?setTimeout(function(){k()},j):k());var n=function(){var c=l,g=!f.currItem.src||f.currItem.loadError||i.showHideOpacity;b.miniImg&&(b.miniImg.style.webkitBackfaceVisibility="hidden"),d||(s=h.w/b.w,oa.x=h.x,oa.y=h.y-K,f[g?"template":"bg"].style.opacity=.001,Ga()),ab("initialZoom"),d&&!c&&e.removeClass(a,"pswp--animated-in"),g&&(d?e[(c?"remove":"add")+"Class"](a,"pswp--animate_opacity"):setTimeout(function(){e.addClass(a,"pswp--animate_opacity")},30)),Wb=setTimeout(function(){if(Ca("initialZoom"+(d?"Out":"In")),d){var f=h.w/b.w,i={x:oa.x,y:oa.y},l=s,m=ia,n=function(b){1===b?(s=f,oa.x=h.x,oa.y=h.y-M):(s=(f-l)*b+l,oa.x=(h.x-i.x)*b+i.x,oa.y=(h.y-M-i.y)*b+i.y),Ga(),g?a.style.opacity=1-b:Ea(m-b*m)};c?cb("initialZoom",0,1,j,e.easing.cubic.out,n,k):(n(1),Wb=setTimeout(k,j+20))}else s=b.initialZoomLevel,La(oa,b.initialPosition),Ga(),Ea(1),g?a.style.opacity=1:Ea(1),Wb=setTimeout(k,j+20)},d?25:90)};n()},cc={},dc=[],ec={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Xb.length}},fc=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},gc=function(a,b,c){var d=a.bounds;d.center.x=Math.round((cc.x-b)/2),d.center.y=Math.round((cc.y-c)/2)+a.vGap.top,d.max.x=b>cc.x?Math.round(cc.x-b):d.center.x,d.max.y=c>cc.y?Math.round(cc.y-c)+a.vGap.top:d.center.y,d.min.x=b>cc.x?0:d.center.x,d.min.y=c>cc.y?a.vGap.top:d.center.y},hc=function(a,b,c){if(a.src&&!a.loadError){var d=!c;if(d&&(a.vGap||(a.vGap={top:0,bottom:0}),Ca("parseVerticalMargin",a)),cc.x=b.x,cc.y=b.y-a.vGap.top-a.vGap.bottom,d){var e=cc.x/a.w,f=cc.y/a.h;a.fitRatio=e<f?e:f;var g=i.scaleMode;"orig"===g?c=1:"fit"===g&&(c=a.fitRatio),c>1&&(c=1),a.initialZoomLevel=c,a.bounds||(a.bounds=fc())}if(!c)return;return gc(a,a.w*c,a.h*c),d&&c===a.initialZoomLevel&&(a.initialPosition=a.bounds.center),a.bounds}return a.w=a.h=0,a.initialZoomLevel=a.fitRatio=1,a.bounds=fc(),a.initialPosition=a.bounds.center,a.bounds},ic=function(a,b,c,d,e,g){b.loadError||d&&(b.imageAppended=!0,lc(b,d,b===f.currItem&&xa),c.appendChild(d),g&&setTimeout(function(){b&&b.loaded&&b.placeholder&&(b.placeholder.style.display="none",b.placeholder=null)},500))},jc=function(a){a.loading=!0,a.loaded=!1;var b=a.img=e.createEl("pswp__img","img"),c=function(){a.loading=!1,a.loaded=!0,a.loadComplete?a.loadComplete(a):a.img=null,b.onload=b.onerror=null,b=null};return b.onload=c,b.onerror=function(){a.loadError=!0,c()},b.src=a.src,b},kc=function(a,b){if(a.src&&a.loadError&&a.container)return b&&(a.container.innerHTML=""),a.container.innerHTML=i.errorMsg.replace("%url%",a.src),!0},lc=function(a,b,c){if(a.src){b||(b=a.container.lastChild);var d=c?a.w:Math.round(a.w*a.fitRatio),e=c?a.h:Math.round(a.h*a.fitRatio);a.placeholder&&!a.loaded&&(a.placeholder.style.width=d+"px",a.placeholder.style.height=e+"px"),b.style.width=d+"px",b.style.height=e+"px"}},mc=function(){if(dc.length){for(var a,b=0;b<dc.length;b++)a=dc[b],a.holder.index===a.index&&ic(a.index,a.item,a.baseDiv,a.img,!1,a.clearPlaceholder);dc=[]}};ya("Controller",{publicMethods:{lazyLoadItem:function(a){a=za(a);var b=$b(a);b&&(!b.loaded&&!b.loading||x)&&(Ca("gettingData",a,b),b.src&&jc(b))},initController:function(){e.extend(i,ec,!0),f.items=Xb=c,$b=f.getItemAt,_b=i.getNumItemsFn,ac=i.loop,_b()<3&&(i.loop=!1),Ba("beforeChange",function(a){var b,c=i.preload,d=null===a||a>=0,e=Math.min(c[0],_b()),g=Math.min(c[1],_b());for(b=1;b<=(d?g:e);b++)f.lazyLoadItem(m+b);for(b=1;b<=(d?e:g);b++)f.lazyLoadItem(m-b)}),Ba("initialLayout",function(){f.currItem.initialLayout=i.getThumbBoundsFn&&i.getThumbBoundsFn(m)}),Ba("mainScrollAnimComplete",mc),Ba("initialZoomInEnd",mc),Ba("destroy",function(){for(var a,b=0;b<Xb.length;b++)a=Xb[b],a.container&&(a.container=null),a.placeholder&&(a.placeholder=null),a.img&&(a.img=null),a.preloader&&(a.preloader=null),a.loadError&&(a.loaded=a.loadError=!1);dc=null})},getItemAt:function(a){return a>=0&&void 0!==Xb[a]&&Xb[a]},allowProgressiveImg:function(){return i.forceProgressiveLoading||!G||i.mouseUsed||screen.width>1200},setContent:function(a,b){i.loop&&(b=za(b));var c=f.getItemAt(a.index);c&&(c.container=null);var d,g=f.getItemAt(b);if(!g)return void(a.el.innerHTML="");Ca("gettingData",b,g),a.index=b,a.item=g;var h=g.container=e.createEl("pswp__zoom-wrap");if(!g.src&&g.html&&(g.html.tagName?h.appendChild(g.html):h.innerHTML=g.html),kc(g),hc(g,pa),!g.src||g.loadError||g.loaded)g.src&&!g.loadError&&(d=e.createEl("pswp__img","img"),d.style.opacity=1,d.src=g.src,lc(g,d),ic(b,g,h,d,!0));else{if(g.loadComplete=function(c){if(j){if(a&&a.index===b){if(kc(c,!0))return c.loadComplete=c.img=null,hc(c,pa),Ha(c),void(a.index===m&&f.updateCurrZoomItem());c.imageAppended?!Zb&&c.placeholder&&(c.placeholder.style.display="none",c.placeholder=null):N.transform&&(ea||Zb)?dc.push({item:c,baseDiv:h,img:c.img,index:b,holder:a,clearPlaceholder:!0}):ic(b,c,h,c.img,ea||Zb,!0)}c.loadComplete=null,c.img=null,Ca("imageLoadComplete",b,c)}},e.features.transform){var k="pswp__img pswp__img--placeholder";k+=g.msrc?"":" pswp__img--placeholder--blank";var l=e.createEl(k,g.msrc?"img":"");g.msrc&&(l.src=g.msrc),lc(g,l),h.appendChild(l),g.placeholder=l}g.loading||jc(g),f.allowProgressiveImg()&&(!Yb&&N.transform?dc.push({item:g,baseDiv:h,img:g.img,index:b,holder:a}):ic(b,g,h,g.img,!0,!0))}Yb||b!==m?Ha(g):(da=h.style,bc(g,d||g.img)),a.el.innerHTML="",a.el.appendChild(h)},cleanSlide:function(a){a.img&&(a.img.onload=a.img.onerror=null),a.loaded=a.loading=a.img=a.imageAppended=!1}}});var nc,oc={},pc=function(a,b,c){var d=document.createEvent("CustomEvent"),e={origEvent:a,target:a.target,releasePoint:b,pointerType:c||"touch"};d.initCustomEvent("pswpTap",!0,!0,e),a.target.dispatchEvent(d)};ya("Tap",{publicMethods:{initTap:function(){Ba("firstTouchStart",f.onTapStart),Ba("touchRelease",f.onTapRelease),Ba("destroy",function(){oc={},nc=null})},onTapStart:function(a){a.length>1&&(clearTimeout(nc),nc=null)},onTapRelease:function(a,b){if(b&&!X&&!V&&!$a){var c=b;if(nc&&(clearTimeout(nc),nc=null,wb(c,oc)))return void Ca("doubleTap",c);if("mouse"===b.type)return void pc(a,b,"mouse");var d=a.target.tagName.toUpperCase();if("BUTTON"===d||e.hasClass(a.target,"pswp__single-tap"))return void pc(a,b);La(oc,c),nc=setTimeout(function(){pc(a,b),nc=null},300)}}}});var qc;ya("DesktopZoom",{publicMethods:{initDesktopZoom:function(){L||(G?Ba("mouseUsed",function(){f.setupDesktopZoom()}):f.setupDesktopZoom(!0))},setupDesktopZoom:function(b){qc={};var c="wheel mousewheel DOMMouseScroll";Ba("bindEvents",function(){e.bind(a,c,f.handleMouseWheel)}),Ba("unbindEvents",function(){qc&&e.unbind(a,c,f.handleMouseWheel)}),f.mouseZoomedIn=!1;var d,g=function(){f.mouseZoomedIn&&(e.removeClass(a,"pswp--zoomed-in"),f.mouseZoomedIn=!1),s<1?e.addClass(a,"pswp--zoom-allowed"):e.removeClass(a,"pswp--zoom-allowed"),h()},h=function(){d&&(e.removeClass(a,"pswp--dragging"),d=!1)};Ba("resize",g),Ba("afterChange",g),Ba("pointerDown",function(){f.mouseZoomedIn&&(d=!0,e.addClass(a,"pswp--dragging"))}),Ba("pointerUp",h),b||g()},handleMouseWheel:function(a){if(s<=f.currItem.fitRatio)return i.modal&&(!i.closeOnScroll||$a||U?a.preventDefault():E&&Math.abs(a.deltaY)>2&&(l=!0,f.close())),!0;if(a.stopPropagation(),qc.x=0,"deltaX"in a)1===a.deltaMode?(qc.x=18*a.deltaX,qc.y=18*a.deltaY):(qc.x=a.deltaX,qc.y=a.deltaY);else if("wheelDelta"in a)a.wheelDeltaX&&(qc.x=-.16*a.wheelDeltaX),a.wheelDeltaY?qc.y=-.16*a.wheelDeltaY:qc.y=-.16*a.wheelDelta;else{if(!("detail"in a))return;qc.y=a.detail}Ra(s,!0);var b=oa.x-qc.x,c=oa.y-qc.y;(i.modal||b<=ca.min.x&&b>=ca.max.x&&c<=ca.min.y&&c>=ca.max.y)&&a.preventDefault(),f.panTo(b,c)},toggleDesktopZoom:function(b){b=b||{x:pa.x/2+ra.x,y:pa.y/2+ra.y};var c=i.getDoubleTapZoom(!0,f.currItem),d=s===c;f.mouseZoomedIn=!d,f.zoomTo(d?f.currItem.initialZoomLevel:c,b,333),e[(d?"remove":"add")+"Class"](a,"pswp--zoomed-in")}}});var rc,sc,tc,uc,vc,wc,xc,yc,zc,Ac,Bc,Cc,Dc={history:!0,galleryUID:1},Ec=function(){return Bc.hash.substring(1)},Fc=function(){rc&&clearTimeout(rc),tc&&clearTimeout(tc)},Gc=function(){var a=Ec(),b={};if(a.length<5)return b;var c,d=a.split("&");for(c=0;c<d.length;c++)if(d[c]){var e=d[c].split("=");e.length<2||(b[e[0]]=e[1])}if(i.galleryPIDs){var f=b.pid;for(b.pid=0,c=0;c<Xb.length;c++)if(Xb[c].pid===f){b.pid=c;break}}else b.pid=parseInt(b.pid,10)-1;return b.pid<0&&(b.pid=0),b},Hc=function(){if(tc&&clearTimeout(tc),$a||U)return void(tc=setTimeout(Hc,500));uc?clearTimeout(sc):uc=!0;var a=m+1,b=$b(m);b.hasOwnProperty("pid")&&(a=b.pid);var c=xc+"&gid="+i.galleryUID+"&pid="+a;yc||Bc.hash.indexOf(c)===-1&&(Ac=!0);var d=Bc.href.split("#")[0]+"#"+c;Cc?"#"+c!==window.location.hash&&history[yc?"replaceState":"pushState"]("",document.title,d):yc?Bc.replace(d):Bc.hash=c,yc=!0,sc=setTimeout(function(){uc=!1},60)};ya("History",{publicMethods:{initHistory:function(){if(e.extend(i,Dc,!0),i.history){Bc=window.location,Ac=!1,zc=!1,yc=!1,xc=Ec(),Cc="pushState"in history,xc.indexOf("gid=")>-1&&(xc=xc.split("&gid=")[0],xc=xc.split("?gid=")[0]),Ba("afterChange",f.updateURL),Ba("unbindEvents",function(){e.unbind(window,"hashchange",f.onHashChange)});var a=function(){wc=!0,zc||(Ac?history.back():xc?Bc.hash=xc:Cc?history.pushState("",document.title,Bc.pathname+Bc.search):Bc.hash=""),Fc()};Ba("unbindEvents",function(){l&&a()}),Ba("destroy",function(){wc||a()}),Ba("firstUpdate",function(){m=Gc().pid});var b=xc.indexOf("pid=");b>-1&&(xc=xc.substring(0,b),"&"===xc.slice(-1)&&(xc=xc.slice(0,-1))),setTimeout(function(){j&&e.bind(window,"hashchange",f.onHashChange)},40)}},onHashChange:function(){return Ec()===xc?(zc=!0,void f.close()):void(uc||(vc=!0,f.goTo(Gc().pid),vc=!1))},updateURL:function(){Fc(),vc||(yc?rc=setTimeout(Hc,800):Hc())}}}),e.extend(f,db)};return a}),!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.PhotoSwipeUI_Default=b()}(this,function(){"use strict";var a=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=this,x=document.getElementById("vp__my_modal"),y=!1,z=!0,A=!0,B=!0,C={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(a,b){return a.title?(b.children[0].innerHTML=a.title,!0):(b.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return a.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return a.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},D=function(a){if(s)return!0;a=a||window.event,r.timeToIdle&&r.mouseUsed&&!k&&T();for(var c,d,e=a.target||a.srcElement,f=e.getAttribute("class")||"",g=0;g<_.length;g++)c=_[g],c.onTap&&f.indexOf("pswp__"+c.name)>-1&&(c.onTap(),d=!0);if(d){a.stopPropagation&&a.stopPropagation(),s=!0;var h=b.features.isOldAndroid?600:30;t=setTimeout(function(){s=!1},h)}},E=function(){return!a.likelyTouchDevice||r.mouseUsed||screen.width>r.fitControlsWidth},F=function(a,c,d){b[(d?"add":"remove")+"Class"](a,"pswp__"+c)},G=function(){var a=1===r.getNumItemsFn();a!==q&&(F(d,"ui--one-slide",a),q=a)},H=function(){F(i,"share-modal--hidden",A)},I=function(){return console.log("toggle my modal hidden="+B),B="block"!=x.style.display,B?(console.log("show my modal v2"),setTimeout(function(){console.log("showing 30 ms later"),x.style.display="block"},30)):(console.log("hide my modal"),setTimeout(function(){console.log("hiding 30 ms later"),x.style.display="none"},30)),!1},J=function(){return A=!A,A?(b.removeClass(i,"pswp__share-modal--fade-in"),setTimeout(function(){if(A&&(console.log("Hide modal reload="+m),H(),m)){var b=!1,c="";console.log("Reloading..."),reloadPhotoswipe(g_pswp.cid,a.getCurrentIndex(),g_pswp.galleryElement,b,c)}},300)):(H(),setTimeout(function(){A||(console.log("Show modal reload="+m),b.addClass(i,"pswp__share-modal--fade-in"))},30)),!1},K=function(b){b=b||window.event;var c=b.target||b.srcElement;return a.shout("shareLinkClick",b,c),console.log("_openWindowPopup ",c),c.href?!!c.hasAttribute("download")||(console.log("ok, opening "+c.href),window.open(c.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),A||J(),!1):(console.log("no href.."),!1)},L=function(){var a="/login/",b=document.getElementById("vp__share-modal-content");b.innerHTML=vp_iframe(a)},M=function(){var a=document.getElementById("vp__share-modal-content");a.innerHTML=vp_container("Chat info comes here...","vp__chat_container")},N=function(){var a=document.getElementById("vp__share-modal-content");a.innerHTML=vp_container(vp_infocalendar(g_pswp.cid),"vp__calendar_container"),addtocalendar.load()},O=function(){var a=document.getElementById("vp__my-modal-content");a.innerHTML=vp_infotabs();var b=g_pswp.getCurrentData(g_pswp.cid)||{};vp_update_info(b);var c=document.getElementById("vp__tab1");c.click(),console.log("clicking tab1")},P=function(){var a=document.getElementById("vp__share-modal-content");a.innerHTML=vp_container(vp_infomap(g_pswp.vpdata),"vp__map_container");var b=g_pswp.getCurrentData(g_pswp.cid)||{},c=b.curator||{},d=c.location_lat,e=c.location_long,f=Math.abs(d)>0&&Math.abs(e)>0;f&&initModalMap("mapCanvas")},Q=function(){for(var a,b,c,d,e,f,g="",h=0;h<r.shareButtons.length;h++)a=r.shareButtons[h],c=r.getImageURLForShare(a),d=r.getPageURLForShare(a),e=r.getTextForShare(a),f=r.getObjIdForShare(a),b=a.url.replace("{{url}}",encodeURIComponent(d)).replace("{{image_url}}",encodeURIComponent(c)).replace("{{raw_image_url}}",c).replace("{{obj_id}}",f).replace("{{text}}",encodeURIComponent(e)),g+='<a href="'+b+'" target="_blank" class="pswp__share--'+a.id+'"'+(a.download?"download":"")+">"+a.label+"</a>",r.parseShareButtonOut&&(g=r.parseShareButtonOut(a,g));i.children[0].innerHTML='<div class="pswp__share-tooltip">'+g+"</div>",i.children[0].onclick=K},R=function(a){for(var c=0;c<r.closeElClasses.length;c++)if(b.hasClass(a,"pswp__"+r.closeElClasses[c]))return!0},S=0,T=function(){clearTimeout(v),S=0,k&&w.setIdle(!1)},U=function(a){a=a?a:window.event;var b=a.relatedTarget||a.toElement;b&&"HTML"!==b.nodeName||(clearTimeout(v),v=setTimeout(function(){w.setIdle(!0)},r.timeToIdleOutside))},V=function(){r.fullscreenEl&&!b.features.isOldAndroid&&(c||(c=w.getFullscreenAPI()),c?(b.bind(document,c.eventK,w.updateFullscreen),w.updateFullscreen(),b.addClass(a.template,"pswp--supports-fs")):b.removeClass(a.template,"pswp--supports-fs"))},W=function(){r.preloaderEl&&(X(!0),l("beforeChange",function(){clearTimeout(p),p=setTimeout(function(){a.currItem&&a.currItem.loading?(!a.allowProgressiveImg()||a.currItem.img&&!a.currItem.img.naturalWidth)&&X(!1):X(!0)},r.loadingIndicatorDelay)}),l("imageLoadComplete",function(b,c){a.currItem===c&&X(!0)}))},X=function(a){o!==a&&(F(n,"preloader--active",!a),o=a)},Y=function(a){var c=a.vGap;if(E()){var g=r.barsSize;if(r.captionEl&&"auto"===g.bottom)if(f||(f=b.createEl("pswp__caption pswp__caption--fake"),f.appendChild(b.createEl("pswp__caption__center")),d.insertBefore(f,e),b.addClass(d,"pswp__ui--fit")),r.addCaptionHTMLFn(a,f,!0)){var h=f.clientHeight;c.bottom=parseInt(h,10)||44}else c.bottom=g.top;else c.bottom="auto"===g.bottom?0:g.bottom;c.top=g.top}else c.top=c.bottom=0},Z=function(){r.timeToIdle&&l("mouseUsed",function(){b.bind(document,"mousemove",T),b.bind(document,"mouseout",U),u=setInterval(function(){S++,2===S&&w.setIdle(!0)},r.timeToIdle/2)})},$=function(){l("onVerticalDrag",function(a){z&&a<.95?w.hideControls():!z&&a>=.95&&w.showControls()});var a;l("onPinchClose",function(b){z&&b<.9?(w.hideControls(),a=!0):a&&!z&&b>.9&&w.showControls()}),l("zoomGestureEnded",function(){a=!1,a&&!z&&w.showControls()})},_=[{name:"caption",option:"captionEl",onInit:function(a){e=a}},{name:"share-modal",option:"shareEl",onInit:function(a){i=a},onTap:function(){J()}},{name:"button--share",option:"shareEl",onInit:function(a){h=a},onTap:function(){m=0,J(),Q()}},{name:"button--zoom",option:"zoomEl",onTap:a.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(a){g=a}},{name:"button--close",option:"closeEl",onTap:a.close},{name:"button--arrow--left",option:"arrowEl",onTap:a.prev},{name:"button--arrow--right",option:"arrowEl",onTap:a.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){var a=document.getElementById("vp__infoBtn");c.isFullscreen()?(c.exit(),a.style.display="block"):(a.style.display="none",c.enter())}},{name:"preloader",option:"preloaderEl",onInit:function(a){n=a}},{name:"button--like",option:"likeEl",onTap:function(){var a=g_pswp.getCurrentData(g_pswp.cid),b=a.item;if(m=0,g_pswp.reload=1,g_user_id)console.log("click on like by user "+g_user_id),g_pswp.like(g_pswp.cid,a);else{m=1;var c=vp_follow_link(a.curator_id,b);if(console.log("click on like - no user curator:"+a.curator_id+" mid="+b.media_id+" link="+c),!c)return;var d=document.getElementById("vp__share-modal-content");d.innerHTML=vp_iframe(c),J()}}},{name:"button--info",option:"infoEl",onInit:function(a){h=a},onTap:function(){m=0,console.log("infoEl tap"),I(),O()}},{name:"button--calendar",option:"calendarEl",onInit:function(a){h=a},onTap:function(){m=0,J(),N()}},{name:"button--user",option:"userEl",onInit:function(a){h=a},onTap:function(){m=1,J(),L()}},{name:"button--contact",option:"contactEl",onInit:function(a){h=a},onTap:function(){m=1;var a=vp_contact_link(g_pswp.cid);console.log("opening popup link="+a+" el:",h),vp_popup(a)}},{name:"button--map",option:"mapEl",onInit:function(a){h=a},onTap:function(){m=0,J(),P()}},{name:"button--chat",option:"chatEl",onInit:function(a){h=a},onTap:function(){m=0,J(),M()}}],aa=function(){var a,c,e,f=function(d){if(d)for(var f=d.length,g=0;g<f;g++){a=d[g],c=a.className;for(var h=0;h<_.length;h++)e=_[h],c.indexOf("pswp__"+e.name)>-1&&(r[e.option]?(b.removeClass(a,"pswp__element--disabled"),e.onInit&&e.onInit(a)):b.addClass(a,"pswp__element--disabled"))}};f(d.children);var g=b.getChildByClass(d,"pswp__top-bar");g&&f(g.children)};w.init=function(){b.extend(a.options,C,!0),r=a.options,d=b.getChildByClass(a.scrollWrap,"pswp__ui"),l=a.listen,$(),l("beforeChange",w.update),l("doubleTap",function(b){var c=a.currItem.initialZoomLevel;a.getZoomLevel()!==c?a.zoomTo(c,b,333):a.zoomTo(r.getDoubleTapZoom(!1,a.currItem),b,333)}),l("preventDragEvent",function(a,b,c){var d=a.target||a.srcElement;d&&d.getAttribute("class")&&a.type.indexOf("mouse")>-1&&(d.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(d.tagName))&&(c.prevent=!1)}),l("bindEvents",function(){b.bind(d,"pswpTap click",D),b.bind(a.scrollWrap,"pswpTap",w.onGlobalTap),a.likelyTouchDevice||b.bind(a.scrollWrap,"mouseover",w.onMouseOver)}),l("unbindEvents",function(){A||J(),u&&clearInterval(u),b.unbind(document,"mouseout",U),b.unbind(document,"mousemove",T),b.unbind(d,"pswpTap click",D),b.unbind(a.scrollWrap,"pswpTap",w.onGlobalTap),b.unbind(a.scrollWrap,"mouseover",w.onMouseOver),c&&(b.unbind(document,c.eventK,w.updateFullscreen),c.isFullscreen()&&(r.hideAnimationDuration=0,c.exit()),c=null)}),l("destroy",function(){r.captionEl&&(f&&d.removeChild(f),b.removeClass(e,"pswp__caption--empty")),i&&(i.children[0].onclick=null),b.removeClass(d,"pswp__ui--over-close"),b.addClass(d,"pswp__ui--hidden"),w.setIdle(!1)}),r.showAnimationDuration||b.removeClass(d,"pswp__ui--hidden"),l("initialZoomIn",function(){r.showAnimationDuration&&b.removeClass(d,"pswp__ui--hidden")}),l("initialZoomOut",function(){b.addClass(d,"pswp__ui--hidden")}),l("parseVerticalMargin",Y),aa(),r.shareEl&&h&&i&&(A=!0),G(),Z(),V(),W()},w.setIdle=function(a){k=a,F(d,"ui--idle",a)},w.update=function(){z&&a.currItem?(w.updateIndexIndicator(),r.captionEl&&(r.addCaptionHTMLFn(a.currItem,e),F(e,"caption--empty",!a.currItem.title)),y=!0):y=!1,A||J(),G()},w.updateFullscreen=function(d){d&&setTimeout(function(){a.setScrollOffset(0,b.getScrollY())},50),b[(c.isFullscreen()?"add":"remove")+"Class"](a.template,"pswp--fs")},w.updateIndexIndicator=function(){r.counterEl&&(g.innerHTML=a.getCurrentIndex()+1+r.indexIndicatorSep+r.getNumItemsFn())},w.onGlobalTap=function(c){c=c||window.event;var d=c.target||c.srcElement;if(console.log("tap target=",d),b.hasClass(d,"pswp__top-bar"))return void console.log("tap on top bar");if(!s)if(c.detail&&"mouse"===c.detail.pointerType){if(R(d))return void a.close();b.hasClass(d,"pswp__img")&&(1===a.getZoomLevel()&&a.getZoomLevel()<=a.currItem.fitRatio?r.clickToCloseNonZoomable&&a.close():a.toggleDesktopZoom(c.detail.releasePoint))}else if(r.tapToToggleControls&&(z?w.hideControls():w.showControls()),r.tapToClose&&(b.hasClass(d,"pswp__img")||R(d)))return void a.close()},w.onMouseOver=function(a){a=a||window.event;var b=a.target||a.srcElement;F(d,"ui--over-close",R(b))},w.hideControls=function(){b.addClass(d,"pswp__ui--hidden"),z=!1},w.showControls=function(){z=!0,y||w.update(),b.removeClass(d,"pswp__ui--hidden")},w.supportsFullscreen=function(){var a=document;return!!(a.exitFullscreen||a.mozCancelFullScreen||a.webkitExitFullscreen||a.msExitFullscreen)},w.getFullscreenAPI=function(){var b,c=document.documentElement,d="fullscreenchange";return c.requestFullscreen?b={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:d}:c.mozRequestFullScreen?b={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+d}:c.webkitRequestFullscreen?b={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+d}:c.msRequestFullscreen&&(b={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),b&&(b.enter=function(){return j=r.closeOnScroll,r.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK?a.template[this.enterK]():void a.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},b.exit=function(){return r.closeOnScroll=j,document[this.exitK]()},b.isFullscreen=function(){return document[this.elementK]}),b}};return a});var $jsonp=function(){var a={};return a.send=function(a,b){var c=b.callbackName||"callback",d=b.onSuccess||function(){},e=b.onTimeout||function(){},f=b.timeout||10,g=window.setTimeout(function(){window[c]=function(){},e()},1e3*f);window[c]=function(a){window.clearTimeout(g),d(a)};var h=document.createElement("script");h.type="text/javascript",h.async=!0,h.src=a,document.getElementsByTagName("head")[0].appendChild(h)},a}(),closest=function a(b,c){return b&&(c(b)?b:a(b.parentNode,c))};Object.size=function(a){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c};var g_pswp=!1,g_pswp_index=-1,g_site_url="https://www.vpatina.com",g_aid=10,g_site_id="247",g_user_id="",g_user_name="",g_sharer_id="",g_host_protocol="https",g_host_tld="www",g_host_domain="vpatina.com",g_client_protocol=document.location.protocol,g_follow=[],g_branch="9d08da5",g_list,g_cid="",g_follow=[],g_artists={},g_json_data,g_local_file="",g_local_data="",g_plugin_options="",g_popup_options="",g_popup_buttons="",g_popup_tabs="",g_cids={},g_json_data={},g_list={},g_keys={};!function(w,d){var atc_url="//addtocalendar.com/atc/",atc_version="1.5",b=d.documentElement;Array.indexOf||(Array.prototype.indexOf=function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]==a)return b;return-1}),Array.prototype.map||(Array.prototype.map=function(a){for(var b=[],c=0,d=this.length;c<d;c++)b.push(a(this[c]));return b});var isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)},isFunc=function(a){return"[object Function]"===Object.prototype.toString.call(a)},ready=function(a,c){function d(){if(!i){if(!c.body)return setTimeout(d,13);if(i=!0,k){for(var a,b=0;a=k[b++];)a.call(null);k=null}}}function e(){if(!j){if(j=!0,"complete"===c.readyState)return d();if(c.addEventListener)c.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",d,!1);else if(c.attachEvent){c.attachEvent("onreadystatechange",g),a.attachEvent("onload",d);var e=!1;try{e=null==a.frameElement}catch(i){}b.doScroll&&e&&f()}else h=a.onload,a.onload=function(a){h(a),d()}}}function f(){if(!i){try{b.doScroll("left")}catch(a){return void setTimeout(f,1)}d()}}var g,h,i=!1,j=!1,k=[];return c.addEventListener?g=function(){c.removeEventListener("DOMContentLoaded",g,!1),d()}:c.attachEvent&&(g=function(){"complete"===c.readyState&&(c.detachEvent("onreadystatechange",g),d())}),function(a){e(),i?a.call(null):k.push(a)}}(w,d);w.addtocalendar&&"function"==typeof w.addtocalendar.start||(w.addtocalendar||(w.addtocalendar={}),addtocalendar.languages={de:"In den Kalender",en:"Add to Calendar",es:"Añadir al Calendario",fr:"Ajouter au calendrier",hi:"कैलेंडर में जोड़ें","in":"Tambahkan ke Kalender",ja:"カレンダーに追加",ko:"캘린더에 추가",pt:"Adicionar ao calendário",ru:"Добавить в календарь",uk:"Додати в календар",zh:"添加到日历"},addtocalendar.calendar_urls={},addtocalendar.loadSettings=function(element){var settings={language:"auto","show-list-on":"click",calendars:["iCalendar","Google Calendar","Outlook","Outlook Online","Yahoo! Calendar"],secure:"auto","on-button-click":function(){},"on-calendar-click":function(){}};for(var option in settings){var pname="data-"+option,eattr=element.getAttribute(pname);if(null!=eattr){if(isArray(settings[option])){settings[option]=eattr.replace(/\s*,\s*/g,",").replace(/^\s+|\s+$/g,"").split(",");continue}if(isFunc(settings[option])){var fn=window[eattr];isFunc(fn)?settings[option]=fn:settings[option]=eval("(function(mouseEvent){"+eattr+"})");continue}settings[option]=element.getAttribute(pname)}}return settings},addtocalendar.load=function(){ready(function(){for(var a={iCalendar:"ical","Google Calendar":"google",Outlook:"outlook","Outlook Online":"outlookonline","Yahoo! Calendar":"yahoo"},b=-(new Date).getTimezoneOffset().toString(),c=addtocalendar.languages,d=document.getElementsByTagName("*"),e=0;e<d.length;e++){var f=d[e].className;if(f.length&&f.split(" ").indexOf("addtocalendar")!=-1){var g=addtocalendar.loadSettings(d[e]),h=1==g.calendars.length,i="http:";"auto"==g.secure?i="https:"==location.protocol?"https:":"http:":"true"==g.secure&&(i="https:");var j=i+atc_url,k=d[e].id,l=c.en;
if("auto"==g.language){var m="no_lang";"string"==typeof navigator.language?m=navigator.language.substr(0,2):"string"==typeof navigator.browserLanguage&&(m=navigator.browserLanguage.substr(0,2)),c.hasOwnProperty(m)&&(l=c[m])}else c.hasOwnProperty(g.language)&&(l=c[g.language]);for(var n=["utz="+b,"uln="+navigator.language,"vjs="+atc_version],o=d[e].getElementsByTagName("var"),p=-1,q=0;q<o.length;q++){var r=o[q].className.replace("atc_",""),s=o[q].innerHTML;"event"!=r?r!=o[q].className?p!=-1&&n.push("e["+p+"]["+r+"]="+encodeURIComponent(s)):"atc-body"==r&&(l=s):p++}var t=""==k?"":k+"_link",u=document.createElement("ul");u.className="atcb-list";var v="",w="";for(var x in g.calendars)if(a.hasOwnProperty(g.calendars[x])){var y=a[g.calendars[x]],z=""==k?"":'id="'+k+"_"+y+'_link"',A=j+y+"?"+n.join("&");h?w=A:v+='<li class="atcb-item"><a '+z+' class="atcb-item-link" href="'+A+'" target="_blank">'+g.calendars[x]+"</a></li>"}if(u.innerHTML=v,void 0==d[e].getElementsByClassName("atcb-link")[0]){var B=document.createElement("a");B.className="atcb-link",B.innerHTML=l,B.id=t,B.tabIndex=1,h&&(B.href=w,B.target="_blank"),d[e].appendChild(B),h||d[e].appendChild(u)}else{var B=d[e].getElementsByClassName("atcb-link")[0];h||B.parentNode.appendChild(u),B.tabIndex=1,""==B.id&&(B.id=t),h&&(B.href=w,B.target="_blank")}d[e].getElementsByClassName("atcb-link")[0].addEventListener("click",g["on-button-click"],!1);for(var C=d[e].getElementsByClassName("atcb-item-link"),q=0;q<C.length;q++)C[q].addEventListener("click",g["on-calendar-click"],!1)}}})},addtocalendar.load())}(window,document);var g_local=!1,g_start=(new Date).getTime(),g_timer={},openPhotoSwipe=function(a,b,c,d,e){var f,g,h,i=document.querySelectorAll(".pswp")[0],j=vp_element_data(a),k=(j.plugin_id,vp_element_key(j)),l=g_list[k];if(!l)return alert("Ooops, no data found"),void console.log("g_list:",g_list);var m=l.events||[],n=m.length,o=l.curator,p=o.location_lat,q=o.location_long,r=!0,s=n>0,t=Math.abs(p)>0&&Math.abs(q)>0,u=o.email_address&&isEmail(o.email_address);if(console.log("open PhotoSwipe cid="+a),g_cid=a,h=l.psitems,g_sharer_id=l.curator_id,console.log("g_sharer_id="+g_sharer_id),"undefined"==typeof v)var v=null;if(g={barsSize:{top:44,bottom:"auto"},timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(a,b,c){var d=vp_caption(l,a.data,0);return b.children[0].innerHTML=d,!0},closeEl:!0,captionEl:!0,zoomEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,fullscreenEl:!g_popup_buttons||inArray("fullscreen",g_popup_buttons),shareEl:!g_popup_buttons||inArray("share",g_popup_buttons),infoEl:!!g_popup_buttons&&(inArray("info",g_popup_buttons)&&r),mapEl:!!g_popup_buttons&&(inArray("map",g_popup_buttons)&&t),likeEl:!!g_popup_buttons&&inArray("follow",g_popup_buttons),chatEl:!!g_popup_buttons&&inArray("chat",g_popup_buttons),userEl:!!g_popup_buttons&&inArray("user",g_popup_buttons),contactEl:!!g_popup_buttons&&(inArray("contact",g_popup_buttons)&&u),calendarEl:!!g_popup_buttons&&(inArray("calendar",g_popup_buttons)&&s),tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],indexIndicatorSep:" / ",shareButtons:[{id:"facebook",label:"Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"email",label:"E-mail",url:g_site_url+"/share/?url={{image_url}}&obj_type=media_collection_map&obj_id={{obj_id}}&_aid=10&template=mail/mail-artwork.html&controller=gallery_artworks"}],getImageURLForShare:function(b){var c=g_pswp.getCurrentData(a)||{},d=c.item;return d.href},getPageURLForShare:function(b){var c=g_pswp.getCurrentData(a)||{},d=c.item,e=d.link,f=g_sharer_id?g_sharer_id:1,g="_aid="+f;return e=e.indexOf("?")>-1?e+"&"+g:e+"?"+g},getTextForShare:function(b){var c=g_pswp.getCurrentData(a)||{},d=c.item,e=vp_caption(l,d,2);return e},getObjIdForShare:function(b){var c=g_pswp.getCurrentData(a)||{},d=c.item;return console.log("getObjId for share: item=",d," id=",d.map_id),d.map_id},parseShareButtonOut:function(a,b){return b}},e)if(g.galleryPIDs){for(var w=0;w<h.length;w++)if(h[w].pid==b){g.index=w;break}}else g.index=parseInt(b,10)-1;else g.index=parseInt(b,10);if(!isNaN(g.index)){d&&(g.showAnimationDuration=0),g.escKey=!0,g.closeOnScroll=!1,g.closeOnVerticalDrag=!1,g.pinchToClose=!1,g.clickToCloseNonZoomable=!1,g.tapToClose=!1,g.showAnimationDuration=0,f=new PhotoSwipe(i,PhotoSwipeUI_Default,h,g),f.init(),g_pswp=f,g_pswp.cid=a,g_pswp.vpdata=l,g_pswp.galleryElement=c;g_pswp.listen("close",function(){console.log("closing gallery"),vp__close_modal()});var x=document.getElementById("userBtn");g_user_id?(x.style.display="block",x.setAttribute("title","Logged in as "+g_user_name)):x.style.display="none",g_pswp.listen("afterChange",function(b){var c=g_pswp.getCurrentData(a),d=c.item,e=(vp_price(d),d.original_height,d.original_width,d.original_technique,d.original_currency,d.title,d.media_id),c=g_pswp.getCurrentData(a)||{},d=c.item,f=d.comment;vp_update_info(c);var g=document.createElement("div");g.innerHTML=f;var h=(g.textContent||g.innerText||"",document.getElementById("vp__infoBtn"));h.style.display="block";var i=g_user_id&&g_follow.length&&g_follow[e],j=document.getElementById("likeBtn");i?(j.classList.contains("follow")||j.classList.add("follow"),j.setAttribute("title","You follow "+d.title)):(j.classList.contains("follow")&&j.classList.remove("follow"),j.setAttribute("title","Click to follow "+d.title))}),g_pswp.like=function(a,b){var c=g_site_url+"/home/app_data.php?oper=gallery-favorite&format=json&jsoncallback=likeStuff",d=b.item,e=d.media_id,f="&site_id="+b.site_id+"&user_id="+b.user_id+"&obj_type="+b.obj_type+"&obj_id="+e+"&plugin_id="+b.plugin_id+"&target="+a,g=document.getElementById("likeBtn"),h='<i class="fa fa-spinner fa-spin"></i>';g.innerHTML=h,$jsonp.send(c+f,{callbackName:"likeStuff",onSuccess:function(a){var b=a.id;b?(g.classList.contains("follow")||g.classList.add("follow"),g.setAttribute("title","You follow "+d.title)):(g.classList.contains("follow")&&g.classList.remove("follow"),g.setAttribute("title","Click to follow "+d.title)),g_follow[e]=b,g.innerHTML=""},onTimeout:function(){},timeout:5})},g_pswp.getCurrentData=function(a){var b=this.getCurrentIndex(),c=vp_element_data(a),d=vp_element_key(c),e=g_list[d],f=e,g=e.psitems,h=g[b];return f.index=b,f.item=h.data,f}}},onThumbnailsClick=function(a){a=a||window.event,a.preventDefault?a.preventDefault():a.returnValue=!1;var b=a.target||a.srcElement,c=closest(b,function(a){return a.tagName&&("FIGURE"===a.tagName.toUpperCase()||"OBJECT"===a.tagName.toUpperCase())}),d=c.getAttribute("data-pswp-uid"),e=c.getAttribute("data-index")||0,f=c.getAttribute("data-plugin_options"),g=c.getAttribute("data-popup_options");g_plugin_options=f?JSON.parse(f):{},g_popup_options=g?JSON.parse(g):{},g_popup_buttons=g_popup_options.buttons||["info","contact","map","zoom","share","fullscreen"],g_popup_tabs=g_popup_options.tabs||["artwork","artist","exhibition","gallery"],g_popup_title=g_popup_options.title||["dot","artwork","artist","year"],console.log("buttons for "+d+" = ",g_popup_buttons),console.log("tabs for "+d+" = ",g_popup_tabs),zoomOutMobile(),openPhotoSwipe(d,e,c)};vp_search();var test="kj-v0.0.4";window.onclick=function(a){var b=document.getElementById("vp__my_modal");a.target==b&&vp__close_modal()};