<?

// class definitions

function get_classes() {

  //   CLASS        NAME                  TABLE KEY FLAGS GROUP DESCRIPTOR
                    0                      1     2    3     4      5
  $fields = array(
    'dictionary',=>                      array('', '', 0, ''),
    'security',=>                        array('', '', 0, ''),
    'reservation',=>                     array('', '', 0, ''),
    'inv_lineitem',=>                    array('', '', 0, ''),
    'enquiry',=>                         array('', '', 0, ''),
//    'longstay_enquiry',=>              array('', '', 0, ''),
//    'realestate_enquiry',=>            array('', '', 0, ''),
//    'boat_enquiry',=>                  array('', '', 0, ''),
//    'office_enquiry',=>                array('', '', 0, ''),
    'hotel_request',=>                   array('', '', 0, ''),
    'shortstay',=>                       array('', '', 0, ''),
    'longstay',=>                        array('', '', 0, ''),
    'realestate',=>                      array('', '', 0, ''),
    'property',=>                        array('', '', 0, ''),
    'facility',=>                        array('', '', 0, ''),
    'event',=>                           array('', '', 0, ''),       array(',=>                        array('', '', 0, ''),        array(',=>                        array('', '', 0, ''),        array(',=>                        array('', '', 0, ''),         array(',=>                        array('', '', 0, ''),          array(',=>                        array('', '', 0, ''),            array(',=>                        array('', '', 0, ''),           array(',=>                        array('', '', 0, ''),              array(',=>                        array('', '', 0, ''),             array(',=>                        array('', '', 0, ''),    array(',=>                        array('', '', 0, ''),      array(',=>                        array('', '', 0, ''),                array(',=>                        array('', '', 0, ''),     array(',=>                        array('', '', 0, ''),            array(',=>                        array('', '', 0, ''), 
//    'feedback',=>                      array('', '', 0, ''),
    'quote',=>                           array('', '', 0, ''),
    'contract',=>                        array('', '', 0, ''),
    'contact',=>                         array('', '', 0, ''),
    'guest',=>                           array('', '', 0, ''),
    'org',=>                             array('', '', 0, ''),
    'owner',=>                           array('', '', 0, ''),
    'affiliate',=>                        array('', '', 0, ''),
    'contractor',=>                        array('', '', 0, ''),
    'agent',=>                        array('', '', 0, ''),
    'translator',=>                        array('', '', 0, ''),
    'staff',=>                        array('', '', 0, ''),
    'admin',=>                        array('', '', 0, ''),
    'user',=>                        array('', '', 0, ''),
    'user_level',=>                        array('', '', 0, ''),
    'inv_status',=>                        array('', '', 0, ''),
    'inv_type',=>                        array('', '', 0, ''),
    'lineitem_type',=>                        array('', '', 0, ''),
//    'purray(',=>                        array('', '', 0, ''),          array(',=>                        array('', '', 0, ''),          array(',=>                        array('', '', 0, ''),             array(',=>                        array('', '', 0, ''),             array(',=>                        array('', '', 0, ''), 'region',=>    ,=>                        array('', '', 0, ''),             ,=>                        array('', '', 0, ''),               ,=>                        array('', '', 0, ''),              ,=>                        array('', '', 0, ''),           ,=>                        array('', '', 0, ''),,=>           ,=>                        array('', '', 0, ''),on',=>             ,=>                        array('', '', 0, ''),=>               ,=>                        array('', '', 0, ''),               ,=>                        array('', '', 0, ''),>              ,=>                        array('', '', 0, ''),                ,=>                        array('', '', 0, ''),             ,=>                        array('', '', 0, ''),                ,=>                        array('', '', 0, ''),           ,=>                        array('', '', 0, ''),           ,=>                        array('', '', 0, ''),out',=>            ,=>                        array('', '', 0, ''),ut_div',=>        ,=>                        array('', '', 0, ''),queue',=>             ,=>                        array('', '', 0, ''),,=>              ,=>                        array('', '', 0, ''),                ,=>                        array('', '', 0, ''),            ,=>                        array('', '', 0, ''),ice',=>      ,=>                        array('', '', 0, ''),ocation_service',=>     ,=>                        array('', '', 0, ''),ty_guide',=>             ,=>                        array('', '', 0, ''),end',=>          ,=>                        array('', '', 0, ''),>                   ,=>                        array('', '', 0, ''),>          ,=>                        array('', '', 0, ''),y_search',=>        ,=>                        array('', '', 0, ''),rty_alert',=>         ,=>                        array('', '', 0, ''),el',=>               ,=>                        array('', '', 0, ''),               ,=>                        array('', '', 0, ''),              ,=>                        array('', '', 0, ''),           ,=>                        array('', '', 0, ''),_rate',=>          ,=>                        array('', '', 0, ''),y_type',=>          ,=>                        array('', '', 0, ''),                    ,=>                        array('', '', 0, ''),('', '', 0, ''),=>                        array('', '', 0, ''),rray('', '', 0, ''),=>                        array('', '', 0, ''), array('', '', 0, ''),=>                        array('', '', 0, ''),array('', '', 0, ''),=>                        array('', '', 0, ''),'', '', 0, ''),=>                        array('', '', 0, ''),', '', 0, ''),=>                        array('', '', 0, ''),'', '', 0, ''),=>                        array('', '', 0, ''),ray('', '', 0, ''),=>                        array('', '', 0, ''),y('', '', 0, ''),=>                        array('', '', 0, ''),g inspired             
    'room',=>                        array('', '', 0, ''),
    'description_type',=>                        array('', '', 0, ''),
    'facility_type',=>                        array('', '', 0, ''),
    'hotel_type',=>                        array('', '', 0, ''),
    'hotel_chain',=>                        array('', '', 0, ''),
    'room_type',=>                        array('', '', 0, ''),
    'cc_type',=>                        array('', '', 0, ''),
    'property_description',=>                        array('', '', 0, ''),
    'room_description',=>                        array('', '', 0, ''),

  );
	return $types;
}

function get_node_types() {
  $types = array(
    'dictionary',
    'security',
    'reservation',
    'inv_lineitem',
    'enquiry',
//    'longstay_enquiry',
//    'realestate_enquiry',
//    'boat_enquiry',
//    'office_enquiry',
    'hotel_request',
    'shortstay',
    'longstay',
    'realestate',
    'property',
    'facility',
    'event',
    'checkin',
    'checkout',
    'cleaning',
    'transport',
    'event_type',
    'event_status',
    'maintenance',
    'hotel_facility',
    'room_facility',
    'boat',
    'office',
    'shortstay_office',
    'hotel',
    'estate_agent',

//    'feedback',
    'quote',
    'contract',
    'contact',
    'guest',
    'org',
    'owner',
    'affiliate',
    'contractor',
    'agent',
    'translator',
    'staff',
    'admin',
    'user',
    'user_level',
    'inv_status',
    'inv_type',
    'lineitem_type',
//    'purpose',
    'res_status',
    'enq_status',
    'res_exception',
    'exchange_rate',
    'continent',
    'region',
    'district',
    'country',
    'city',
    'borough',
    'neighborhood',
//    'location',
    'landmark',
    'language',
    'countries',
    'weblog',
    'changelog',
    'link',
    'site',
    'legal_entity',
    'site_layout',
    'site_layout_div',
    'mail_queue',
    'sms_queue',
    'media',
    'source',
    'relocation_advice',
    'relocation_service',
    'city_guide',
    'tell_a_friend',
    'chat',
    'list_property',
    'property_search',
    'property_alert',
    'geolevel',
    'geoname',
    'page',
    'page_content',
    'exchange_rate',
    'property_type',

    'payment',
    'payment_type',
    'payment_status',
    'draft_invoice',
    'invoice',
    'charge',
    'gateway',
    'transaction',
    'tx_status',

  // Booking inspired
    'room',
    'description_type',
    'facility_type',
    'hotel_type',
    'hotel_chain',
    'room_type',
    'cc_type',
    'property_description',
    'room_description',

  );
	return $types;
}


// returns array(type, key) that refers to parent.
// the type is used in delete_object
function get_object_parent($type) {
  if(!$type) die ("get_object_parent: missing type");
  $object_parent = array(
    'shortstay' => array('owner', 'owner_id'),
    'media' => array('property', 'property_id'),
    'room' => array('property', 'parent_id'),
    'bed' => array('room', 'parent_id'),
    'reslog' => array('reservation', 'res_id'),
    'chat' => array('reservation', 'res_id'),
    'inv_lineitem' => array('draft_invoice', 'inv_id'),
    'draft_invoice' => array('reservation', 'res_id'),
  );
  return $object_parent[$type];
}

// returns name of column that refers to owner (root ancestor, parent-of-parent-of-etc).
function get_object_owner($type) {
  if(!$type) die ("get_object_owner: missing type");
  $object_owner = array(
    'shortstay' => 'owner_id',
    'room' => 'owner_id',
    'bed' => 'owner_id',
    'reslog' => 'res_id',
    'inv_lineitem' => 'inv_id',
  );
  return $object_owner[$type];
}

function get_object_table($type) {
  if(!$type) mydie("get_object_table: missing type");
  $object_table = array(
    'billing' => 'cc',
    'shortstay' => 'property',
    'longstay' => 'property',
    'realestate' => 'property',
    'boat' => 'property',
    'hotel' => 'property',
    'office' => 'property',
    'shortstay_office' => 'property',
//    'invoice' => 'inv',
    'user' => 'users',
    'enquiry' => 'enquiry',

    'event' => 'event',
    'checkin' => 'event',
    'checkout' => 'event',
    'cleaning' => 'event',
    'transport' => 'event',
    'maintenance' => 'event',
    'event_type' => 'event_type',
    'event_status' => 'event_status',

//    'longstay_enquiry' => 'enquiry',
//    'realestate_enquiry' => 'enquiry',
//    'boat_enquiry' => 'enquiry',
//    'office_enquiry' => 'enquiry',
    'contract' => 'res_exception',

    'continent' => 'msContinent',
    'region'    => 'msRegion',
    'country'    => 'msCountry',
    'district'    => 'msDistrict',
    'city'    => 'msCity',
    'borough'    => 'msBorough',
    'neighborhood'    => 'msNeighborhood',
//    'location'    => 'msLocation',
    'geoname'    => 'msGeoname',
    'geolevel'    => 'msLevel',
    'facility' => 'property_facilities',
  );
  $table = $object_table[$type];
  if($table) return $table;
  return $type; // default type=table
}


// object descriptor is the name as it will appear in a select box
function get_object_descriptor($type) {
  if(!$type) die ("get_object_descriptor: missing type");
  //if (funCtion_exists($type."_descriptor")) return call_user_func($type."_descriptor"); // check for custom descriptor
  $object_descriptor = array(
    'property_type' => 'name',
    'dictionary' => 'term language',
    'page' => 'page',
    'site' => 'domain',
    'address' => 'first_name last_name address1 city',
    'user' => 'address.first_name address.last_name',
    'agent' => 'user.address.first_name user.address.last_name',
    'contractor' => 'user.address.first_name user.address.last_name',
    'translator' => 'user.address.first_name user.address.last_name',
//    'cc' => 'address.first_name address.last_name cc_type',
    'org' => 'org_name',
    'contact' => 'user.address.first_name user.address.last_name',
    'guest' => 'user.address.first_name user.address.last_name',
//    'org' => 'user.address.first_name user.address.last_name',
    'owner' => 'user.address.first_name user.address.last_name',
    'affiliate' => 'affiliate_name',
    'staff' => 'user.address.first_name user.address.last_name',
    'admin' => 'user.address.first_name user.address.last_name',
    'user_level' => 'user_type',


///    'inv_type' => 'inv_type',
///    'inv_status' => 'inv_status',
///    'res_type' => 'res_type',
///    'res_status' => 'res_status',
//    'payment_type' => 'name',
//    'payment_status' => 'name',
//    'city' => 'name',
//    'district' => 'parent_id - name',
//    'location' => 'address_city - address_street address_number address_suffix',
//    'map' => 'location_accuracy location_lat location_long',
  );
  if($descriptor = $object_descriptor[$type]) {
    //print_debug("Found descriptor for $type = '$descriptor'");
    return $descriptor;
  } else {
    $class_def = get_object_attributes($type, false);
    if($class_def['name']) {
    //echo("Did NOT find descriptor for $type, returning 'name'<br>");
      return 'name';
    } else {
      //echo("Did NOT find descriptor for $type, returning key (e.g. id)<br>");
      $key = get_object_key($type);
      return $key; // default descriptor = name
    }
  }
}

function get_object_group($type) {
  if(!$type) die ("get_object_group: missing type");
  if(in_array($type, array('property_type', 'property','shortstay','longstay','office', 'shortstay_office', 'boat', 'realestate', 'longstay', 'hotel', 'room', 'bed', 'facility','hotel_facility','room_facility','property_description', 'room_description', 'description_type', 'facility_type', 'hotel_chain', 'hotel_type', 'room_type'))) return 'property';
  elseif(in_array($type, array('enquiry','reservation', 'res_status', 'enq_status', 'res_exception', 'contract'))) return 'request';
  elseif(in_array($type, array('event', 'checkin', 'checkout', 'cleaning', 'transport', 'maintenance', 'event_status', 'event_type'))) return 'event';
  elseif(in_array($type, array('list_property','property_alert', 'relocation_advice','tell_a_friend','quote','feedback'))) return 'user input';
  elseif(in_array($type, array('contact', 'user','user_level','guest', 'org', 'owner','agent', 'contractor', 'translator', 'admin', 'system', 'estate_agent', 'affiliate', 'staff', 'legal_entity'))) return 'user';  elseif(in_array($type, array('continent','region','country','district', 'city', 'borough', 'neigborhood', 'landmark', 'countries', 'geolevel', 'geoname'))) return 'location';
  elseif(in_array($type, array('charge','transaction','tx_status','draft_invoice', 'invoice','inv_lineitem','inv_status', 'inv_type', 'lineitem_type', 'payment' , 'payment_type', 'payment_status'))) return 'accounting';
  elseif(in_array($type, array('dictionary', 'page','page_content', 'city_guide', 'relocation_service', 'link', 'site'))) return 'content';
  else return 'system';
}

function get_object_flags($type) {
  if(!$type) die ("get_object_flags: missing type");
  $object_flags = array(
    'dictionary' => 0,
    'address' => NF_NO_DELETE,
    'cc' => 0,
    'security' => 0,
    'reservation' => NF_COMPACT_LIST|NF_NO_ADD,
    'room' =>NF_COMPACT_LIST,
    'bed' => 0,
    'facility' => 0,
    'shortstay' => NF_COMPACT_LIST,
    'longstay' => NF_COMPACT_LIST,
    'realestate' => NF_COMPACT_LIST,
    'boat' => NF_COMPACT_LIST,
    'office' => NF_COMPACT_LIST,
    'shortstay_office' => NF_COMPACT_LIST,
    'hotel' => NF_COMPACT_LIST,
    'event' => 0,
    'checkin' => 0,
    'checkout' => 0,
    'cleaning' => 0,
    'maintenance' => 0,
    'transport' => 0,
    'draft_invoice' => NF_COMPACT_LIST,
    'invoice' => NF_COMPACT_LIST,
    'inv_lineitem' => 0,
    'charge' => NF_NO_ADD|NF_NO_DELETE|NF_NO_EDIT,
    'gateway' => 0,
    'transaction' => NF_NO_ADD|NF_NO_EDIT|NF_NO_DELETE|NF_COMPACT_LIST,
    'payment' => NF_NO_ADD|NF_COMPACT_LIST,
//    'payment' => NF_NO_ADD|NF_NO_EDIT|NF_NO_DELETE|NF_COMPACT_LIST,
//    'payment' => NF_COMPACT_LIST,
    'feedback' => 0,
    'quote' => 0,
    'contract' => 0,
    'contact' => 0,
    'guest' => 0,
    'org' => NF_NO_DELETE,
    'owner' => 0,
    'agent' => NF_COMPACT_LIST,
    'contractor' => 0,
    'translator' => 0,
    'affiliate' => 0,
    'staff' => 0,
    'admin' => 0,
    'user' => NF_NO_DELETE|NF_NO_ADD,
    'user_level' => 0,
    'inv_status' => 0,
    'inv_type' => 0,
    'lineitem_type' => 0,
    'purpose' => 0,
    'event_status' => 0,
    'res_status' => 0,
    'res_exception' => 0,
    'enq_status' => 0,
    'exchange_rate' => 0,
    'continent' => 0,
    'country' => 0,
    'region' => 0,
    'city' => 0,
    'district' => 0,
//    'location' => 0,
    'landmark' => 0,
    'language' => 0,
    'site' => NF_COMPACT_LIST,
    'legal_entity' => NF_COMPACT_LIST,
    'site_layout' => 0,
    'site_layout_div' => 0,
    'countries' => 0,
    'security' => 0,
    'property_type' => 0,
    'weblog' => NF_NO_ACTIONS,
    'reslog' => NF_NO_ADD|NF_NO_EDIT|NF_NO_DELETE|NF_COMPACT_LIST,
//    'media' => NF_NO_ADD|NF_NO_EDIT|NF_NO_DELETE|NF_COMPACT_LIST|NF_NO_ACTIONS,
    'media' => NF_COMPACT_LIST,
    'changelog' => NF_NO_ADD|NF_NO_EDIT|NF_NO_DELETE|NF_COMPACT_LIST|NF_NO_ACTIONS,
    'link' => 0,
    'mail_queue' => NF_NO_ADD,
    'sms_queue' => NF_NO_ADD,
    'relocation_advice' => NF_NO_ADD|NF_NO_EDIT|NF_NO_DELETE,
    'enquiry' => NF_NO_ADD|NF_NO_DELETE,
//    'realestate_enquiry' => NF_NO_ADD|NF_NO_EDIT|NF_NO_DELETE,
//    'office_enquiry' => NF_NO_ADD|NF_NO_EDIT|NF_NO_DELETE,
//    'boat_enquiry' => NF_NO_ADD|NF_NO_EDIT|NF_NO_DELETE,
//    'longstay_enquiry' => NF_NO_ADD|NF_NO_EDIT|NF_NO_DELETE,
    'relocation_service' => 0,
    'city_guide' => 0,
    'chat' => NF_NO_ADD|NF_NO_EDIT|NF_NO_DELETE|NF_COMPACT_LIST|NF_NO_ACTIONS,
//    'hotel_request' => 0,
    'property_alert' => NF_NO_ADD,
    'list_property' => NF_NO_ADD,
    'tell_a_friend' => NF_NO_ADD,

    'page' => 0,
    'page_content' => 0,
    'description_type' => 0,
    'hotel_type' => 0,
    'room_type' => 0,
    'facility_type' => 0,
    'hotel_chain' => 0,
    'property_description' => 0,
    'room_description' => 0,
    'hotel_facility' => 0,
    'room_facility' => 0,
    'exchange_rate' => 0,
    'property_list' => NF_NO_ACTIONS,

  );
  $flags = $object_flags[$type];
  if($flags) return $flags;
  return 0; // default flags=0

}

// get attributes of a class. if $get_relations is set, then the fields of relations (type one2one or one2many) are also fetched.
function get_object_attributes($type, $get_relations) {
    global $db;
    global $rateTypeArray;
    global $propertyTypeArray;
    global $currencyArray;
    global $boatTypeArray;
    global $langArray;
    global $salutationArray;
    global $u_sites;
    global $u_cities;
    global $u_types;

		$nodeTypeArray = array();
		$nodeTypes = get_node_types();
		foreach($nodeTypes as $nodeType) $nodeTypeArray[$nodeType] = ucfirst($nodetype);
		$actionArray  = array('list'=>'List','view'=>'View','add'=>'Add','edit'=>'Edit','del'=>'Delete');


    $type=strtolower($type);
    global $db;
    //echo("get_object_attributes: type=$type<br>");
    switch($type) {

     case "relocation_advice":
      //   DB FIELD                    FLD  NAME                  TYPE     ED REQ LEN/FUNC
      $fields = array(
         'id'=>                        array('ID',                'id',   1, AF_PRIMARY|AF_AUTOINCREMENT),
         'city_id'=>                   array('City',              'many2one',   0, AF_OBLIGATORY|AF_SEARCHABLE, 'city'),
         'section'=>                   array('Topic',             'str',    '', AF_OBLIGATORY|AF_SEARCHABLE, ''),
         'question'=>                  array('Question or comment','text',   '', AF_HIDE_LIST),
         'address_id'=>                array('Address',           'one2one',   0, AF_ONE2ONE_INTEGRATE|AF_CASCADE_DELETE, 'address'),
         'language'=>                  array('Language',          'many2one',  ATT_DEFAULT_LANG, AF_HIDE_LIST, 'language'),
         'obj_type'=>                  array('Obj Type',          'str',   '', AF_HIDE_LIST, 20),
         'obj_id'=>                    array('Obj ID',            'many2one', 0, 0, 'property'),
      );
      break;

    case "cc":
      //   DB FIELD                    FLD  NAME                  TYPE     ED REQ LEN/FUNC
      $fields = array(
         'id'=>                        array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT),
         'guest_id'=>                  array('GuestId',           'link', ATT_DEFAULT_GUEST_ID, AF_HIDE_ADD|AF_READONLY|AF_SEARCHABLE, 'guest'),
         'cc_type'=>                   array('Credit Card Type',  'many2one', 0, 1, 'cc_type'),
         'cc_number'=>                 array('Credit Card Number', 'cc',     0, AF_OBLIGATORY|AF_READONLY_EDIT, 20),
         'cc_cardholder'=>             array('Cardholder full name','str',    '', 1, 50),
//         'cc_exp_month'=>              array('Exp. Month',         'intSelect', 0, AF_OBLIGATORY, array(1,12,1)),
//         'cc_exp_year'=>               array('Exp. Year',          'intSelect', 0, AF_OBLIGATORY, array(2009,2020,1)),

         'cc_exp_month'=>              array('Exp. Month',        'str',    '', 1, 2),
         'cc_exp_year'=>               array('Exp. Year',         'str',    '', 1, 4),
         'cc_cvv2'=>                   array('Security Code',          'str',    '', 1, 4),
         'address_id'=>                array('Address',           'one2one',   0, AF_ONE2ONE_INTEGRATE|AF_CASCADE_DELETE, 'address'),
         'last_charge' =>              array('Last charged',      'datetime',  ATT_DEFAULT_NULL, AF_HIDE_LIST|AF_READONLY),

         'charge'=>                    array('Charge log',           'one2many', 0, AF_HIDE_LIST|AF_READONLY, 'charge', 'cc_id'),
         'payments'=>                  array('Payments',          'one2many', 0, AF_HIDE_LIST|AF_CASCADE_DELETE, 'payment', 'cc_id'),
//         'transactions'=>              array('Transactions',          'one2many', 0, AF_HIDE_LIST|AF_CASCADE_DELETE, 'transaction', 'cc_id'),
         'remember'=>                  array('Store card?',        'bool', 0, AF_READONLY),

      );
//         '_subheading2'=>             'Credit Card Details',

     break;

     case "chat":
      //   DB FIELD                    FLD  NAME                  TYPE     ED REQ LEN/FUNC
      $fields = array(
         'id'=>                        array('ID',                'id',   0, AF_HIDE_LIST|AF_PRIMARY|AF_AUTOINCREMENT),
         'parent_id'=>                 array('Parent Id',         'parent_id',   0, AF_OBLIGATORY|AF_READONLY|AF_HIDE_ADD, 11),
         'parent_type'=>               array('Parent Type',       'parent_type', 0, AF_OBLIGATORY|AF_READONLY|AF_HIDE_ADD, $reqTypeArray),
         'timestamp'=>                 array('Timestamp',         'datetime', ATT_DEFAULT_NOW, AF_HIDE_ADD|AF_READONLY, 20),
         'read_on'=>                   array('Read',              'datetime', ATT_DEFAULT_NOW, AF_HIDE_LIST|AF_HIDE_ADD|AF_READONLY, 20),
         'sender_id'=>                 array('Sender',            'link', ATT_DEFAULT_USER_ID, AF_SEARCHABLE|AF_READONLY, 'user'),
         'sender_level'=>              array('Sender Level',   'many2one', 0, AF_SEARCHABLE|AF_READONLY, 'user_level'),
         'receiver_id'=>               array('Recipient',         'link', 0, AF_SEARCHABLE|AF_READONLY, 'user'),
         'receiver_level'=>            array('Recipient Level',   'many2one', 0, AF_SEARCHABLE|AF_READONLY, 'user_level'),
         'message'=>                   array('Message',           'text', '', AF_HIDE_EDIT|AF_HIDE_ADD),
         'language'=>                  array('Language',          'many2one',  ATT_DEFAULT_LANG, AF_HIDE_LIST, 'language'),
      );
     break;

     case "hotel_request":
      //   DB FIELD                    FLD  NAME                  TYPE     ED REQ LEN/FUNC
      $fields = array(
         'id'=>                        array('ID',                'id',   0, AF_SEARCHABLE|AF_PRIMARY|AF_AUTOINCREMENT),
         'created'=>                   array('Created',           'date',  ATT_DEFAULT_NOW_SHORT, AF_HIDE_ADD|AF_READONLY),
         'city_id'=>                   array('City',              'many2one',   0, AF_OBLIGATORY|AF_SEARCHABLE, 'city', 'msCity.active=1', 'msCity.name'),
         'guest_id'=>                  array('Guest',             'many2one',   0, AF_HIDE_EDIT|AF_HIDE_ADD, 'guest'),
//         'status'=>                    array('Status',            'many2one',   0, AF_OBLIGATORY|AF_SEARCHABLE , 'res_status', 3),
//         'type'=>                      array('Type',              'many2one',   5, AF_SEARCHABLE|AF_HIDE_EDIT|AF_HIDE_ADD, 'res_type', 3),
         'checkin'=>                   array('Checkin',           'date',   '', AF_OBLIGATORY, 50),
         'checkout'=>                  array('Checkout',          'date',   '', AF_OBLIGATORY|AF_HIDE_LIST, 50),
         'num_days'=>                  array('# Days',            'int',    0, AF_READONLY, 10),
         'first_name'=>                array('First Name',        'str',    '', AF_SEARCHABLE, 50),
         'last_name'=>                 array('Last Name',         'str',    '', AF_SEARCHABLE, 50),
         'email'=>                     array('Email',             'email',  '', AF_SEARCHABLE|AF_HIDE_LIST, 50),
      );
     break;

     case "security":
      //   DB FIELD                    FLD  NAME                  TYPE     ED REQ LEN/FUNC
      $fields = array(
         'id'=>                    array('ID',                'id',   0, AF_HIDE|AF_PRIMARY|AF_AUTOINCREMENT),
         'node'=>                  array('Node',          		'valSelect', 0, AF_SEARCHABLE|AF_OBLIGATORY, $nodeTypeArray),
         'action'=>                array('Action',          	'valSelect', 0, AF_SEARCHABLE|AF_OBLIGATORY, $actionArray),
         'user_level'=>            array('User Level',             'many2one',  0, AF_SEARCHABLE|AF_OBLIGATORY, 'user_level'),
      );
      break;

     // base class
     case "event":
      //   DB FIELD                    FLD  NAME                  TYPE     ED REQ LEN/FUNC
      $fields = array(
        'id' =>                        array('ID',                'id',   0, AF_SEARCHABLE|AF_PRIMARY|AF_AUTOINCREMENT),
        'res_id' =>                    array('Reservation',       'link',     0, AF_HIDE_EDIT|AF_HIDE_ADD, 'reservation'),
        'apt_id' =>                    array('Property',          'link',     0, AF_HIDE_EDIT|AF_HIDE_ADD, 'property'),
        'type' =>                      array('Event type',        'many2one', 0, AF_OBLIGATORY|AF_SEARCHABLE, 'event_type'),
        'contractor_id' =>             array('Contractor',        'link',     0, 0, 'contractor'),
        'author_id' =>                 array('Author',            'link',     ATT_DEFAULT_USER_ID, AF_HIDE_EDIT|AF_HIDE_ADD, 'user'),
        'city_id' =>                   array('City',              'link',     0, AF_READONLY|AF_SEARCHABLE, 'city', 'msCity.active=1', 'msCity.name'),
        'language'=>                   array('Language',          'many2one', ATT_DEFAULT_LANGUAGE, 0, 'language'),
        'status' =>                    array('Status',            'many2one', EVENT_STATUS_UNCONFIRMED, AF_OBLIGATORY|AF_LOG|AF_SEARCHABLE , 'event_status'),
        'status_change_timestamp'=>    array('Status Changed on', 'datetime',  ATT_DEFAULT_NOW, AF_HIDE_LIST|AF_HIDE_ADD|AF_READONLY),
        'created' =>                   array('Created',           'datetime', ATT_DEFAULT_NOW, AF_HIDE_ADD|AF_READONLY),
        'timestamp' =>                 array('Timestamp',         'datetime', ATT_DEFAULT_NOW, AF_HIDE_LIST|AF_HIDE_ADD|AF_READONLY),TIMESTAMP,
        'start_time' =>                array('Start Time',        'datetime', '', AF_OBLIGATORY|AF_SEARCHABLE|AF_LOG, 'end_time'), // options = dependent field
        'end_time' =>                  array('End Time',          'datetime', '', AF_OBLIGATORY|AF_SEARCHABLE|AF_LOG),
        'num_hours'=>                  array('# Hours',           'float',    0, AF_READONLY, '2.2'),
        'alert'=>                      array('NB!',               'str',     '', AF_HIDE_LIST, 100),
        'notes'=>                      array('Our Notes',         'text',    '', AF_HIDE_LIST),
        'start_address' =>             array('Start Address',     'text',      '', AF_SEARCHABLE|AF_LOG, 200),
        'end_address' =>               array('End Address',       'text',      '', AF_SEARCHABLE|AF_LOG, 200),

        'contractor_name' =>          array('Contractor Name',  'str',     '', 0, 50),
        'contractor_notes' =>         array('Contractor Notes',  'str',     '', 0, 200),

        'customer_name' =>           array('Customer Name',   'str',     '', 0, 100),
        'customer_count' =>          array('Customer Count',  'int',     0, 0, 2),
        'customer_notes' =>          array('Customer Notes',  'text',    '', 0, 200),

        'repeat_id' =>               array('Repeat ID',       'str',     '', AF_HIDE_LIST|AF_HIDE_EDIT|AF_HIDE_ADD, 13),
        'repeat_interval' =>         array('Repeat Interval', 'str',     '', AF_HIDE_LIST, 4), // todo; add class, use many2one
        'repeat_until' =>            array('Repeat Until',    'datetime', '', AF_HIDE_LIST),

        'reminder_period1' =>         array('Reminder 1',       'str',      '', AF_HIDE_LIST, 6), // todo; add class, use many2one
        'reminder_time1' =>           array('Remdinder Time 1', 'datetime', ATT_DEFAULT_NULL, AF_HIDE_LIST|AF_READONLY),
        'reminder_sent1' =>           array('Remdinder Sent 1', 'bool',     0, AF_HIDE_LIST|AF_READONLY),
        'reminder_period2' =>         array('Reminder 2',       'str',      '', AF_HIDE_LIST, 6), // todo; add class, use many2one
        'reminder_time2' =>           array('Remdinder Time 2', 'datetime', ATT_DEFAULT_NULL, AF_HIDE_LIST|AF_READONLY),
        'reminder_sent2' =>           array('Remdinder Sent 2', 'bool',     0, AF_HIDE_LIST|AF_READONLY),
        'reminder_phone' =>          array('Reminder Phone',    'phone',    '', AF_HIDE_LIST, 20),
        'reminder_email' =>          array('Reminder email',    'email',    '', AF_HIDE_LIST, 20),        
      );
      break;

     case "checkin":
      //   DB FIELD                    FLD  NAME                  TYPE     ED REQ LEN/FUNC
      $fields = get_object_attributes('event', $get_relations);
      $fields['type'][ATT_DEFAULT]         = EVENT_TYPE_CHECKIN;  // event type
      $fields['type'][ATT_FLAGS]          |= AF_HIDE_ADD;  
      $fields['type'][ATT_FLAGS]          |= AF_READONLY_EDIT;  
      $fields['apt_id'][ATT_FLAGS]        |= AF_OBLIGATORY; // set obligatory
      $fields['contractor_notes'][ATT_NAME] = 'Checkin notes'; // rename the field
      $fields['start_address'][ATT_NAME]   = 'Apartment Address';
      $fields['end_address'][ATT_FLAGS]   |= AF_HIDE; // hide
      return $fields;

     case "checkout":
      //   DB FIELD                    FLD  NAME                  TYPE     ED REQ LEN/FUNC
      $fields = get_object_attributes('event', $get_relations);
      $fields['type'][ATT_DEFAULT]         = EVENT_TYPE_CHECKIN;  // event type
      $fields['type'][ATT_FLAGS]          |= AF_HIDE_ADD;  
      $fields['type'][ATT_FLAGS]          |= AF_READONLY_EDIT;  
      $fields['apt_id'][ATT_FLAGS]        |= AF_OBLIGATORY; // set obligatory
      $fields['contractor_notes'][ATT_NAME] = 'Checkout notes'; // rename the field
      $fields['start_address'][ATT_NAME]   = 'Apartment Address';
      $fields['end_address'][ATT_FLAGS]   |= AF_HIDE; // hide
      return $fields;

     case "maintenance":
      //   DB FIELD                    FLD  NAME                  TYPE     ED REQ LEN/FUNC
      $fields = get_object_attributes('event', $get_relations);
      $fields['type'][ATT_DEFAULT]         = EVENT_TYPE_MAINTENANCE;  // event type
      $fields['type'][ATT_FLAGS]          |= AF_HIDE_ADD;  
      $fields['type'][ATT_FLAGS]          |= AF_READONLY_EDIT;  
      $fields['apt_id'][ATT_FLAGS]        |= AF_OBLIGATORY; // set obligatory
      $fields['contractor_notes'][ATT_NAME] = 'Handyman notes'; // rename the field
      $fields['start_address'][ATT_NAME]   = 'Apartment Address';
      $fields['end_address'][ATT_FLAGS]   |= AF_HIDE; // hide
      return $fields;

     case "cleaning":     
      //   DB FIELD                    FLD  NAME                  TYPE     ED REQ LEN/FUNC
      $fields = get_object_attributes('event', $get_relations);
      $fields['type'][ATT_DEFAULT]         = EVENT_TYPE_CLEANING;  // event type
      $fields['type'][ATT_FLAGS]          |= AF_HIDE_ADD;  
      $fields['type'][ATT_FLAGS]          |= AF_READONLY_EDIT;  
      $fields['apt_id'][ATT_FLAGS]        |= AF_OBLIGATORY; // set obligatory
      //$fields['res_id'][ATT_FLAGS]        |= AF_OBLIGATORY; // set obligatory
      $fields['contractor_notes'][ATT_NAME] = 'Cleaner notes'; // rename the field
      $fields['start_address'][ATT_NAME]   = 'Apartment Address';
      $fields['end_address'][ATT_FLAGS]   |= AF_HIDE; // hide
      return $fields;

     case "transport":
      //   DB FIELD                    FLD  NAME                  TYPE     ED REQ LEN/FUNC
      $fields = get_object_attributes('event', $get_relations);
      $fields['type'][ATT_DEFAULT]         = EVENT_TYPE_TRANSPORT;  // event type
      $fields['type'][ATT_FLAGS]          |= AF_HIDE_ADD;  
      $fields['type'][ATT_FLAGS]          |= AF_READONLY_EDIT;  
      $fields['start_address'][ATT_NAME]   = 'Pickup Address';
      $fields['end_address'][ATT_NAME]     = 'Dropoff Address';
      $fields['contractor_notes'][ATT_NAME] = 'Driver notes'; // rename the field
      return $fields;

     case "reservation":
      //   DB FIELD                    FLD  NAME                  TYPE     ED REQ LEN/FUNC
      $fields = array(
         'res_id'=>                    array('ID',                'id',   0, AF_SEARCHABLE|AF_PRIMARY|AF_AUTOINCREMENT),
         'property_type'=>             array('Property Type',     'valSelect', 0, AF_OBLIGATORY|AF_READONLY, $propertyTypeArray),
         'corporate'=>                 array('Corporate?',        'bool', 0, AF_READONLY),
         'created'=>                   array('Created',           'datetime',  ATT_DEFAULT_NOW, AF_HIDE_ADD|AF_READONLY),
         'status_change_timestamp'=>   array('Status Changed on', 'datetime',  ATT_DEFAULT_NOW, AF_HIDE_LIST|AF_HIDE_ADD|AF_READONLY),
         'hidden'=>                    array('Hidden',            'bool',   0, AF_HIDE),

         'checkin'=>                   array('Checkin',           'datetime',   '', AF_OBLIGATORY|AF_LOG, 19),
         'checkout'=>                  array('Checkout',          'datetime',   '', AF_OBLIGATORY|AF_LOG, 19),
  
          // shift hours
         'start_hour' =>                array('Start Time',        'str', '', AF_SEARCHABLE|AF_HIDE_LIST|AF_LOG, 5),
         'end_hour' =>                  array('End Time',          'str', '', AF_SEARCHABLE|AF_HIDE_LIST|AF_LOG, 5),

         'num_months'=>                array('# Months',          'float',    0, AF_READONLY|AF_HIDE_LIST, '3.2'),
         'num_days'=>                  array('# Days',            'int',    0, AF_READONLY, 4),
         'num_hours'=>                 array('# Hours',           'float',    0, AF_HIDE_LIST|AF_READONLY, '2.2'),
         'num_guests'=>                array('# Guests',          'intSelect', 0, AF_OBLIGATORY|AF_LOG, array(1,8,1, '')),

         'user_id'=>                   array('Author',            'many2one',   ATT_DEFAULT_USER_ID, AF_HIDE_LIST|AF_SEARCHABLE|AF_READONLY, 'user'),
         'author_id'=>                 array('Author',            'many2one',   ATT_DEFAULT_USER_ID, AF_HIDE_LIST|AF_HIDE_EDIT|AF_HIDE_ADD, 'user'),
         'city_id'=>                   array('City',              'many2one',   0, AF_READONLY|AF_SEARCHABLE, 'city', 'msCity.active=1', 'msCity.name'),
         'apt_id'=>                    array('Apartment',         'many2one',   0, AF_SEARCHABLE|AF_LOG, 'property', array("property.type IN ('shortstay')", "property.type='__this[property_type]'", "property.city_id=__this[city_id]"), 'property.name'),
         'guest_name'=>                array('Guest',         		'dummy',   		'', AF_NO_SORT|AF_READONLY, 'first_name last_name'),
         'apartment_name'=>            array('Apartment Name',    'str',        '', AF_HIDE, 50),
         'guest_id'=>                  array('Guest ID',          'many2one',   ATT_DEFAULT_GUEST_ID, AF_HIDE_ADD|AF_READONLY|AF_HIDE_LIST|AF_HIDE_EDIT|AF_HIDE_ADD, 'guest'),
         'org_id'=>                    array('Org',               'many2one',   ATT_DEFAULT_ORG_ID, AF_SEARCHABLE, 'org', '', 'org.org_name'),
         'owner_id'=>                  array('Owner',             'many2one',   ATT_DEFAULT_OWNER_ID, AF_SEARCHABLE|AF_HIDE_EDIT|AF_HIDE_ADD, 'owner', 'owner.shortstay=1', 'address.first_name'),
         'agent_id'=>                  array('Agent',             'many2one',   ATT_DEFAULT_AGENT_ID, AF_HIDE_LIST|AF_HIDE_EDIT|AF_HIDE_ADD, 'agent'),
         'aff_id'=>                    array('Aff',               'many2one',   ATT_DEFAULT_AFF_ID, AF_SEARCHABLE|AF_HIDE_EDIT|AF_HIDE_ADD, 'affiliate'),
         'staff_id'=>                  array('Staff',             'many2one',   ATT_DEFAULT_STAFF_ID, AF_HIDE_LIST|AF_HIDE_EDIT|AF_HIDE_ADD, 'staff'),
         'admin_id'=>                  array('Admin',             'many2one',   ATT_DEFAULT_ADMIN_ID, AF_HIDE_LIST|AF_HIDE_EDIT|AF_HIDE_ADD, 'admin'),
         'site_id'=>                   array('Site',              'many2one',   ATT_DEFAULT_SITE_ID, AF_HIDE_LIST|AF_HIDE_EDIT|AF_HIDE_ADD|AF_LOG, 'site'),
         'cc_id'=>                     array('CC',                'link',       0, AF_HIDE, 'cc'), // last used cc
         'remote_ip'=>                 array('IP',                'ip',        ATT_DEFAULT_CLIENT_IP, AF_SEARCHABLE, 15 ),

//         'cc_id'=>                     array('CC',                'link',       0, AF_HIDE_LIST|AF_HIDE_EDIT|AF_HIDE_ADD|AF_LOG, 'cc'),
//         'address_id'=>                array('Address',           'one2one',    0, AF_OBLIGATORY|AF_CASCADE_DELETE, 'address'),
         'address_id'=>                array('Address',           'one2one',    0, AF_HIDE_LIST|AF_CASCADE_DELETE|AF_ONE2ONE_INTEGRATE, 'address'),
         'status'=>                    array('Status',            'many2one',   STATUS_UNCONFIRMED, AF_OBLIGATORY|AF_LOG|AF_SEARCHABLE , 'res_status'),
//         'status'=>                    array('Status',            'many2one',   1, AF_LOG|AF_SEARCHABLE , 'res_status', 3),
         'type'=>                      array('Type',              'many2one',   5, AF_HIDE_LIST|AF_SEARCHABLE|AF_HIDE_EDIT|AF_HIDE_ADD|AF_LOG, 'res_type', 3),
//         'language'=>                  array('Language',    			'valSelect', 'en', AF_READONLY|AF_HIDE_LIST, $langArray),
         'language'=>                   array('Language',          'many2one', ATT_DEFAULT_LANGUAGE, 0, 'language'),

         'arrival_method'=>            array('Arrive by',         'str',    '', AF_HIDE_LIST|AF_LOG, 10),
         'arrival_number'=>            array('Flight',            'str',    '', AF_HIDE_LIST|AF_LOG, 50),
         'arrival_time'=>              array('Arrival airport',   'str',    ATT_DEFAULT_NULL, AF_HIDE_LIST|AF_LOG, 5),
         'arrival_property'=>          array('Arrival property',  'str',    ATT_DEFAULT_NULL, AF_HIDE_LIST|AF_LOG, 5),
         'arrival_notes'=>             array('Arrival notes',     'str',    '', AF_HIDE_LIST|AF_LOG, 100),
         'airport_pickup'=>            array('Pickup',            'bool',   0, AF_LOG, 30),

         'extra_info'=>                array('Guest notes',        'text',   '', AF_HIDE_LIST|AF_READONLY_EDIT|AF_HIDE_ADD),
         'message'=>                   array('Message to guest',  'text',   '', AF_HIDE_LIST),
         'alert'=>                     array('NB!',               'str',    '', AF_HIDE_LIST, 100),
         'notes'=>                     array('Our Notes',         'text',    '', AF_HIDE_LIST),
//         'weblog_id'=>                 array('Web log',           'link',   0, AF_READONLY|AF_HIDE_LIST|AF_HIDE_EDIT|AF_HIDE_ADD, 'weblog'),
         'ref'=>                       array('Ref',               'str',    '', AF_HIDE_LIST|AF_HIDE_EDIT|AF_HIDE_ADD, 20),
         'ref_other'=>                 array('Ref (other)',       'str',    '', AF_HIDE_LIST|AF_HIDE_EDIT|AF_HIDE_ADD, 20),
         'ref_searchterm'=>            array('Searchterm',        'str',    '', AF_HIDE_LIST|AF_HIDE_EDIT|AF_HIDE_ADD, 50),
         'changelog'=>                 array('Log',               'one2many', 0, AF_HIDE_LIST|AF_CASCADE_DELETE|AF_READONLY, 'changelog', 'parent_id', "obj_type='reservation'"), // last is filter
         'chat'=>                      array('Correspondence',    'one2many', 0, AF_HIDE_LIST|AF_CASCADE_DELETE|AF_READONLY, 'chat', 'res_id'),
         'maillog'=>                   array('All sent mails',    'one2many', 0, AF_HIDE_LIST|AF_CASCADE_DELETE|AF_READONLY, 'mail_queue', 'parent_id', "parent_type='reservation'"), // last is filter
         'currency'=>                  array('Currency',          'valSelect', 0, AF_HIDE_LIST|AF_LOG, $currencyArray),
         'rate_type'=>                 array('Rate Type',         'valSelect', 'day', AF_HIDE_LIST|AF_OBLIGATORY|AF_LOG, $rateTypeArray),
//         'rate_type'=>                 array('Rate Type',         'valSelect', 'day', AF_HIDE_LIST|AF_LOG, $rateTypeArray),
         'rate_base'=>                 array('Base Rate',         'money',   0, AF_HIDE_LIST|AF_LOG),
         'rate_locked'=>               array('Lock Rate?',        'bool',  0, AF_HIDE_LIST),
         'fee_locked'=>                array('Lock Fee?',         'bool',  0, AF_HIDE_LIST),
         'send_email'=>                array('Send email updates?', 'bool',  1, AF_HIDE_LIST),

         'discount'=>                  array('Base Discount',     'discount',  0, AF_HIDE_LIST|AF_LOG),
         'discount_locked'=>          array('Lock Discount?',    'bool',  0, AF_HIDE_LIST),

         'total'=>                     array('Total',             'money',   0, AF_HIDE_LIST|AF_READONLY),

         'fee_cleaning' =>              array('Cleaning fee',      'money',   0, AF_HIDE_LIST|AF_LOG),
         'fee_local'    =>              array('Local fee',         'money',   0, AF_HIDE_LIST|AF_LOG),
         'fee_booking'  =>              array('Booking fee',       'money',   0, AF_HIDE_LIST|AF_LOG),
         'fee_other'    =>              array('Other fee',         'money',   0, AF_HIDE_LIST|AF_LOG),
         'fee_pickup'   =>              array('Pickup fee',        'money',   0, AF_HIDE_LIST|AF_LOG),
         'fees'=>                      array('Total Fees',        'money',   0, AF_READONLY|AF_HIDE_LIST|AF_LOG),
         'grand_total'=>               array('Grand Total',       'money',   0, AF_HIDE_LIST|AF_READONLY|AF_LOG),
         'deposit'=>                   array('Deposit',           'money',   0, AF_HIDE_LIST|AF_READONLY|AF_LOG),
         'deposit_percentage'=>        array('Deposit %',         'int',   0, AF_HIDE_LIST|AF_LOG, 2),
         'paid'=>                      array('Paid',              'money',   0, AF_HIDE_LIST|AF_LOG),
         'balance'=>                   array('Balance',           'money',   0, AF_HIDE_LIST|AF_READONLY),
         'commission'=>                array('Commisssion',       'money',   0, AF_HIDE_LIST|AF_LOG),
         //'cc_id'=>                     array('CC',              'one2one', 0, AF_CASCADE_DELETE, 'cc'),
//         'draft_invoice'=>             array('Draft Invoices',    'one2many', 0, AF_HIDE_LIST|AF_READONLY|AF_CASCADE_DELETE, 'draft_invoice', 'res_id'),
         'invoice'=>                   array('Invoices',     'one2many', 0, AF_HIDE_LIST|AF_READONLY, 'invoice', 'res_id'),
         'charge'=>                    array('Charges',           'one2many', 0, AF_HIDE_LIST|AF_READONLY, 'charge', 'res_id'),
         'payments'=>                  array('Payments',          'one2many', 0, AF_HIDE_LIST|AF_CASCADE_DELETE, 'payment', 'res_id'),
         'transactions'=>              array('Transactions',          'one2many', 0, AF_HIDE_LIST|AF_CASCADE_DELETE, 'transaction', 'res_id'),

         'booking_id'=>                array('Booking ID',        'str',    '', AF_HIDE_LIST|AF_HIDE_EDIT|AF_HIDE_ADD|AF_READONLY, 20),
         'booking_pin'=>               array('Booking PIN',       'str',    '', AF_HIDE_LIST|AF_HIDE_EDIT|AF_HIDE_ADD|AF_READONLY, 10),

      );
      break;


    // reservation exceptions
    case "res_exception":
      //   DB FIELD                    FLD  NAME                  TYPE     ED REQ LEN/FUNC
      $fields = array(
         'id'=>                        array('ID',                'id',         0, AF_PRIMARY|AF_AUTOINCREMENT),
         'active'                   => array('Active',            'bool',       1, AF_SEARCHABLE, 1),
         'created'=>                   array('Created',           'datetime',   ATT_DEFAULT_NOW, AF_HIDE_LIST|AF_HIDE_ADD),
         'timestamp'=>                 array('Updated',           'datetime',   ATT_DEFAULT_NOW, AF_HIDE_LIST|AF_HIDE_ADD, 6 ),
         'author_id'=>                 array('Author',            'many2one',   ATT_DEFAULT_USER_ID, AF_HIDE_LIST|AF_HIDE_EDIT|AF_HIDE_ADD, 'user'),
                                                                                
// which city/type/owner/apt (todo - make linked ajax choosers)                                

         'city_id' =>                   array('City',             'many2one',   0, AF_SEARCHABLE|AF_OBLIGATORY, 'city', 'msCity.active=1', 'msCity.name'),
         'property_type'=>             array('Property Type',     'valSelect',  0, AF_OBLIGATORY, $propertyTypeArray),
         'owner_id'=>                  array('Owner',             'many2one',   ATT_DEFAULT_NULL, AF_SEARCHABLE, 'owner', 'owner.shortstay=1'),
         'apt_id' =>                   array('Property',          'many2one',   ATT_DEFAULT_NULL, AF_SEARCHABLE, 'property'),

// reservation parameters (input vars)
         'start'=>                     array('From',              'date',       ATT_DEFAULT_NULL, 0),
         'end'=>                       array('To',                'date',       ATT_DEFAULT_NULL, 0),
//       'num_months'=>                array('# Months',          'float',      ATT_DEFAULT_NULL, 0, '3.2'),
         'num_days'=>                  array('# Days >=',         'int',        ATT_DEFAULT_NULL, 0),
//       'num_hours'=>                 array('# Hours >=',        'float',      ATT_DEFAULT_NULL, 0, '2.2'),
//       'num_guests'=>                array('# Guests ',         'intSelect',  ATT_DEFAULT_NULL, 0, array(1,8,1, '')),

// calculated reservation parameters (input vars)
//       'fit_factor'=>                 array('Fit factor % >=',    'intSelect', 0, 0, array(0,100,1, '%')),
         'fit_factor'=>                 array('Fit factor (>= 0-100%)', 'int', ATT_DEFAULT_NULL, 0),
         'days_from_now'=>              array('# Days from now <=',     'int', ATT_DEFAULT_NULL, 0),

// property exceptions (out vars) 
         'book_direct' =>              array('Book Direct?',       'yesno',      ATT_DEFAULT_NULL, AF_SEARCHABLE),
         'max_guests'=>                array('Max guests',        'int',        ATT_DEFAULT_NULL, AF_SEARCHABLE),
         'min_stay'=>                  array('Min stay',          'int',        ATT_DEFAULT_NULL, AF_SEARCHABLE),
         'max_stay'=>                  array('Max stay',          'int',        ATT_DEFAULT_NULL, AF_SEARCHABLE),                                                                                
         'rate_day'=>                  array('Day rate',          'money',      ATT_DEFAULT_NULL, AF_SEARCHABLE),
//         'rate_hour'=>                 array('Hour rate',         'money',      ATT_DEFAULT_NULL, AF_SEARCHABLE),
         'rate_extraperson'=>          array('Rate Extra person', 'money',      ATT_DEFAULT_NULL, AF_SEARCHABLE),
         'discount'=>                  array('Discount',          'discount',   ATT_DEFAULT_NULL, AF_SEARCHABLE),
         'surcharge'=>                 array('Surcharge',         'surcharge',  ATT_DEFAULT_NULL, AF_SEARCHABLE),
      );
      break;


    // contract ( = reservation exceptions with org_id set)
// <ul>
// <li>A company can have only one contract per apartment</li>
// <li>A contract can either be <b>fixed price</b> (in the default currency of the organization) or <b>discount</b> (in percent), <b>but not both</b></li>
// <li>If a company has a contract for <b>all</b> apartments, all other contracts for this company are ignored</li>
// <li>If <b>extra person</b> is blank, the normal price for extra persons for this apartment applies. Set to 0.00 to override (no extra cost for extra guests)</li>
// <li>If <b>flat discount</b> is set, this discount applies to all prices for that apartment, <b>after</b> the standard discounts (if any) have been applied</li>
// <li>If <b>weekly discount</b> is set, this discount applies to stays for one week or longer for that apartment, <b>instead of</b> the standard discounts (if any) have been applied</li>
// </ul>

    case "contract":
      //   DB FIELD                    FLD  NAME                  TYPE     ED REQ LEN/FUNC
      $fields = array(
         'id'=>                        array('ID',                'id',         0, AF_PRIMARY|AF_AUTOINCREMENT),
         'active'                   => array('Active',            'bool',       1, AF_SEARCHABLE, 1),
         'created'=>                   array('Created',           'datetime',   ATT_DEFAULT_NOW, AF_HIDE_LIST|AF_HIDE_ADD),
         'timestamp'=>                 array('Updated',           'datetime',   ATT_DEFAULT_NOW, AF_HIDE_LIST|AF_HIDE_ADD, 6 ),
         'author_id'=>                 array('Author',            'many2one',   ATT_DEFAULT_USER_ID, AF_HIDE_LIST|AF_HIDE_EDIT|AF_HIDE_ADD, 'user'),

         'org_id'=>                    array('Organization',      'many2one',  0, AF_OBLIGATORY, 'org'),
                                                                                
// which city/type/owner/apt (todo - make linked ajax choosers)                                

         'city_id' =>                   array('City',             'many2one',   0, AF_SEARCHABLE|AF_OBLIGATORY, 'city', 'msCity.active=1', 'msCity.name'),
         'property_type'=>             array('Property Type',     'valSelect',  0, AF_OBLIGATORY, $propertyTypeArray),
         'owner_id'=>                  array('Owner',             'many2one',   ATT_DEFAULT_NULL, AF_SEARCHABLE, 'owner', 'owner.shortstay=1'),
         'apt_id' =>                   array('Property',          'many2one',   ATT_DEFAULT_NULL, AF_SEARCHABLE, 'property'),

// reservation parameters (input vars)
         'num_days'=>                  array('# Days >=',         'int',        ATT_DEFAULT_NULL, 0),


// property exceptions (out vars) 
         'book_direct' =>              array('Book Direct?',      'yesno',      ATT_DEFAULT_NULL, AF_SEARCHABLE),
         'min_stay'=>                  array('Min stay',          'int',        ATT_DEFAULT_NULL, AF_SEARCHABLE),
         'rate_day'=>                  array('Day rate',          'money',      ATT_DEFAULT_NULL, AF_SEARCHABLE),
         'rate_extraperson'=>          array('Rate Extra person', 'money',      ATT_DEFAULT_NULL, AF_SEARCHABLE),
         'discount'=>                  array('Discount',          'discount',   ATT_DEFAULT_NULL, AF_SEARCHABLE),
      );
      break;

     //case "realestate_enquiry":
     // $fields = get_object_attributes('enquiry', $get_relations);
     // $fields['property_type'] = array('Type',               'valSelect', 'realestate', AF_OBLIGATORY|AF_HIDE_EDIT|AF_HIDE_ADD|AF_HIDE_LIST, $propertyTypeArray);
     // break;
     //
     //case "longstay_enquiry":
     // $fields = get_object_attributes('enquiry', $get_relations);
     // $fields['property_type'] = array('Type',               'valSelect', 'longstay', AF_OBLIGATORY|AF_HIDE_EDIT|AF_HIDE_ADD|AF_HIDE_LIST, $propertyTypeArray);
     // break;
     //
     //case "office_enquiry":
     // $fields = get_object_attributes('enquiry', $get_relations);
     // $fields['property_type'] = array('Type',               'valSelect', 'office', AF_OBLIGATORY|AF_HIDE_EDIT|AF_HIDE_ADD|AF_HIDE_LIST, $propertyTypeArray);
     // //dump($fields);
     // break;
     //
     //case "boat_enquiry":
     // $fields = get_object_attributes('enquiry', $get_relations);
     // $fields['property_type'] = array('Type',               'valSelect', 'boat', AF_OBLIGATORY|AF_HIDE_EDIT|AF_HIDE_ADD|AF_HIDE_LIST, $propertyTypeArray);
     // break;

    // base class for properties
    case "property":
      //   DB FIELD                    FLD  NAME                  TYPE     ED REQ LEN/FUNC
      $fields = array(

         'id'=>                        array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT),
         'type' =>                     array('Type',               'valSelect', '', AF_OBLIGATORY|AF_HIDE_EDIT, $propertyTypeArray),

         'currency'=>             array('Currency',          'valSelect', 0, AF_HIDE_LIST|AF_LOG, $currencyArray),
         'gallery'              => array('Album size'       , 'int', 0, AF_HIDE_LIST|AF_HIDE_ADD|AF_READONLY),
         'media'                => array('Media'            , 'one2many', 0, AF_HIDE_LIST|AF_CASCADE_DELETE, 'media', 'parent_id'),
         'changelog'            => array('Log',               'one2many', 0, AF_HIDE_ADD|AF_HIDE_LIST|AF_CASCADE_DELETE|AF_READONLY, 'changelog', 'parent_id'),
         'descriptions'         => array('Descriptions',    'one2many', 0, AF_HIDE_LIST|AF_CASCADE_DELETE, 'property_description', 'property_id'),

         'guid'                     => array('Guid'              ,'str',ATT_DEFAULT_NOW, AF_HIDE_LIST|AF_HIDE_ADD, 100),
         'priority'                 => array('Priority'          ,'int', 0, AF_HIDE_ADD, 8),
         'active'                   => array('Active'            ,'bool', 0, AF_SEARCHABLE, 1),
         'created'=>                   array('Created',           'datetime',   ATT_DEFAULT_NOW, AF_HIDE_LIST|AF_HIDE_ADD|AF_READONLY),
         'timestamp'=>                 array('Updated',           'datetime',   ATT_DEFAULT_NOW, AF_HIDE_LIST|AF_HIDE_ADD|AF_READONLY, 6 ),
         'scraped'=>                   array('Scraped',           'date',   '', AF_HIDE, 10 ),
         'source_id'                => array('Source'            ,'many2one', 1, AF_OBLIGATORY|AF_HIDE_LIST|AF_HIDE, 'source'),
         'source_url'               => array('Source URL'        ,'str', 1, AF_HIDE, 100),


         'hide'=>                      array('Hide',              'bool', 0, AF_HIDE, ''),
         'hide_local'=>                array('Hide Locally',      'bool', 0, AF_HIDE, ''),

         'city_id'=>                   array('City where shown',  'many2one',   0, AF_OBLIGATORY|AF_SEARCHABLE|AF_READONLY_EDIT, 'city'),
         'borough_id' =>              array('District',          'many2one',   0, AF_SEARCHABLE|AF_HIDE_LIST|AF_HIDE_ADD, 'borough'),
         'neighborhood_id' =>          array('Area',              'many2one',   0, AF_SEARCHABLE|AF_HIDE_LIST|AF_HIDE_ADD, 'neighborhood'),

         'name'=>                      array('Name',              'str',    '', AF_OBLIGATORY|AF_SEARCHABLE|AF_LOG, '', 50),
         'shortname'=>                 array('URL',               'file',    ATT_DEFAULT_NOW, AF_OBLIGATORY|AF_HIDE_ADD|AF_HIDE_LIST, 30),

         'input_lang'=>                array('Input language',    'valSelect', 'en', AF_OBLIGATORY|AF_HIDE_LIST|AF_HIDE, $langArray),

         'address_street'     => array('Street'            ,'str','', AF_OBLIGATORY|AF_HIDE_LIST|AF_SEARCHABLE, 100),
         'address_number'     => array('Street Number'     ,'int',0,  AF_HIDE_LIST, 6),
         'address_suffix'     => array('Suffix'            ,'str','', AF_HIDE_LIST, 10),
         'address_postcode'   => array('Postcode'          ,'str','', AF_HIDE_LIST|AF_SEARCHABLE, 10),
         'address_city'       => array('City (Address)'              ,'str','', AF_OBLIGATORY|AF_HIDE_LIST, 50),
         // 'address_country'    => array('Address Country'      , 'str', '', AF_HIDE_LIST, 2),
         'address_country'    =>  array('Country',           'many2one', 0, AF_OBLIGATORY, 'countries'),

         'location_accuracy'    => array('Accuracy'    			, 'map',  0, AF_HIDE_ADD|AF_HIDE_LIST),
         'location_lat'         => array('Latitude'         , 'float',0, AF_HIDE_ADD|AF_HIDE_LIST, '3.6'),
         'location_long'        => array('Longitude'        , 'float',0, AF_HIDE_ADD|AF_HIDE_LIST, '3.6'),

         'staff_notes' => array('Staff Notes',             'text',    '', AF_HIDE_LIST),

      );
      break;


    // base class for rental property (boat, shortstay)
    case "serviced_rental":
      $base_fields = get_object_attributes('property', $get_relations);
      unset($base_fields['type']);
      $sub_fields = array(
         'book_direct'=>               array('Directly bookable?', 'bool', 1, AF_HIDE_LIST, ''),

         'rating'=>                    array('Rating',            'int',    0, AF_HIDE_LIST, ''),
         'review_score'=>              array('Review Score',      'float',  0, AF_HIDE_ADD|AF_READONLY|AF_HIDE_LIST, '4.2'),
         'review_nr'=>                 array('# Ratings',            'int',    0, AF_HIDE_ADD|AF_READONLY|AF_HIDE_LIST, ''),

          // checkin
         'checkin_from'=>              array('Checkin from',       'str',    0, AF_HIDE|AF_HIDE_LIST, 5),
         'checkin_to'=>                array('Checkin to',         'str',    0, AF_HIDE|AF_HIDE_LIST, 5),
         'checkout_from'=>             array('Checkout from',      'str',    0, AF_HIDE|AF_HIDE_LIST, 5),
         'checkout_to'=>               array('Checkout to',        'str',    0, AF_HIDE|AF_HIDE_LIST, 5),

      );
      $fields = array_merge($sub_fields, $base_fields);
      break;

    case "shortstay_office":
      $base_fields = get_object_attributes('serviced_rental', $get_relations);
      unset($base_fields['id']);
      $sub_fields = array(
         'id'=>                        array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT),
         'type' =>                     array('Type',              'valSelect', 'shortstay_office', AF_OBLIGATORY|AF_HIDE, $propertyTypeArray),
         'owner_id'=>                  array('Owner',             'many2one',   0, AF_SEARCHABLE|AF_READONLY_EDIT|AF_OBLIGATORY, 'owner', 'owner.shortstay_office=1'),
         'corporate'                => array('Corporate'          ,'bool', 0, AF_HIDE, 1),

         // day rate
         'rate_day'=>                  array('Day rate',          'money',  0, AF_OBLIGATORY|AF_SEARCHABLE|AF_LOG, ''),
         'rate_morning'=>              array('Morning rate',      'money',  0, AF_SEARCHABLE|AF_LOG, ''),
         'rate_afternoon'=>            array('Afternoon rate',    'money',  0, AF_SEARCHABLE|AF_LOG, ''),
         'rate_day_min'=>              array('Min. Day rate',     'money',  0, AF_HIDE_LIST|AF_LOG, ''),
         'rate_hour'=>                 array('Hour rate',          'money',  0, AF_LOG, ''),
          
          // deposit
         'deposit'=>                   array('Deposit %',         'int',    25, AF_OBLIGATORY, ''),
         'security_deposit'=>          array('Security Deposit',  'money',  0, AF_HIDE_LIST, ''),

         'min_stay'=>                  array('Min stay',          'int',    3, AF_SEARCHABLE, ''),
         'max_stay'=>                  array('Max stay',          'int',    0, AF_SEARCHABLE|AF_HIDE|AF_HIDE_LIST, ''),

         'max_guests'=>                array('Max guests',        'int',    0, AF_OBLIGATORY|AF_SEARCHABLE|AF_LOG, ''),
         'rate_num_guests'=>           array('Guests included in rate',  'int',  2, AF_HIDE_LIST|AF_LOG, 2),
         'rate_extraperson'=>          array('Surcharge per extra person',  'money',  0, AF_SEARCHABLE|AF_LOG, ''),
         'rate_shortstay'=>            array('Short stay',        'money',  0, AF_HIDE|AF_LOG, ''),

         // discounts
         'discount'=>                  array('Flat Discount',     'discount',    0, AF_HIDE_LIST, ''),

          // fees
         'fee_cleaning'=>              array('Cleaning fee',      'money',  0,  AF_HIDE_ADD|AF_HIDE_LIST, ''),
         'fee_local'=>                 array('Local fee',         'money',  0,  AF_HIDE_ADD|AF_HIDE_LIST, ''),
         'fee_pickup'=>                array('Pickup fee',        'money',  0,  AF_HIDE_ADD|AF_HIDE_LIST, ''),
         'fee_booking'=>               array('Booking fee',       'money',  40, AF_HIDE_ADD|AF_HIDE_LIST, ''),
         'fee_other'=>                 array('Other fees',        'money',  0,  AF_HIDE_ADD|AF_HIDE_LIST, ''),

         'num_rooms' =>                array('# Rooms',           'intSelect', 0, 0, array(0,10,1, '')),
         'living_size' =>              array('Size (sq.mtr)',     'int',0, AF_HIDE_LIST, 5),                                      
         'facilities' =>               array('Facilities' ,       'msel','', AF_HIDE_LIST, 'property_facilities', 'property_facilities.office=1'),

      );
      $fields = array_merge($sub_fields, $base_fields);
      break;

    case "shortstay":
      $base_fields = get_object_attributes('serviced_rental', $get_relations);
      unset($base_fields['id']);
      $sub_fields = array(
         'id'=>                        array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT),
         'type' =>                     array('Type',               'valSelect', 'shortstay', AF_OBLIGATORY|AF_HIDE, $propertyTypeArray),
         'owner_id'=>                  array('Owner',             'many2one',   0, AF_SEARCHABLE|AF_READONLY_EDIT|AF_OBLIGATORY, 'owner', 'owner.shortstay=1'),
         'corporate'                => array('Corporate'          ,'bool', 0, AF_HIDE, 1),
         'yah'                      => array('Licensed?'          ,'bool', 0, AF_HIDE_LIST, 1),

         // day rate
         'rate_day'=>                  array('Day rate',          'money',  0, AF_OBLIGATORY|AF_SEARCHABLE|AF_LOG, ''),
         'rate_day_min'=>              array('Min. Day rate',     'money',  0, AF_HIDE_LIST|AF_LOG, ''),
         'rate_hour'=>                 array('Hour rate',          'money',  0, AF_LOG, ''),

          // deposit
         'deposit'=>                   array('Deposit %',         'int',    15, AF_OBLIGATORY, ''),
         'security_deposit'=>          array('Security Deposit',        'money',  0, AF_HIDE_LIST, ''),

         'rate_num_guests'=>           array('# Guests incl. in rate',  'int',  2, AF_HIDE_LIST|AF_LOG, 2),
         'max_guests'=>                array('Max guests',        'int',    0, AF_OBLIGATORY|AF_SEARCHABLE|AF_LOG, ''),
         'min_stay'=>                  array('Min stay',          'int',    3, AF_SEARCHABLE, ''),
         'max_stay'=>                  array('Max stay',          'int',    0, AF_SEARCHABLE|AF_HIDE|AF_HIDE_LIST, ''),

         'rate_extraperson'=>          array('Extra person',      'money',  0, AF_SEARCHABLE|AF_LOG, ''),
         'rate_shortstay'=>            array('Short stay',        'money',  0, AF_HIDE|AF_LOG, ''),

         // discounts
         'discount'=>                  array('Flat Discount',     'discount',    0, AF_HIDE_LIST, ''),

          // fees
         'fee_cleaning'=>              array('Cleaning fee',      'money',  0,  AF_HIDE_ADD|AF_HIDE_LIST, ''),
         'fee_local'=>                 array('Local fee',         'money',  0,  AF_HIDE_ADD|AF_HIDE_LIST, ''),
         'fee_pickup'=>                array('Pickup fee',        'money',  0,  AF_HIDE_ADD|AF_HIDE_LIST, ''),
         'fee_booking'=>               array('Booking fee',       'money',  40, AF_HIDE_ADD|AF_HIDE_LIST, ''),
         'fee_other'=>                 array('Other fees',        'money',  0,  AF_HIDE_ADD|AF_HIDE_LIST, ''),

         'num_bedrooms'       => array('# Bedrooms',      'intSelect', 0, 0, array(1,10,1, '')),
         'num_bathrooms'      => array('# Bathrooms',      'intSelect', 0, 0, array(1,10,1, '')),

         'facilities'         => array('Facilities'        ,'msel','', AF_HIDE_LIST, 'property_facilities', 'property_facilities.serviced=1'),

      );
      $fields = array_merge($sub_fields, $base_fields);
      break;

    case "boat":
      //   DB FIELD                    FLD  NAME                  TYPE     ED REQ LEN/FUNC
      $base_fields = get_object_attributes('serviced_rental', $get_relations);
      unset($base_fields['id']);
      $sub_fields = array(
         'id'=>                        array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT),
         'type' =>                     array('Type',               'valSelect', 'boat', AF_OBLIGATORY|AF_HIDE_EDIT|AF_HIDE_ADD, $propertyTypeArray),
         'owner_id'=>                  array('Owner',             'many2one',   0, AF_OBLIGATORY, 'owner', 'owner.boat=1'),

         'rate_hour'=>                 array('Hour rate',          'money',  0, AF_OBLIGATORY|AF_LOG, ''),
         'max_guests'=>                array('Max guests',        'int',    0, AF_OBLIGATORY, ''),
         'min_stay'=>                  array('Min stay',          'int',    0, 0, ''),
         'max_stay'=>                  array('Max stay',          'int',    0, AF_HIDE_LIST, ''),

         // boat related
         'boat_type'          =>       array('Boat Type'         ,   'valSelect',0, AF_OBLIGATORY, $boatTypeArray),
         'boat_max_drinks'=>           array('Max. drinks/snacks',   'int',    0, AF_HIDE_LIST, ''),
         'boat_max_buffet'=>           array('Max. buffet',          'int',    0, AF_HIDE_LIST, ''),
         'boat_max_dinner'=>           array('Max. sit-down dinner', 'int',    0, AF_HIDE_LIST, ''),

         'facilities'         => array('Facilities'        ,'msel','', AF_HIDE_LIST, 'property_facilities', 'property_facilities.boat=1'),

      );

    case "hotel":
      $base_fields = get_object_attributes('serviced_rental', $get_relations);
      unset($base_fields['id']);
      $sub_fields = array(
         'id'=>                        array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT),
         'type'                => array('Type'              ,'valSelect', 'hotel', AF_OBLIGATORY|AF_HIDE_EDIT|AF_HIDE_ADD, $propertyTypeArray),
         'owner_id'=>             array('Owner',            'link',   1, AF_OBLIGATORY, 'owner'),
         'rate_day'=>             array('Max. rate',        'money',  0, AF_OBLIGATORY|AF_LOG, ''),
         'rate_day_min'=>         array('Min. rate',        'money',  0, AF_OBLIGATORY|AF_LOG, ''),
         'hoteltype_id'=>         array('Hotel Type ',      'many2one', 0, AF_SEARCHABLE, 'hotel_type'),
         'chains'=>               array('Chains'            ,'msel','', AF_HIDE_LIST, 'hotel_chain'),
         'cards_accepted'=>       array('Cards Accepted'    ,'msel','', AF_HIDE_LIST, 'cc_type'),
         'facilities'=>           array('Facilities'        ,'msel','', AF_HIDE_LIST, 'property_facilities', 'property_facilities.hotel=1'),
         'rooms'=>                array('Rooms',            'one2many', 0, AF_HIDE_LIST, 'room', 'parent_id'),
      );
      $fields = array_merge($sub_fields, $base_fields);
      break;


    case "nonserviced":
      //   DB FIELD                    FLD  NAME                  TYPE     ED REQ LEN/FUNC
      $base_fields = get_object_attributes('property', $get_relations);
      unset($base_fields['type']);
      $sub_fields = array (

         'listed_by_owner'=>      array('Listed by owner',   'bool', 0, 0, ''),
         'estate_agent_id'=>      array('Estate Agent',       'many2one',   0, AF_HIDE_LIST|AF_SEARCHABLE, 'estate_agent'),
         'owner_id'       =>      array('Owner',             'many2one',   0, AF_HIDE_LIST|AF_READONLY_EDIT|AF_SEARCHABLE, 'owner'),

         'num_rooms'          => array('# Rooms',          'intSelect', 0, 0, array(1,50,1, '')),
         'num_bedrooms'       => array('# Bedrooms',      'intSelect', 0, 0, array(1,10,1, '')),
         'num_bathrooms'      => array('# Bathrooms',      'intSelect', 0, 0, array(1,10,1, '')),
         'floors'             => array('# floors in building',      'intSelect', 0, AF_HIDE_LIST, array(1,100,1, '')),
         'floor'              => array('On which floor?',      'intSelect', 0, AF_HIDE_LIST, array(1,100,1, '')),

         'living_size'        => array('Living size (sq.mtr)','int',0, AF_HIDE_LIST, 5),
         'lot_size'           => array('Lot size (sq.mtr)' ,'int',0, AF_HIDE_LIST, 5),
         'volume'             => array('Volume (cu.mtr)'   ,'int',0, AF_HIDE_LIST, 6),
         'first_pic'          => array('First pic'         ,'str','', AF_HIDE, 255),
         'building_year'      => array('Building year'     ,'str','', AF_HIDE_LIST, 10),
         'energy_label'       => array('Energy label'       ,'str','', AF_HIDE_LIST, 10),

          // single select
         'object_type'        => array('Object type'       ,'ssel',0, AF_HIDE_LIST, 'property_object_type'),
         'building_type'      => array('Building type'     ,'ssel',0, AF_HIDE_LIST, 'property_building_type'),
         'delivery'           => array('Delivery'          ,'ssel',0, AF_HIDE_LIST, 'property_delivery'),
         'status'             => array('Status'            ,'ssel',0, AF_HIDE_LIST, 'property_status'),

         // multi select

         'insulation'         => array('Insulation'        ,'msel','', AF_HIDE_LIST, 'property_insulation'         ),
      // 'outside'            => array('Outside'           ,'msel','', AF_HIDE_LIST, 'property_outside'            ),
         'house_type'         => array('House type'        ,'msel','', AF_HIDE_LIST, 'property_house_type'         ),
         'apartment_type'     => array('Apt. type'         ,'msel','', AF_HIDE_LIST, 'property_apartment_type'     ),
         'placement'          => array('Placement'         ,'msel','', AF_HIDE_LIST, 'property_placement'          ),
         'storage'            => array('Storage'           ,'msel','', AF_HIDE_LIST, 'property_storage'            ),
         'parking'            => array('Parking'           ,'msel','', AF_HIDE_LIST, 'property_parking'            ),
         'heating'            => array('Heating'           ,'msel','', AF_HIDE_LIST, 'property_heating'            ),
         'garden'             => array('Garden'            ,'msel','', AF_HIDE_LIST, 'property_garden'             ),
         'notes'              => array('Notes'             ,'msel','', AF_HIDE_LIST, 'property_notes'              ),
         'warm_water'         => array('Warm water'        ,'msel','', AF_HIDE_LIST, 'property_warm_water'         ),
         'facilities'         => array('Facilities'        ,'msel','', AF_HIDE_LIST, 'property_facilities', 'property_facilities.non_serviced=1'),

      );
      $fields = array_merge($sub_fields, $base_fields);
      break;

    case "realestate":
      //   DB FIELD                    FLD  NAME                  TYPE     ED REQ LEN/FUNC
      $base_fields = get_object_attributes('nonserviced', $get_relations);
      unset($base_fields['id']);
      $sub_fields = array(
         'id'=>                        array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT),
         'type'               => array('Type'              ,'valSelect', 'realestate', AF_HIDE|AF_OBLIGATORY|AF_READONLY, $propertyTypeArray),
//         'type'               => array('Type'              ,'valSelect', 'realestate', AF_OBLIGATORY, $propertyTypeArray),
         'sales_price'        => array('Price'             ,'money',  0, AF_OBLIGATORY|AF_SEARCHABLE,' 9.2'),
         'price_inclusive'    => array('Inclusive k.k'     ,'bool',0, AF_HIDE_LIST),
         'service_costs'      => array('Service costs'     ,'money',  0, AF_HIDE_LIST,' 5.2'),
      );
      $fields = array_merge($sub_fields, $base_fields);
      break;

    case "longstay":
      //   DB FIELD                    FLD  NAME                  TYPE     ED REQ LEN/FUNC
      $base_fields = get_object_attributes('nonserviced', $get_relations);
      unset($base_fields['id']);
      $sub_fields = array(
         'id'=>                        array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT),
         'type'                => array('Type'              ,'valSelect', 'longstay', AF_OBLIGATORY|AF_HIDE_EDIT|AF_HIDE_ADD, $propertyTypeArray),
         'rental_price'        => array('Price / month'   ,'money',  0, AF_OBLIGATORY|AF_SEARCHABLE,8),
      );
      $fields = array_merge($sub_fields, $base_fields);
      break;

    case "office":
      $fields = get_object_attributes('property', $get_relations);
      $fields['type']               =  array('Type'              ,'valSelect', 'office', AF_OBLIGATORY|AF_HIDE_EDIT|AF_HIDE_ADD, $propertyTypeArray);
      break;

    case "room":
      //   DB FIELD                    FLD  NAME                  TYPE     ED REQ LEN/FUNC
      $fields = array(
         'id'=>                        array('ID',                'id',     0, AF_PRIMARY|AF_AUTOINCREMENT|AF_HIDE),
         'parent_id'=>                 array('Property ID',       'parent_id',  0, AF_HIDE|AF_OBLIGATORY, 'hotel'),
         'guid'=>                      array('Foreign ID',        'str',  0, AF_HIDE, 20),
         'owner_id'=>                  array('OwnerID',           'link',    0, AF_HIDE, 'owner'),

         'type'=>                      array('Type',              'many2one', 0, AF_OBLIGATORY, 'room_type'),
         'priority'=>                  array('Priority',          'int',     0, 0, 4),

         'size'=>                      array('Size',              'int',     0, 0, 4),

         'min_price'=>                  array('Min. Price',       'money',     0, 0),
         'max_price'=>                  array('Max. Price',       'money',     0, 0),
         'smoking_policy'=>             array('Smoking?',         'int',     0, 0, 1),
         'max_guests'=>                 array('Max. Guests',      'int',     0, 0, 2),

         'bookable_direct'=>            array('Bookable Direct',  'bool',0, AF_HIDE_LIST),
         'bookable_indirect'=>          array('Bookable Indirect','bool',0, AF_HIDE_LIST),
         'creditcard_required'=>        array('Creditcard req.',  'bool',0, AF_HIDE_LIST),
         'specification_required'=>     array('Specification req.','bool',0, AF_HIDE_LIST),
         'descriptions'         =>      array('Descriptions',     'one2many', 0, AF_HIDE_LIST|AF_CASCADE_DELETE, 'room_description', 'room_id'),
         'facilities'=>                 array('Facilities'        ,'msel','', AF_HIDE_LIST, 'property_facilities', 'property_facilities.room=1'),
//         'beds'=>                      array('Beds',              'one2many', 0, AF_CASCADE_DELETE, 'bed', 'parent_id'),
      );
      break;

    case "bed":
      //   DB FIELD                    FLD  NAME                  TYPE     ED REQ LEN/FUNC
      $fields = array(
         'id'=>                        array('ID',                'id',      0, AF_PRIMARY|AF_AUTOINCREMENT|AF_HIDE),
         'parent_id'=>                 array('RoomID',             'parent_id',   0, AF_HIDE|AF_OBLIGATORY, 'room'),
         'owner_id'=>                  array('OwnerID',           'link',     0, AF_HIDE, 'owner'),
         'length'=>                    array('length',            'int',      0, 0, 4),
         'width'=>                     array('width',             'int',      0, 0, 4),
         'type'=>                      array('Type',              'str', '', 0, 20),
         'style'=>                     array('Style',             'str', '', 0, 20),
//       'comfort'=>                   array('comfort',           'many2one', 0, 0, 'num_stars'),
//       'type'=>                      array('Type',              'many2one', 0, 0, 'bed_type'),
//       'style'=>                     array('Style',             'many2one', 0, 0, 'bed_style'),
         'comfort'=>                   array('comfort',           'str',      '', 0, 5),
         'rank'=>                      array('Rank',              'int',      0, 0, 4),
      );
      break;

    case "facility":
      //   DB FIELD                    FLD  NAME                  TYPE     ED REQ LEN/FUNC
      $fields = array(
         'id'               => array('ID'             ,'id',   0, AF_PRIMARY|AF_AUTOINCREMENT|AF_HIDE),
         'name'             => array('Name'           ,'str', '', AF_SEARCHABLE|AF_OBLIGATORY, 100),
         'facilitytype_id'  => array('Facility Type'  ,'many2one', 0, 'facility_type'),
         'searchable'       => array('Searchable'     ,'bool', 0, AF_SEARCHABLE),
         'serviced'         => array('Serviced'       ,'bool', 0, AF_SEARCHABLE),
         'non_serviced'     => array('Non-Serviced'   ,'bool', 0, AF_SEARCHABLE),
         'boat'             => array('Boat'           ,'bool', 0, AF_SEARCHABLE),
         'room'             => array('Room'           ,'bool', 0, AF_SEARCHABLE),
         'office'           => array('Office'         ,'bool', 0, AF_SEARCHABLE),
      );
      break;

    case "hotel_facility":
      //   DB FIELD                    FLD  NAME                  TYPE     ED REQ LEN/FUNC
      $fields = array(
         'id'               => array('ID'             ,'id',   0, AF_PRIMARY|AF_AUTOINCREMENT|AF_HIDE),
         'name'             => array('Name'           ,'str', '', AF_SEARCHABLE|AF_OBLIGATORY, 100),
         'facilitytype_id'  => array('Facility Type'  ,'many2one', 0, 'facility_type'),
         'searchable'       => array('Searchable'     ,'bool', 0, AF_SEARCHABLE),
         'booking_id'       => array('Booking ID'     ,'int', 0, 3),
      );
      break;

    case "room_facility":
      //   DB FIELD                    FLD  NAME                  TYPE     ED REQ LEN/FUNC
      $fields = array(
         'id'               => array('ID'             ,'id',   0, AF_PRIMARY|AF_AUTOINCREMENT|AF_HIDE),
         'name'             => array('Name'           ,'str', '', AF_SEARCHABLE|AF_OBLIGATORY, 100),
         'facilitytype_id'  => array('Facility Type'  ,'many2one', 0, 'facility_type'),
         'searchable'       => array('Searchable'     ,'bool', 0, AF_SEARCHABLE),
         'booking_id'       => array('Booking ID'     ,'int', 0, 3),
      );
      break;

    case "estate_agent":
      //   DB FIELD                    FLD  NAME                  TYPE     ED REQ LEN/FUNC
      $fields = array(
         'id'                => array('ID'                ,'id', 0, AF_PRIMARY|AF_AUTOINCREMENT ),
         'active'            => array('Active'            ,'bool', 1, AF_HIDE_LIST),
         'boat'             =>  array('Boat company'      ,'bool', 0, AF_HIDE_LIST),
         'created'           => array('Created'           ,'datetime', 0, AF_HIDE_LIST, 100),
         'name'              => array('Name'              ,'str', '', AF_SEARCHABLE|AF_OBLIGATORY, 100),
         'description'       => array('Description'       ,'text', '', AF_HIDE_LIST),
         'address_street'    => array('Street'    ,'str', '', AF_HIDE_LIST, 100),
         'address_postcode'  => array('Postcode'  ,'str', '', AF_HIDE_LIST, 10),
         'address_city'      => array('City'      ,'str', '', AF_HIDE_LIST, 50),
         'address_country'   => array('Country'   ,'str', '', AF_HIDE_LIST, 20),
         'address_phone'     => array('Phone'     ,'str', '', 0, 100),
         'address_fax'       => array('Fax'       ,'str', '', 0, 100),
         'address_url'       => array('Url'       ,'str', '', 0, 100),
         'address_email'     => array('Email'     ,'str', '', 0, 100),
         'contact_name'      => array('Name'      ,'str', '', 0, 100),
         'contact_title'     => array('Contact title'     ,'str', '', AF_HIDE_LIST, 100),
         'contact_phone'     => array('Contact phone'     ,'str', '', AF_HIDE_LIST, 100),
         'contact_fax'       => array('Contact fax'       ,'str', '', AF_HIDE_LIST, 100),
         'contact_url'       => array('Contact url'       ,'str', '', AF_HIDE_LIST, 100),
         'contact_email'     => array('Contact email'     ,'str', '', AF_HIDE_LIST, 100),
         'logo'              => array('Logo'              ,'str', '', AF_HIDE_LIST, 100),
         'scraped_source'    => array('Source'              ,'str', '', AF_HIDE_LIST, 100),
      );
      break;

    case "invoice":
      $fields = get_object_attributes('draft_invoice', $get_relations);
      //$fields['received'] = array('Received',   'datetime', ATT_DEFAULT_NOW, 0);

      $fields['due']          = array('Due',            'bool', 0, 0);
      $fields['payments']     = array('Payments',       'one2many', 0, AF_HIDE_LIST|AF_CASCADE_DELETE, 'payment', 'inv_id');
      $fields['booking_pin']  = array('Booking PIN',    'str',    '',  AF_HIDE|AF_READONLY, 10);

    break;

    case "draft_invoice":
      //   DB FIELD                    FLD  NAME                  TYPE     ED REQ LEN/FUNC
      $fields = array(
         'id'=>                        array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT),
         'cc_id'=>                     array('CC',                'link',       0, AF_HIDE, 'cc'), // last used cc
         'res_id'=>                    array('ResId',             'link', 0, AF_OBLIGATORY|AF_SEARCHABLE, 'reservation'),
         'site_id'=>                   array('Site',              'many2one',   ATT_DEFAULT_SITE_ID, AF_READONLY, 'site'),
         'city_id'=>                   array('City',              'link',   0, AF_READONLY|AF_SEARCHABLE|AF_READONLY|AF_HIDE_EDIT|AF_HIDE_ADD, 'city', 'msCity.active=1', 'msCity.name'),
         'owner_id'=>                  array('Owner',             'link',   ATT_DEFAULT_OWNER_ID, AF_SEARCHABLE|AF_READONLY|AF_HIDE_EDIT|AF_HIDE_ADD, 'owner', 'owner.shortstay=1', 'address.first_name'),
         'corporate'=>                 array('Corporate?',        'bool', 0, AF_READONLY),
         'due'=>                       array('Due?',              'bool', 0, AF_READONLY),
         'received'=>                  array('Received on',       'datetime', ATT_DEFAULT_NULL, AF_READONLY),
         'guest_id'=>                  array('GuestId',           'link', ATT_DEFAULT_GUEST_ID, AF_HIDE_ADD|AF_READONLY|AF_SEARCHABLE, 'guest'),
         'legacy_id'=>                 array('Custom inv. ID',         	'str',   '', 0, 20),
         'guest_name'=>                array('Guest',         		'str',   '', AF_READONLY, 40),
         'org_id'=>                    array('Organization',      'many2one', 0, AF_SEARCHABLE, 'org'),
         'type'=>                      array('Type',              'many2one', 0, AF_READONLY_EDIT, 'inv_type'),
         'status'=>                    array('Status',            'many2one', INV_STATUS_DRAFT, AF_READONLY, 'inv_status'),
         'status_change_timestamp'=>   array('Status Changed on', 'datetime',  ATT_DEFAULT_NOW, AF_HIDE_LIST|AF_HIDE_ADD|AF_READONLY),
         'created'=>                   array('Created',           'datetime', ATT_DEFAULT_NOW, AF_READONLY|AF_HIDE_LIST),
         'duedate'=>                   array('Due',               'date',   '', AF_HIDE_LIST),
         'start_date'=>                array('From',              'datetime',   '', 0),
         'end_date'=>                  array('To',                'datetime',   '', 0),
         'sequence'=>                  array('Sequence #',        'int',    0, AF_READONLY|AF_HIDE_LIST),

         'concerning'=>                array('Concerning',        'str',    '', AF_HIDE_LIST, 200),
         'notes'=>                     array('Notes',             'text',    '', AF_HIDE_LIST),

         'currency'=>                  array('Cur',               'valSelect', 0, AF_READONLY, $currencyArray),
         'shipping'=>                  array('Shipping',          'money',  0, AF_HIDE_LIST|AF_READONLY),
         'handling'=>                  array('Handling',          'money',  0, AF_HIDE_LIST|AF_READONLY),
//         'discount'=>                  array('Discount',          'discount',  0, AF_HIDE_LIST),
         'tax'=>                       array('Tax',               'money',  0, AF_HIDE_LIST|AF_READONLY),
         'total'=>                     array('Total',             'money',  0, AF_READONLY),
         'paid'=>                      array('Paid',              'money',  0, AF_READONLY),
         'balance'=>                   array('Balance',           'money',  0, AF_READONLY),
         'lineitems'=>                 array('# Lines',           'int',    0, AF_READONLY|AF_HIDE_LIST),
         'paid_date'=>                 array('Paid date',         'datetime',   '', AF_READONLY|AF_HIDE_LIST),
         'address_id'=>                array('Billing Address',      'one2one',    0, AF_HIDE_LIST|AF_CASCADE_DELETE|AF_ONE2ONE_INTEGRATE, 'address'),
         'inv_lineitems'=>             array('Lineitems',         'one2many', 0, AF_HIDE_LIST|AF_CASCADE_DELETE, 'inv_lineitem', 'inv_id'),

//         'payment_type'=>              array('PayType',           'many2one', 0, AF_READONLY_EDIT, 'payment_type'),
//         'txn_id'=>                    array('TXN',               'str',    '', AF_HIDE_LIST, 20),
//         'auth_amount'=>               array('Auth amount',       'money',  0, AF_HIDE_LIST),
//         'payment_currency'=>          array('Pay Cur',           'str',    '', AF_HIDE_LIST, 3),
//         'payment_gross'=>             array('Gross',             'money',  0, AF_HIDE_LIST),
//         'payment_fee'=>               array('Fee',               'money',  0, AF_HIDE_LIST),
//         'payment_net'=>               array('Net',               'money',  0, 0),
//         'settle_currency'=>           array('Rcv Cur',           'str',    '', AF_HIDE_LIST, 3),
//         'settle_amount'=>             array('Rcvd',              'money',  0, AF_HIDE_LIST),
//         'exchange_rate'=>             array('Rate',              'float',  0, AF_HIDE_LIST, '6.6'),
      );
      break;

    case "inv_lineitem":
      //   DB FIELD                    FLD  NAME                  TYPE     ED REQ LEN/FUNC
      $fields = array(
         'id'=>                        array('ID',                'id',    0, AF_PRIMARY|AF_AUTOINCREMENT|AF_HIDE),
         'inv_id'=>                    array('InvID',             'parent_id', 0, AF_HIDE|AF_OBLIGATORY, 'draft_invoice'),
         'user_id'=>                   array('User',              'link',    ATT_DEFAULT_USER_ID, AF_READONLY, 'user'),
         'type'=>                      array('Type',              'many2one', 0, 1, 'lineitem_type'),
         'timestamp'=>                 array('Timestamp',         'datetime',   ATT_DEFAULT_NOW, AF_READONLY, 6 ),
         'created'=>                   array('Created',           'date',   ATT_DEFAULT_NOW, AF_READONLY),
         'item_number'=>               array('Item number',       'str',    '', 0, 40),
         'quantity'=>                  array('Quantity',          'float',    1, 1, '2.2'),
         'currency'=>                  array('Cur',               'valSelect', 0, 1, $currencyArray),
         'amount'=>                    array('Unit price',        'money',  0, 1),
         'discount'=>                  array('Discount',          'discount',  0, 0),
         'tax_percentage'=>            array('Tax %',             'float',    0, 0, '2.2'),
         'tax'=>                       array('Tax',               'money',  0, AF_READONLY),
         'shipping'=>                  array('Shipping',          'money',  0, 0),
         'handling'=>                  array('Handling',          'money',  0, 0),
         'total'=>                     array('Total',             'money',  0, AF_READONLY),
         'description'=>               array('Description',       'text',   '', 0, 255),
      );
      break;

    case "charge":
      $fields = array(
         'id'=>                array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 8),
         'status'=>            array('Status',            'int',   0, 0, 4 ),
         'user'=>              array('User',              'int',   ATT_DEFAULT_USER_ID, 0, 6 ),
         'ipn_id'=>            array('IPN',               'int',   0, 0, 6 ),
         'cc_id'=>             array('CC ID',             'link',  1, AF_OBLIGATORY|AF_READONLY, 'cc'),
         'inv_id'=>            array('InvID',             'link', 0, AF_OBLIGATORY|AF_READONLY, 'invoice'),
         'res_id'=>            array('ResId',             'link',  1, AF_OBLIGATORY|AF_READONLY, 'reservation'),
         'timestamp'=>         array('Timestamp',         'datetime',  ATT_DEFAULT_NOW, 0, 6 ),
         'created'=>           array('Created',           'datetime', ATT_DEFAULT_NOW, AF_READONLY),

         'paymentaction'=>     array('Action',            'str',  '', AF_HIDE_LIST, 20 ),
         'acct'=>              array('Acct',              'str',  '', AF_HIDE_LIST, 20 ),

 //        'creditcardtype'=>    array('CC Type',           'str',  '', 0, 20 ),
//         'expdate'=>           array('Action',            'str',  '', AF_HIDE_LIST, 6 ),
//         'cvv2'=>              array('CVV',               'str',  '', AF_HIDE_LIST, 4 ),
//         'firstname'=>         array('First',             'str',  '', 0, 50 ),
//         'lastname'=>          array('Last',              'str',  '', 0, 50 ),
//         'street'=>            array('Addr',              'str',  '', AF_HIDE_LIST, 50 ),
//         'street2'=>           array('Addr2',             'str',  '', AF_HIDE_LIST, 50 ),
//         'city'=>              array('City',              'str',  '', AF_HIDE_LIST, 30 ),
//         'state'=>             array('State',             'str',  '', AF_HIDE_LIST, 30 ),
//         'zip'=>               array('Zip',               'str',  '', AF_HIDE_LIST, 10 ),
//         'countrycode'=>       array('Country',           'str',  '', AF_HIDE_LIST, 2 ),

         'currency'    =>      array('Currency',          'valSelect', 0, 0, $currencyArray),
         'amount'=>            array('Amount',            'money', 0, 1),
         'description'=>       array('Desc',              'str',  '', AF_HIDE_LIST, 100 ),
         'remote_timestamp'=>  array('RTimeS',            'str',  '', AF_HIDE_LIST, 20 ),
         'correlationid'=>     array('CorId',             'str',  '', AF_HIDE_LIST, 20 ),
         'ack'=>               array('Ack',               'str',  '', 0, 10 ),
         'version'=>           array('Version',           'str',  '', AF_HIDE_LIST, 10 ),
         'build'=>             array('Build',             'str',  '', AF_HIDE_LIST, 10 ),
         'avscode'=>           array('AVS OK',            'str',  '', AF_HIDE_LIST, 2 ),
         'cvv2match'=>         array('CVV OK',            'str',  '', AF_HIDE_LIST, 2 ),
         'transactionid'=>     array('TX ID',             'str',  '', 0,  20 ),
         'amt'=>               array('Amt',               'money', 0, AF_HIDE_LIST),
         'payment_error'=>     array('Error',             'text',  '', AF_HIDE_LIST),
      );
      break;

    case "gateway":
      //   DB FIELD                    FLD  NAME                  TYPE     ED REQ LEN/FUNC
      $fields = array(
         'id'               => array('ID'             ,'id',   0, AF_PRIMARY|AF_AUTOINCREMENT|AF_HIDE),
         'name'             => array('Name'           ,'str', '', AF_SEARCHABLE|AF_OBLIGATORY, 50),

         'username'         => array('UserName'      ,'str', '', 0, 100),
         'password'         => array('Password'      ,'str', '', 0, 100),
         'signature'        => array('Signature'     ,'str', '', 0, 200),
         'endpoint'         => array('Endpoint'      ,'str', '', 0, 200),

         'test_username'         => array('Tetst UserName'      ,'str', '', 0, 100),
         'test_password'         => array('Tetst Password'      ,'str', '', 0, 100),
         'test_signature'        => array('Tetst Signature'     ,'str', '', 0, 200),
         'test_endpoint'         => array('Tetst Endpoint'      ,'str', '', 0, 200),

      );
      break;

    case "transaction":
      $fields = array(
         'tx_id'=>             array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 8),
         //'tx_st'=>             array('User level',        'many2one', 0, 'tx_st'),
         'cc_id'=>             array('CC ID',             'link',  0,   AF_READONLY, 'cc'),
         'inv_id'=>            array('InvID',             'link',  0,    AF_READONLY, 'invoice'),
         'res_id'=>            array('ResId',             'link',  0,   AF_READONLY, 'reservation'),

         'tx_st'=>               array('TxSt',              'many2one', '', AF_SEARCHABLE, 'tx_status' ),
         'timestamp'=>           array('Timestamp',         'datetime',   ATT_DEFAULT_NOW, AF_READONLY),
         'tx_gateway'=>          array('Gateway',           'str',      '', AF_SEARCHABLE, 10 ),
         'tx_type'=>             array('TX Type',           'str',      '', AF_SEARCHABLE, 4 ),
         'ipn_test'=>            array('Test',              'bool',     0, 0),
         'txn_res'=>             array('TxnRes',            'str',      '', AF_SEARCHABLE, 10 ),
         'txn_id'=>              array('TxnId',             'str',      '', AF_SEARCHABLE, 50 ),
         'parent_txn_id'=>       array('Parent TxnId',      'str',      '', AF_SEARCHABLE, 50 ),
         'item_name'=>           array('Item Name',         'str',      '', AF_SEARCHABLE, 20 ),
         'item_number'=>         array('Item Number',       'str',      '', AF_SEARCHABLE, 20 ),
         'payment_date'=>        array('Date',              'str',      '', AF_SEARCHABLE, 22 ),

         'payment_status'=>    array('Payment Status',    'many2one', 0, AF_READONLY_EDIT, 'payment_status'),
         'pending_reason'=>    array('Pending Reason',    'str',    ATT_DEFAULT_NULL, AF_READONLY, 20),
         'reason_code'=>       array('Reason Code',       'str',    ATT_DEFAULT_NULL, AF_READONLY, 30),

         'receiver_email'=>      array('Rcv',               'str',      '', AF_SEARCHABLE|AF_HIDE_LIST, 20 ),
         'memo'=>                array('Memo',             'str',      '', AF_SEARCHABLE|AF_HIDE_LIST, 255 ),
         'tx_notes'=>            array('Notes',           'str',      '', AF_SEARCHABLE, 4 ),

         'mc_gross'=>        array('Gross',                 'str',      '', AF_SEARCHABLE, 22 ),
         'mc_currency'=>     array('Currency',              'str',      '', AF_SEARCHABLE, 22 ),
         'mc_fee'=>          array('Fee',                   'str',      '', AF_SEARCHABLE, 22 ),

         'bank_id'=>          array('Bank ID',              'str',      '', AF_SEARCHABLE, 10 ),

         'auth_id'=>         array('Auth ID',              'str',      '', AF_HIDE_LIST|AF_SEARCHABLE, 20),
         'auth_amount'=>     array('Auth Amount',          'str',      '', AF_HIDE_LIST|AF_SEARCHABLE, 20),
         'auth_exp'=>        array('Auth Expiration',      'str',      '', AF_HIDE_LIST|AF_SEARCHABLE, 25),

         'first_name'=>        array('First Name',      'str',      '', AF_HIDE_LIST|AF_SEARCHABLE, 50),
         'last_name'=>         array('Last Name',       'str',      '', AF_HIDE_LIST|AF_SEARCHABLE, 50),
         'residence_country'=> array('Country',         'str',      '', AF_HIDE_LIST|AF_SEARCHABLE, 2),
         'payer_email'=>       array('Sender',            'str',    '', AF_SEARCHABLE, 20 ),

      );
      break;

    case "payment_type":
      $fields = array(
         'id'=>                array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 2),
         'name'=>              array('Name',              'str',   '', 1, 20 ),
      );
      break;

    case "payment_status":
      $fields = array(
         'id'=>                array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 2),
         'name'=>              array('Name',              'str',   '', 1, 20 ),
      );
      break;

    case "payment":
      $fields = array(
         'id'=>                array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 2),
         'parent_id'=>         array('Parent',            'link',   0, AF_SEARCHABLE, 'payment'),
         'timestamp'=>         array('Timestamp',         'datetime',  ATT_DEFAULT_NOW, AF_HIDE, 14 ),
         'created'=>           array('Date',              'datetime',  ATT_DEFAULT_NOW, AF_READONLY),
         'tx_id'=>             array('Our TXID',             'link', 0, 0, 'transaction'),
         'inv_id'=>            array('InvID',             'link', 0, AF_OBLIGATORY, 'invoice'),
         'res_id'=>            array('ResId',             'link',  0, AF_SEARCHABLE, 'reservation'),
         'cc_id'=>             array('CC ID',             'link',  0, AF_SEARCHABLE, 'cc'),
         'charge_id'=>         array('Charge',            'link',  0, AF_SEARCHABLE, 'charge'),
         'gateway_id'=>        array('Gateway',           'link', 0, 0, 'gateway'),
         'txn_id'=>            array('Gateway TXID',      'str',  '', AF_READONLY|AF_SEARCHABLE, 30),

         'payment_type'=>      array('Payment Method',    'many2one', 0, AF_READONLY_EDIT, 'payment_type'),
         'currency'=>          array('Currency',          'valSelect', 0, AF_READONLY|AF_OBLIGATORY, $currencyArray),
         'amount'=>            array('Amount',            'money', 0, AF_READONLY|AF_OBLIGATORY),
         'description'=>       array('Desc',              'str',  '', AF_HIDE_LIST, 255),
//         'transaction_id'=>    array('Tx ID',            'link',  1, AF_SEARCHABLE|AF_HIDE, 'transaction'),

         'payment_currency'=>  array('Pay Cur',           'str',    ATT_DEFAULT_NULL, AF_READONLY, 3),
         'payment_gross'=>     array('Gross',             'money',  ATT_DEFAULT_NULL, AF_READONLY),
         'payment_fee'=>       array('Fee',               'money',  ATT_DEFAULT_NULL, AF_READONLY),
         'payment_net'=>       array('Net',               'money',  ATT_DEFAULT_NULL, AF_HIDE_LIST|AF_READONLY),
         'payment_notes'=>     array('Notes',             'str',    ATT_DEFAULT_NULL, AF_HIDE_LIST, 255 ),

         'settle_currency'=>   array('Rcv Cur',           'str',    ATT_DEFAULT_NULL, AF_HIDE_LIST|AF_READONLY, 3),
         'settle_amount'=>     array('Rcvd',              'money',  ATT_DEFAULT_NULL, AF_HIDE_LIST|AF_READONLY),
         'exchange_rate'=>     array('Rate',              'float',  ATT_DEFAULT_NULL, AF_HIDE_LIST|AF_READONLY, '6.6'),

         'payment_status'=>    array('Payment Status',    'many2one', 0, AF_READONLY_EDIT, 'payment_status'),
         'pending_reason'=>    array('Pending Reason',    'str',    ATT_DEFAULT_NULL, AF_HIDE_LIST|AF_READONLY, 20),
         'reason_code'=>       array('Reason Code',       'str',    ATT_DEFAULT_NULL, AF_HIDE_LIST|AF_READONLY, 30),

         'payments'=>          array('Related Payments',  'one2many', 0, AF_HIDE_LIST|AF_CASCADE_DELETE, 'payment', 'parent_id'),

      );
      break;

    case "weblog":
      $fields = array(
         'id'=>                array('ID',                'id',   0,   AF_PRIMARY|AF_AUTOINCREMENT, 11),
         'timestamp'=>         array('Timestamp',         'datetime',      ATT_DEFAULT_NOW, AF_SEARCHABLE, 14 ),
         'city_id'=>           array('City',              'many2one',  ATT_DEFAULT_CITY_ID, AF_SEARCHABLE, 'city'),
         'geo_id'=>            array('GeoObj',            'many2one',  ATT_DEFAULT_GEO_ID, 0, 'geoname'),
         'page'=>              array('Page',              'many2one',  ATT_DEFAULT_PAGE_ID, AF_SEARCHABLE, 'page'),
         'remote_ip'=>         array('IP',                'ip',        ATT_DEFAULT_CLIENT_IP, AF_SEARCHABLE, 15 ),
         'session_id'=>        array('Session ID',        'str',       ATT_DEFAULT_SESS_ID, AF_SEARCHABLE, 32 ),
         'country_code'=>      array('Country',           'str',       ATT_DEFAULT_CLIENT_CC, AF_SEARCHABLE, 2),
         'language'=>          array('Language',          'str',       ATT_DEFAULT_LANG, AF_SEARCHABLE, 2),
         'site_id'=>           array('Site ID',           'int',       ATT_DEFAULT_SITE_ID, AF_SEARCHABLE, 10 ),
         'aff_id'=>            array('Aff. ID',           'int',       ATT_DEFAULT_AFF_ID, AF_SEARCHABLE, 10 ),
         'user_id'=>           array('User ID',           'int',       ATT_DEFAULT_USER_ID, AF_SEARCHABLE, 10 ),
         'property_id'=>       array('Property ID',       'int',       ATT_DEFAULT_PROPERTY_ID, AF_SEARCHABLE, 10 ),
         'property_type'=>     array('Property type',     'many2one',  ATT_DEFAULT_PROPERTY_TYPE, AF_SEARCHABLE, 'property_type'),
         'owner_id'=>          array('Owner ID',           'int',       ATT_DEFAULT_AFF_ID, AF_SEARCHABLE, 10 ),


//         'remote_host'=>       array('Remote Host',       'str',  '', AF_SEARCHABLE, 50 ),
//         'referer'=>           array('Referer',           'str',  '', AF_SEARCHABLE, 10 ),
//         'pageviews'=>         array('Pageviews',         'int',  '', AF_SEARCHABLE, 10 ),
//         'datetime'=>              array('Time (secs)',       'int',  '', AF_SEARCHABLE, 10 ),
      );
      break;

    case "address":
      //   DB FIELD                    FLD  NAME                  TYPE     ED REQ LEN/FUNC
      $fields = array(
         'id'=>                        array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT|AF_HIDE),
         'salutation'=>        array('Salutation',        'valSelect', '', 0, $salutationArray),
         'first_name'=>        array('First Name',        'str',    '', AF_SEARCHABLE, 50),
         'last_name'=>         array('Last Name',         'str',    '', AF_SEARCHABLE, 50),
         'email_address'=>     array('Email',             'email',  '', AF_SEARCHABLE|AF_HIDE_LIST, 50),
         'organization'=>      array('Organization',      'str',    '', AF_SEARCHABLE, 30),
         'title'=>             array('Title',             'str',    '', AF_HIDE_LIST, 30),
         'address1'=>          array('Address1',          'str',    '', AF_HIDE_LIST, 50),
         'address2'=>          array('Address2',          'str',    '', AF_HIDE_LIST, 50),
         'city'=>              array('City',              'str',    '', AF_HIDE_LIST, 30),
         'state'=>             array('State',             'str',    '', AF_HIDE_LIST, 30),
         'zip'=>               array('Postal code',       'str',    '', AF_HIDE_LIST, 10),
//         'country'=>           array('Country',           'str', 0, 0, 2),
         'country'=>           array('Country',           'many2one', 0, AF_SEARCHABLEH, 'countries'),
         'home_phone'=>        array('Home Phone',        'phone',  '', AF_HIDE_LIST, 20),
         'work_phone'=>        array('Work Phone',        'phone',  '', AF_HIDE_LIST, 20),
         'cell_phone'=>        array('Cell Phone',        'phone',  '', AF_HIDE_LIST, 20),
         'fax'=>               array('Fax',               'phone',  '', AF_HIDE_LIST, 20),
         // 'email_address'=>     array('Cell Phone',        'email',  1, 0, 20),
         // 'web_address'=>       array('Cell Phone',        'url',    1, 0, 20),
      );
      break;

//    case "basic_address":
//      //   DB FIELD                    FLD  NAME                  TYPE     ED REQ LEN/FUNC
//      $fields = array(
//         'address1'=>          array('Address',           'str',    '', 0, 20),
//         'address2'=>          array('Address...',        'str',    '', 0, 20),
//         'city'=>              array('City',              'str',    '', 0, 20),
//         'state'=>             array('State/Province',    'str',    '', 0, 20),
//         'zip'=>               array('Zip/Postal code',   'str',    '', 0, 20),
//         'cell_phone'=>        array('Phone',             'phone',  '', AF_HIDE_LIST, 20),
//         'country'=>           array('Country',           'many2one', 0, 0, 'countries'),
//      );
//      break;

    case "user":
      $fields = array(
         'id'=>                array('ID',                'id',         0,   AF_PRIMARY|AF_AUTOINCREMENT),
         'created'=>           array('Created',           'datetime',   ATT_DEFAULT_NOW, AF_HIDE_LIST|AF_READONLY),
         'active'=>            array('Active?',           'bool',   1, 0),
         'address_id'=>        array('Address',           'one2one',    0,   AF_HIDE_LIST|AF_OBLIGATORY|AF_CASCADE_DELETE|AF_ONE2ONE_INTEGRATE, 'address'),
         'user_level'=>        array('Type',              'many2one',   0,   AF_HIDE_LIST|AF_READONLY|AF_OBLIGATORY, "user_level"),
         'username'=>          array('Username',          'str', '',         AF_UNIQUE|AF_OBLIGATORY|AF_SEARCHABLE, 50),
         'password'=>          array('Password',          'password',   0,   AF_HIDE_LIST|AF_OBLIGATORY, 32),
         'language'=>          array('Language',          'many2one',  'en', 0, 'language'),
         'email'=>             array('Login Email',       'email',      '',  AF_HIDE_LIST|AF_OBLIGATORY, 50),
         'languages'=>         array('Languages',          'msel',     '',   AF_HIDE_LIST, 'language'),
      );
      break;

    case "contact":
      //   DB FIELD                    FLD  NAME                  TYPE     ED REQ LEN/FUNC
      $fields = array(
         'id'=>                array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT|AF_HIDE),
         'created'=>           array('Created',           'date',   ATT_DEFAULT_NOW, AF_READONLY|AF_HIDE_LIST),
         'timestamp'=>         array('Updated',           'datetime',   ATT_DEFAULT_NOW, AF_READONLY|AF_HIDE_LIST, 6 ),
         'user_id'=>           array('Author',            'many2one',   ATT_DEFAULT_USER_ID, AF_HIDE_LIST|AF_SEARCHABLE|AF_READONLY, 'user'),
         'salutation'=>        array('Salutation',        'valSelect', '', AF_HIDE_LIST, $salutationArray),
         'first_name'=>        array('First Name',        'str',    '', AF_SEARCHABLE, 50),
         'last_name'=>         array('Last Name',         'str',    '', AF_SEARCHABLE, 50),
         'email_address'=>     array('Email',             'email',  '', AF_SEARCHABLE|AF_HIDE_LIST, 50),
         'org_id'=>            array('Org ID',            'many2one', 0, AF_HIDE_LIST, 'org'),
         'organization'=>      array('Organization',      'str',    '', AF_SEARCHABLE, 50),
         'department'=>        array('Deparment',         'str',    '', 0, 50),
         'title'=>             array('Title',             'str',    '', 0, 30),
         'address1'=>          array('Address1',          'str',    '', AF_HIDE_LIST, 50),
         'address2'=>          array('Address2',          'str',    '', AF_HIDE_LIST, 50),
         'city'=>              array('City',              'str',    '', AF_HIDE_LIST, 30),
         'state'=>             array('State/Province',    'str',    '', AF_HIDE_LIST, 30),
         'zip'=>               array('Postal code',       'str',    '', AF_HIDE_LIST, 10),
         'country'=>           array('Country',           'many2one', 0, 0, 'countries'),
         'home_phone'=>        array('Home Phone',        'phone',  '', AF_HIDE_LIST, 20),
         'work_phone'=>        array('Work Phone',        'phone',  '', AF_HIDE_LIST, 20),
         'cell_phone'=>        array('Cell Phone',        'phone',  '', AF_HIDE_LIST, 20),
         'fax'=>               array('Fax',               'phone',  '', AF_HIDE_LIST, 20),
         'web_address'=>       array('Web',               'url',    '', AF_HIDE_LIST, 50),
         'notes'=>             array('Notes',             'text',    '', AF_HIDE_LIST),

         'salutation2'=>        array('Contact 2 - Salutation',        'valSelect', '', AF_HIDE_LIST, $salutationArray),
         'first_name2'=>        array('Contact 2 - First Name',        'str',    '', AF_SEARCHABLE, 50),
         'last_name2'=>         array('Contact 2 - Last Name',         'str',    '', AF_SEARCHABLE, 50),
         'department2'=>        array('Contact 2 - Deparment',         'str',    '', AF_HIDE_LIST, 50),
         'title2'=>             array('Contact 2 - Title',             'str',    '', AF_HIDE_LIST, 30),
         'email_address2'=>     array('Contact 2 - Email',             'email',  '', AF_HIDE_LIST, 50),
         'phone2'=>             array('Contact 2 - Phone',             'phone',  '', AF_HIDE_LIST, 20),

      );
      break;


    case "guest":
      $fields = array(
         'id'=>                array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT),
         'parent_id'=>         array('User',              'one2one', 0, AF_OBLIGATORY|AF_CASCADE_DELETE|AF_ONE2ONE_INTEGRATE, 'user'),
         'org_id'=>            array('Org',               'many2one', 0, 0, 'org'),
         'keep_payment_info'=> array('Keep Payment Info', 'bool',   0, 0),
         'notes' =>        		 array('Notes',        			'text',   '', AF_HIDE_LIST),
//         'cc_id'=>             array('Credit Cards',      'link', 0, AF_HIDE_LIST|AF_CASCADE_DELETE, 'cc', 'guest_id'),
      );
      break;

    case "org":
      //   DB FIELD                    FLD  NAME                  TYPE     ED REQ LEN/FUNC
      $fields = array(
         'id'=>                array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT),
         'org_name'=>          array('Name',              'str', '', AF_OBLIGATORY, 30),
         'invoice'=>           array('Pay by invoice?',   'bool', 0, AF_HIDE_LIST),
         'monthly_billing'=>   array('Bill monthly?',   	'bool', 0, AF_HIDE_LIST),
//         'cc_id'=>             array('Corp. CC', 'one2one', 0, AF_CASCADE_DELETE	, 'cc'),
         'parent_id'=>         array('User',              'one2one', 0, AF_OBLIGATORY|AF_CASCADE_DELETE|AF_ONE2ONE_INTEGRATE, 'user'),
      );
      break;

    case "affiliate":
      $fields = array(
         'id'=>                   array('ID',                 'id',       0, AF_PRIMARY|AF_AUTOINCREMENT),
         'parent_id'=>            array('User',               'one2one',  0, AF_OBLIGATORY|AF_CASCADE_DELETE|AF_ONE2ONE_INTEGRATE, 'user'),
         'affiliate_name'=>       array('Name',               'str',      '', AF_OBLIGATORY, 100),
         'live'=>                 array('Live?',              'bool',     0, 0),
         'commission'=>           array('Commission %',       'money',    0, AF_HIDE_LIST, '2.2'),
         'affiliate_script'=>     array('Script',             'str',      '', AF_HIDE_LIST, 100),
         'affiliate_dir'=>        array('Directory',          'str',      '', AF_HIDE_LIST, 50),
         'affiliate_css'=>        array('CSS',                'str',      '', AF_HIDE_LIST, 50),
         'affiliate_desc '=>      array('Description',        'text',     '', AF_HIDE_LIST),
         'allow_ads'=>            array('Allow Ads',          'bool',     0, AF_HIDE_LIST),
         'estate_agent_filter'=>  array('Estate Agent Filter','many2one', 0, AF_HIDE_LIST, 'estate_agent'),
         'show_city_menu'=>       array('Show city menu',     'bool',     0, AF_HIDE_LIST),
//         'show_regions'=>         array('Show regions',       'msel',    '', AF_HIDE_LIST, 'region'),
//         'show_countries'=>       array('Show countries',     'msel',      '', AF_HIDE_LIST, 'country'),
         'show_cities'=>          array('Show cities',        'msel',      '', AF_HIDE_LIST, 'city', 'active=1'),
         'show_types'=>           array('Show types',        'msel',       '', AF_HIDE_LIST, 'property_type', 'active=1'),

         'default_language'=>     array('Default Language',   'many2one',  ATT_DEFAULT_LANG, AF_HIDE_LIST, 'language'),
         'default_city'=>         array('Default City',       'many2one',  0, AF_HIDE_LIST, 'city'),

         'screen_width'=>         array('Width',              'int',      0, AF_OBLIGATORY|AF_HIDE_LIST, 4),
         'screen_height'=>        array('Height',             'int',      0, AF_HIDE_LIST, 4),
         'inner_width'=>          array('Inner Width',        'int',      0, AF_OBLIGATORY|AF_HIDE_LIST, 4),
         'wide_col_width'=>       array('Wide Col Width',     'int',      0, AF_OBLIGATORY|AF_HIDE_LIST, 4),
         'narrow_col_width'=>     array('Narrow Col Width',   'int',      0, AF_OBLIGATORY|AF_HIDE_LIST, 4),
         'center_col_width'=>     array('Center Col Width',   'int',      0, AF_OBLIGATORY|AF_HIDE_LIST, 4),
         'category_col_width'=>   array('Category Col Width', 'int',      0, AF_OBLIGATORY|AF_HIDE_LIST, 4),
//         'request_col_width'=>    array('Request Col Width', 'int',      0, AF_OBLIGATORY|AF_HIDE_LIST, 4),

         'theme_color'=>          array('Theme Color',        'color',    0, AF_HIDE_LIST, 6),
         'theme_color2'=>         array('Theme Color 2',      'color',    0, AF_HIDE_LIST, 6),
         'background_color'=>     array('Background Color',   'color',    0, AF_HIDE_LIST, 6),
         'text_color'=>           array('Text Color',         'color',    0, AF_HIDE_LIST, 6),
         'link_color'=>           array('Link Color',         'color',    0, AF_HIDE_LIST, 6),
         'link_hilite_color'=>    array('Link Hilite Color',  'color',    0, AF_HIDE_LIST, 6),
         'title_box_top_color'=>  array('Title Box top color','color',    0, AF_HIDE_LIST, 6),
         'title_box_top_image'=>  array('Title Box top image','upload',   0, AF_HIDE_LIST, 60),
         'title_box_color'=>      array('Title Box color'    ,'color',    0, AF_HIDE_LIST, 6),
         'title_box_image'=>      array('Title Box image'    ,'upload',   0, AF_HIDE_LIST, 60),
         'title_box_border'=>     array('Title Box border'   ,'color',    0, AF_HIDE_LIST, 6),
         'box_lite_color'=>       array('Box lite color'     ,'color',    0, AF_HIDE_LIST, 6),
         'box_medium_color'=>     array('Box medium color'   ,'color',    0, AF_HIDE_LIST, 6),
         'box_dark_color'=>       array('Box dark color'     ,'color',    0, AF_HIDE_LIST, 6),
         'box_border_color'=>     array('Box border color'   ,'color',    0, AF_HIDE_LIST, 6),

//         'shortstay_show'=>       array('Short: show',        'bool',     0, AF_HIDE_LIST),
//         'shortstay_minstay'=>    array('Short: min. stay',   'int',      0, AF_HIDE_LIST, 3),
//         'shortstay_maxstay'=>    array('Short: max. stay',   'int',      0, AF_HIDE_LIST, 3),
//         'shortstay_minprice'=>   array('Short: min. price',  'int',      0, AF_HIDE_LIST, 8),
//         'shortstay_maxprice'=>   array('Short: max. price',  'int',      0, AF_HIDE_LIST, 8),
//
//         'longstay_show'=>        array('Long: show',         'bool',     0, AF_HIDE_LIST),
//         'longstay_minprice'=>    array('Long: min. price',   'int',      0, AF_HIDE_LIST, 8),
//         'longstay_maxprice'=>    array('Long: max. price',   'int',      0, AF_HIDE_LIST, 8),
//
//         'realestate_show'=>       array('Sale: show',         'bool',     0, AF_HIDE_LIST),
//         'realestate_minprice'=>  array('Sale: min. price',   'int',      0, AF_HIDE_LIST, 8),
//         'realestate_maxprice'=>  array('Sale: max. price',   'int',      0, AF_HIDE_LIST, 8),
//
//         'hotel_show'=>           array('Hotel: show',         'bool',     0, AF_HIDE_LIST),

         'mail_header'=>          array('Mail Header',         'html',     0, AF_HIDE_LIST),
         'mail_footer'=>          array('Mail Footer',         'html',     0, AF_HIDE_LIST),

      );
      break;

    case "owner":
      $fields = array(
         'id'=>                array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT),
         'parent_id'=>         array('User',              'one2one', 0, AF_OBLIGATORY|AF_CASCADE_DELETE|AF_ONE2ONE_INTEGRATE, 'user'),
         'shortstay'=>         array('Shortstay?',        'bool', 1, AF_SEARCHABLE),
         'boat'=>              array('Boat?',             'bool', 0, AF_SEARCHABLE),
         'shortstay_office'=>  array('Office?',           'bool', 0, AF_SEARCHABLE),

//         'properties'  =>      array("Properties",  'one2many', 0, AF_HIDE_LIST|AF_READONLY|AF_CASCADE_DELETE|AF_HIDE_ADD, 'property', 'owner_id'),

         //'active'    =>        array('Active' ,   'bool', 0, AF_HIDE_LIST),
         'owner_collects_balance'    => array('Owner Collects Balance' ,   'bool', 0, AF_HIDE_LIST),
         'owner_checkin'             => array('Owner Checkin'          ,   'bool', 0, AF_HIDE_LIST),
         'owner_clean'               => array('Owner Cleans'           ,   'bool', 0, AF_HIDE_LIST),
         'owner_replies'             => array('Owner Replies',   'bool', 0, AF_HIDE_LIST),
         'accept_cash'               => array('Accept Cash'            ,   'bool', 0, AF_HIDE_LIST),
         'accept_pp'                 => array('Accept Paypal'          ,   'bool', 0, AF_HIDE_LIST),
         'accept_visa'               => array('Accept Visa'            ,   'bool', 0, AF_HIDE_LIST),
         'accept_americanexpress'    => array('Accept Amex' ,              'bool', 0, AF_HIDE_LIST),
         'accept_mastercard'         => array('Accept Mastercard'      ,   'bool', 0, AF_HIDE_LIST),
         'accept_discover'           => array('Accept Discover'        ,   'bool', 0, AF_HIDE_LIST),
         'accept_maestro'            => array('Accept Maestro'         ,   'bool', 0, AF_HIDE_LIST),
         'accept_electron'           => array('Accept Electron'        ,   'bool', 0, AF_HIDE_LIST),
         'paypal_id_business'        => array('Paypal ID Business'     ,   'str',  '', AF_HIDE_LIST, 80),
         'paypal_id_private'         => array('Paypal ID Private'      ,   'str',  '', AF_HIDE_LIST, 80),

      );
      break;

    case "agent":
      $fields = array(
         'id'=>                array('ID',                'id',       0, AF_PRIMARY|AF_AUTOINCREMENT),
         'parent_id'=>         array('User',              'one2one',  0, AF_OBLIGATORY|AF_HIDE_LIST|AF_CASCADE_DELETE|AF_ONE2ONE_INTEGRATE, 'user'),
         'agent_name'=>        array('Agent Name',        'str',      '', AF_OBLIGATORY|AF_LOG, 30),
         'sites'=>             array('Sites',             'msel',     '', 0, 'site', 'active=1'),
         'cities'=>            array('Cities',            'msel',     '', 0, 'city', 'active=1'),
         'types'=>             array('Property Types',    'msel',     '', 0, 'property_type'),
//         'languages'=>         array('Languages',         'msel',     '', 0, 'language'),
         'custom_filters'=>    array('Custom Filters',    'text',   '', AF_HIDE_LIST|AF_HIDE_ADD, 0),

      );
      break;

    case "translator":
      $fields = array(
         'id'=>                array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT),
         'parent_id'=>         array('User',              'one2one', 0, AF_OBLIGATORY|AF_CASCADE_DELETE|AF_ONE2ONE_INTEGRATE, 'user'),
//         'language'=>          array('Language',          'many2one', '', 1, 'language'),
      );
      break;

    case "contractor":
      $fields = array(
         'id'=>                array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT),
         'parent_id'=>         array('User',              'one2one', 0, AF_OBLIGATORY|AF_CASCADE_DELETE|AF_ONE2ONE_INTEGRATE, 'user'),
//         'language'=>          array('Language',          'many2one', 'en', 0, 'language'),
      );
      break;

    case "staff":
      $fields = array(
         'id'=>                array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT),
         'parent_id'=>         array('User',              'one2one', 0, AF_OBLIGATORY|AF_CASCADE_DELETE|AF_ONE2ONE_INTEGRATE, 'user'),
         'sites'=>             array('Sites',             'msel',     '', 0, 'site', 'active=1'),
         'cities'=>            array('Cities',            'msel',     '', AF_HIDE_LIST, 'city', 'active=1'),
         'types'=>             array('Property Types',    'msel',     '', AF_HIDE_LIST, 'property_type'),
//         'languages'=>         array('Languages',         'msel',     '', AF_HIDE_LIST, 'language'),
         'custom_filters'=>    array('Custom Filters',    'text',   '', AF_HIDE_LIST|AF_HIDE_ADD, 0),
      );
      break;

    case "admin":
      $fields = array(
         'id'=>                array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT),
         'parent_id'=>         array('User',              'one2one', 0, AF_OBLIGATORY|AF_CASCADE_DELETE|AF_ONE2ONE_INTEGRATE, 'user'),
         'sites'=>             array('Sites',             'msel',     '', 0, 'site', 'active=1'),
         'cities'=>            array('Cities',            'msel',     '', AF_HIDE_LIST, 'city', 'active=1'),
         'types'=>             array('Property Types',    'msel',     '', AF_HIDE_LIST, 'property_type'),
         'custom_filters'=>    array('Custom Filters',    'text',   '', AF_HIDE_LIST|AF_HIDE_ADD, 0),
      );
      break;

    case "system":
      $fields = array(
         'id'=>                array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT),
         'parent_id'=>         array('User',              'one2one', 0, AF_OBLIGATORY|AF_CASCADE_DELETE|AF_ONE2ONE_INTEGRATE, 'user'),
      );
      break;


    case "countries":
      $fields = array(
         'id'=>                array('ID',                'id',   0, AF_PRIMARY, 2),
         'name'=>              array('Name',              'str',   '', 1, 80 ),
      );
      break;

    case "user_level":
      $fields = array(
         'user_level'=>        array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 2),
         'user_type'=>         array('Name',              'str',   '', 1, 12 ),
      );
      break;

    case "property_type":
      $fields = array(
         'id'=>                array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT),
         'name'=>              array('Name',              'str',   '', 1, 20),
         'description'=>       array('Description',       'str',   '', 0, 80),
         'active'=>            array('Active?',           'bool',   1, 0),
         'hide'=>              array('Show?',             'bool',   0, 0),
         'bookable'=>          array('Bookable?',         'bool',   0, 0),
         'calendar'=>          array('Calendar?',         'bool',   0, 0),
      );
      break;

    case "inv_type":
      $fields = array(
         'id'=>             array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 2),
         'name'=>           array('Name',              'str',   '', 1, 20 ),
         'description'=>   array('Description',       'str',   '', 1, 200 ),
      );
      break;

    case "event_type":
      $fields = array(
         'id'=>             array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 2),
         'name'=>           array('Name',              'str',   '', 1, 20 ),
         'description'=>    array('Description',       'str',   '', 1, 200 ),
      );
      break;

    case "lineitem_type":
      $fields = array(
         'id'=>                array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 2),
         'name'=>              array('Name',              'str',   '', 1, 20 ),
      );
      break;

    case "cc_type":
      $fields = array(
         'id'=>                array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 2),
         'name'=>              array('Name',              'str',   '', 1, 50 ),
      );
      break;

    case "tx_status":
      $fields = array(
         'id'=>                array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 2),
         'name'=>              array('Name',              'str',   '', 1, 50 ),
      );
      break;

    case "room_type":
      $fields = array(
         'id'=>                array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 2),
         'name'=>              array('Name',              'str',   '', 1, 20 ),
      );
      break;

    case "res_type":
      $fields = array(
         'id'=>            array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 2),
         'name'=>          array('Name',              'str',   '', 1, 20 ),
         'description'=>   array('Description',       'str',   '', 1, 200 ),
      );
      break;

    case "res_status":
      $fields = array(
         'id'=>            array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 2),
         'name'=>          array('Name',              'str',   '', 1, 20 ),
         'description'=>   array('Description',       'str',   '', 1, 200 ),
         'color'=>         array('Color',             'color',   '000000', 1, 6),
      );
      break;

    case "event_status":
      $fields = array(
         'id'=>            array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 2),
         'name'=>          array('Name',              'str',   '', 1, 20 ),
         'description'=>   array('Description',       'str',   '', 1, 200 ),
         'color'=>         array('Color',             'color',   '000000', 1, 6),
      );
      break;

    case "enq_status":
      $fields = array(
         'id'=>              array('ID',                  'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 2),
         'name'=>            array('Name',                'str',   '', 1, 20 ),
         'description' =>    array('Description',         'str',   '', 1, 200 ),
         'color'=>           array('Color',               'color',   '000000', 1, 6),
      );
      break;

    case "inv_status":
      $fields = array(
         'id'=>            array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 2),
         'name'=>          array('Name',              'str',   '', 1, 20 ),
         'description'=>   array('Description',       'str',   '', 1, 200 ),
         'color'=>         array('Color',             'color',   '000000', 1, 6),
      );
      break;

    case "neighborhood":
      $fields = array(
         'id'=>                array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 8),
         'grandparent_id'=>    array('City',              'many2one', 0, AF_OBLIGATORY, 'city'),
         'parent_id'=>         array('Borough',           'many2one', 0, AF_OBLIGATORY, 'borough'),
         'active'=>            array('Active',            'bool',   0, 0),
         'name'=>              array('Name',              'str',   '', AF_SEARCHABLE|AF_OBLIGATORY, 50 ),
         'shortstay'=>         array('Shortstay',         'bool',   0, 0),
         'longstay'=>          array('Longstay',          'bool',   0, 0),
         'realestate'=>        array('Realestate',        'bool',   0, 0),
         'postcode_list'=>     array('Postcode list',     'str',   '', 0, 255 ),
         'description'=>       array('Description',       'text',  '', AF_HIDE_LIST),
        'location_accuracy'=>  array('Accuracy',          'map',    0, 0, 1),
        'location_lat'=>       array('Latitude',          'float',  0, 0, '3.6'),
        'location_long'=>      array('Longitude',         'float',  0, 0, '3.6'),
      );
      break;

    case "borough":
      $fields = array(
         'id'=>                 array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 8),
         'grandparent_id'=>     array('District',          'many2one', 0, AF_OBLIGATORY, 'district'),
         'parent_id'=>          array('City',              'many2one', 0, AF_OBLIGATORY, 'city'),
         'active'=>             array('Active',            'bool',   0, 0),
         'name'=>              array('Name',              'str',   '', AF_SEARCHABLE|AF_OBLIGATORY, 50 ),
         'shortstay'=>          array('Shortstay',         'bool',   0, 0),
         'longstay'=>           array('Longstay',          'bool',   0, 0),
         'realestate'=>         array('Realestate',        'bool',   0, 0),
         'postcode_list'=>      array('Postcode list',     'str',   '', 0, 255 ),
         'description'=>        array('Description',       'text',  '', AF_HIDE_LIST),
         'location_accuracy'=>  array('Accuracy',          'map',    0, 0, 1),
         'location_lat'=>       array('Latitude',          'float',  0, 0, '3.6'),
         'location_long'=>      array('Longitude',         'float',  0, 0, '3.6'),
      );
      break;

    case "city":
      $fields = array(
        'id'=>                 array('ID',                    'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 8),
        'grandparent_id'=>     array('Country',               'many2one', 0, 0,'country'),
        'parent_id'=>          array('District',              'many2one', 0, 0,'district'),
        'active'=>             array('Active',                'bool',   0, 0),
        'major'=>              array('Major',                 'bool',   0, 0),
         'name'=>              array('Name',              'str',   '', AF_SEARCHABLE|AF_OBLIGATORY, 50 ),
        'directory'=>          array('Directory',             'str',   '', 0, 50 ),
        'sale_min_price'=>     array('Realestate Min. Price', 'int',   0, AF_HIDE_LIST, 8 ),
        'rent_min_price'=>     array('Rental Min. Price',     'int',   0, AF_HIDE_LIST, 8 ),
        'MAS_city_id'=>        array('MAS id',                'int',   0, 0, 8 ),
        'MAS_apt_count'=>      array('MAS #apts',             'int',   0, 0, 8 ),
        'booking_city_id'=>    array('Booking id',            'int',   0, 0, 8 ),
        'booking_nrhotels'=>   array('Booking #hotels',       'int',   0, 0, 8 ),
        'description_en'=>     array('Description (English)', 'text', '', AF_HIDE_LIST),
        'description_nl'=>     array('Description (Dutch)',   'text', '', AF_HIDE_LIST),
        'description_fr'=>     array('Description (French)',  'text', '', AF_HIDE_LIST),
        'description_es'=>     array('Description (Spanish)', 'text', '', AF_HIDE_LIST),
        'description_ru'=>     array('Description (Russian)', 'text', '', AF_HIDE_LIST),
        'landmarks'=>          array('Landmarks',             'text', '', AF_HIDE_LIST),
        'location_accuracy'=>  array('Accuracy',              'map',    0, 0, 1),
        'location_lat'=>       array('Latitude',              'float',  0, 0, '3.6'),
        'location_long'=>      array('Longitude',             'float',  0, 0, '3.6'),
      );
      break;

    case "district":
      $fields = array(
         'id'=>                 array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 8),
         'active'=>             array('Active',            'bool',   0, 1),
         'name'=>              array('Name',              'str',   '', AF_SEARCHABLE|AF_OBLIGATORY, 50 ),
         'parent_id'=>          array('Country',           'many2one', 1, 0,'country'),
         'grandparent_id'=>     array('Region',            'many2one', 1, 0,'region'),
         'location_accuracy'=>  array('Accuracy',          'map',    0, 0, 1),
         'location_lat'=>       array('Latitude',          'float',  0, 0, '3.6'),
         'location_long'=>      array('Longitude',         'float',  0, 0, '3.6'),
      );
      break;

    case "country":
      $fields = array(
         'id'=>                array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 8),
         'grandparent_id'=>         array('Continent',         'many2one', 1, 0,'continent'),
         'parent_id'=>    array('Region',            'many2one', 1, 0,'region'),
         'active'=>            array('Active',            'bool',   0, 1),
         'name'=>              array('Name',              'str',   '', AF_SEARCHABLE|AF_OBLIGATORY, 50 ),
         'code'=>              array('Code',              'str',   '', 1, 3 ),
         'code2'=>             array('Code2',             'str',   '', 1, 2 ),
//         'currency'=>                  array('Cur',       'valSelect', 0, 1, $currencyArray),
//         'description'=>       array('Description',       'text',  '', 0, 255),
        'location_accuracy'=>  array('Accuracy',          'map',    0, 0, 1),
        'location_lat'=>       array('Latitude',          'float',  0, 0, '3.6'),
        'location_long'=>      array('Longitude',         'float',  0, 0, '3.6'),
      );
      break;

    case "region":
      $fields = array(
         'id'=>                array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 8),
         'parent_id'=>         array('Country',           'many2one', 0, 0,'continent'),
         'active'=>            array('Active',            'bool',   0, 1),
         'name'=>              array('Name',              'str',   '', AF_SEARCHABLE|AF_OBLIGATORY, 50 ),
         'parent_id'=>         array('Continent',         'many2one', 1, 0,'continent'),
        'location_accuracy'=>  array('Accuracy',          'map',    0, 0, 1),
         'location_lat'=>      array('Latitude',          'float',  0, 0, '3.6'),
         'location_long'=>     array('Longitude',         'float',  0, 0, '3.6'),
      );
      break;

    case "continent":
      $fields = array(
         'id'=>                array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 8),
         'parent_id'=>         array('Parent (World)',    'int', 0, AF_HIDE), // dummy, used for consitency, always zero
         'active'=>            array('Active',            'bool',   0, 1),
         'name'=>              array('Name',              'str',   '', 1, 50 ),
        'location_accuracy'=>  array('Accuracy',          'map',    0, 0, 1),
         'location_lat'=>      array('Latitude',          'float',  0, 0, '3.6'),
         'location_long'=>     array('Longitude',         'float',  0, 0, '3.6'),
      );
      break;

    case "landmark":
      $fields = array(
         'id'=>                array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 8),
         'active'=>            array('Active',            'bool',   0, 1),
         'timestamp'=>         array('Timestamp',         'datetime',   0, AF_HIDE),
         'city_id'=>           array('City',              'many2one',   0, AF_SEARCHABLE, 'city', 'active=1'),
         'name'=>              array('Name',              'str',   '', 1, 50 ),

         'address_street'=>    array('Street',            'str',   '', AF_HIDE_LIST, 50 ),
         'address_number'=>    array('Number',            'str',   '', AF_HIDE_LIST, 4 ),
         'address_state'=>     array('State',             'str',   '', AF_HIDE_LIST, 50 ),
         'address_postcode'=>  array('Postcode',          'str',   '', AF_HIDE_LIST, 50 ),
         'address_city'=>      array('City',              'str',   '', AF_HIDE_LIST, 50 ),
         'address_country'=>   array('Country',           'many2one', 0, AF_HIDE_LIST, 'country'),

         'location_accuracy'    => array('Accuracy'    			, 'map',  0, 0),
         'location_lat'         => array('Latitude'         , 'float',0, AF_HIDE_LIST, '3.6'),
         'location_long'        => array('Longitude'        , 'float',0, AF_HIDE_LIST, '3.6'),
      );
      break;

    case "language":
      $fields = array(
//         'id'=>                array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 3),
         'code'=>              array('Code',              'str',   '', AF_PRIMARY, 3 ),
         'name'=>              array('Name',              'str',   '', 1, 50 ),
         'active'=>            array('Active',            'bool',   0, 1),
      );
      break;

    case "legal_entity":
      $fields = array(
         'id'=>                  array('ID',                 'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 3),
         'name'=>                array('Name',               'str',   '', 1, 100 ),
                                 
         'bank_name'=>           array('Bank name',          'str',   '', AF_HIDE_LIST, 100),
         'account_name'=>        array('Account name',       'str',   '', AF_HIDE_LIST, 100),
         'account_number'=>      array('Account number',     'str',   '', AF_HIDE_LIST, 200),
         'tax_id'=>              array('Legal/tax id',       'str',   '', AF_HIDE_LIST, 100),
         'commerce_id'=>         array('Business association id',  'str',   '', AF_HIDE_LIST, 100 ),
         'paypal_id_business' => array('Paypal ID Business', 'str',  '', AF_HIDE_LIST, 80),
         'paypal_id_private'  => array('Paypal ID Private',  'str',  '', AF_HIDE_LIST, 80),

         'logo'   =>           array('Logo',   'image',      '', AF_HIDE_LIST, DESC_TYPE_LOGO),
         'logo_small' =>       array('Logo - Small',         'image',   '', AF_HIDE_LIST, DESC_TYPE_LOGO),
         'address_id'=>        array('Address',              'one2one',    0, AF_HIDE_LIST|AF_CASCADE_DELETE|AF_ONE2ONE_INTEGRATE, 'address'), // |AF_ONE2ONE_INTEGRATE
      );
      break;

    case "site":
      $fields = array(
         'id'=>                array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 3),
         'affiliate_id'=>      array('Affiliate ID',      'many2one', 0, AF_HIDE_LIST, 'affiliate'),
         'legal_entity_id'=>   array('Legal Entity',      'many2one', 0, AF_OBLIGATORY, 'legal_entity'),
         'domain'=>            array('Domain (w/o www.)', 'str',   '', 1, 100 ),
         'name'=>              array('Name / Title',      'str',   '', 1, 100 ),
         'keywords'   =>       array('Keywords',          'text',  '', AF_HIDE_LIST, 255),
         'description'=>       array('Description',       'text',  '', AF_HIDE_LIST, 255),

         'shortname'=>         array('Shortname',         'str',   '', 1, 10),
         'url'=>               array('URL',               'url',   '', AF_HIDE_LIST|AF_HIDE_ADD, 100 ),
         'test_url'=>          array('URL - test server', 'url',   '', AF_HIDE_LIST|AF_HIDE_ADD, 100 ),
         'remote_server'=>     array('Remote Server',     'str',   '', AF_HIDE_LIST|AF_HIDE_ADD, 60 ),

         'property_type'=>     array('Property Type',     'valSelect', 0, AF_OBLIGATORY, $propertyTypeArray),
         'default_language'=>  array('Language',    			'valSelect', 'en', AF_OBLIGATORY|AF_SEARCHABLE, $langArray),

         'min_price' =>        array('Minimum Price',     'int', 0, 0, 8),
         'max_price' =>        array('Maximum Price',     'int', 0, 0, 8),

         'directory'=>         array('Directory',         'str',   '', AF_HIDE_LIST|AF_HIDE_ADD|AF_READONLY, 255),
         'test_directory'=>    array('Test Directory',    'str',   '', AF_HIDE_LIST|AF_HIDE_ADD|AF_READONLY, 255),
         'image_directory'=>   array('Image dir',         'str',   '/i/', AF_HIDE_LIST|AF_HIDE_ADD, 20),
         'auto_build'=>        array('Auto Build?',       'bool',   1, AF_HIDE_LIST),
         'auto_build_filters'=> array('Auto Build Filters', 'text',   '', AF_HIDE_LIST|AF_HIDE_ADD, 255),
         'autogenerate_css'=>   array('Auto CSS?',         'bool',   1, AF_HIDE_LIST|AF_HIDE_ADD),
         'email_address'=>      array('Email Address',     'email',  '' , AF_HIDE_LIST|AF_HIDE_ADD, 60),
         'email_forward'=>      array('Forward email to:', 'email',  '' , AF_OBLIGATORY|AF_HIDE_LIST|AF_READONLY_EDIT, 60),

         'googlemap_live_key'=> array('Google Map Key (Live)', 'str',   '', AF_HIDE_LIST|AF_HIDE_ADD, 100),
         'googlemap_test_key'=> array('Google Map Key (Test)', 'str',   '', AF_HIDE_LIST|AF_HIDE_ADD, 100),

         'items_per_page'=> array('Properties per page', 'int',   5, AF_OBLIGATORY|AF_HIDE_LIST, 4),

         'built'  =>            array('Built?',             'bool', 0, AF_HIDE_ADD, 0),
         'live'   =>            array('Live?',              'bool', 0,  AF_HIDE_ADD, 0),

         'layout' =>            array("Layout", 'one2many', 0, AF_HIDE_LIST|AF_READONLY|AF_CASCADE_DELETE|AF_HIDE_ADD, 'site_layout', 'site_id'),
         'pages'  =>            array("Pages",  'one2many', 0, AF_HIDE_LIST|AF_READONLY|AF_CASCADE_DELETE|AF_HIDE_ADD, 'page_content', 'site_id'),

         'logo'   =>            array('Logo',   'image',   '', AF_HIDE_LIST, DESC_TYPE_LOGO),
         'logo_small' =>        array('Logo - Small',   'image',   '', AF_HIDE_LIST, DESC_TYPE_LOGO),
//         'address_id'=>        array('Address',           'one2one',    0, AF_HIDE_LIST|AF_ONE2ONE_INTEGRATE|AF_CASCADE_DELETE, 'address'), // |AF_ONE2ONE_INTEGRATE

      );
      break;

      case "site_layout":
        $fields = array(
          'id' =>                     array('ID',                       'int', 0, AF_PRIMARY|AF_AUTOINCREMENT, 8),
          'site_id' =>                array('Site',                     'parent_id', 0, AF_OBLIGATORY|AF_HIDE, 0),
          'layout_div' =>             array('Name',                     'many2one', '', AF_OBLIGATORY, 'site_layout_div'),
          'fg' =>                     array('Color',                    'color', '', 0, 6),
          'bg' =>                     array('Background color',         'color', '', 0, 6),
          'border' =>                 array('Border color',             'color', '', 0, 6),
          'src' =>                    array('Image',                    'str', '', 0, 60),
          'h' =>                      array('Height',                   'int', 0, 0, 4),
          'w' =>                      array('Width',                    'int', 0, 0, 4),
          'class' =>                  array('Class',                    'str', '', 0, 40),
        );
        break;

    case "site_layout_div":
      $fields = array(
         'id'=>            	    array('ID',                	'id',   '', AF_PRIMARY|AF_AUTOINCREMENT, 11),
         'name'=>               array('Name',                'str',   '', AF_OBLIGATORY|AF_SEARCHABLE, 100),
      );
      break;

    case "security":
      $fields = array(
         'node'=>                array('Class',             'str',   '', 1, 30),
         'action'=>              array('Action',            'str',   '', 1, 20),
         'user_level'=>          array('User level',        'many2one', 0, 0, 'user_level'),
      );
      break;

    case "quote":
      $fields = array(
         'id'=>                array('ID',                'id',      0, AF_PRIMARY|AF_AUTOINCREMENT, 8),
         'timestamp'=>         array('Timestamp',         'datetime',     0, AF_HIDE_LIST, 14 ),
         'name'=>              array('Name',              'str',      '', AF_OBLIGATORY|AF_SEARCHABLE, 50 ),
         'title'=>             array('Title',             'str',      '', 0, 50 ),
         'company'=>           array('Company',           'str',      '', AF_OBLIGATORY|AF_SEARCHABLE, 50 ),
         'email'=>             array('Email',             'email',    '', AF_HIDE_LIST, 50),
         'country'=>           array('Country',           'str',      '', 1, 30),
         'city_id'=>           array('City',              'many2one',   0, AF_SEARCHABLE, 'city', 'active=1'),
         'quote'=>             array('Quote',             'text',     '', 1),
         'language'=>          array('Language',          'many2one', 0, 1, 'language'),
         'can_publish'=>       array('Can Publish',       'bool',     0, AF_HIDE_LIST),
         'published'=>         array('Published',         'bool',     0, AF_HIDE_LIST),
      );
      break;


    case "reslog":
      $fields = array(
         'id'=>                array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT|AF_HIDE, 11),
         'timestamp'=>         array('Timestamp',         'datetime',  ATT_DEFAULT_NOW, AF_SEARCHABLE, 14),
         'res_id'=>            array('ResId',             'link',  1, AF_SEARCHABLE|AF_HIDE, 'reservation'),
         'user_id'=>           array('User',              'link',  ATT_DEFAULT_USER_ID, AF_SEARCHABLE, 'user'),
//         'weblog_id'=>         array('Web log',           'link',  0, 0, 'weblog'),
         'action'=>            array('Action',            'str',   '', AF_SEARCHABLE, 100 ),
      );
      break;

    case "changelog":
      $fields = array(
         'id'=>                array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT|AF_HIDE, 11),
         'timestamp'=>         array('Timestamp',         'datetime',  ATT_DEFAULT_NOW, AF_SEARCHABLE, 14),
         //'obj_type'=>          array('Obj Type',          'str',   '', AF_HIDE, 20),
         //'parent_id'=>         array('ObjId',             'parent_id',  1, AF_SEARCHABLE|AF_HIDE, 'baseclass'),
         'obj_type'=>          array('Obj Type',          'str',   '', 0, 20),
         'parent_id'=>         array('ObjId',             'parent_id',  1, 0, 'baseclass'),
         'user_level'=>        array('User Level',        'many2one',  ATT_DEFAULT_USER_LEVEL, AF_SEARCHABLE, 'user_level'),
         'user_id'=>           array('User',              'many2one',  ATT_DEFAULT_USER_ID, AF_SEARCHABLE, 'user'),
         'field'=>             array('Field',             'str',   '', AF_SEARCHABLE, 50 ),
         'from_value'=>        array('Old value',         'str',   '', AF_SEARCHABLE, 255 ),
         'to_value'=>          array('New value',         'str',   '', AF_SEARCHABLE, 255 ),
         'action'=>            array('Action',            'str',   '', AF_SEARCHABLE, 255 ),
      );
      break;

    case "link":
      $fields = array(
         'id'=>                array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 8),
         'created'=>           array('Created',           'date',   ATT_DEFAULT_TODAY, AF_HIDE_LIST|AF_READONLY, 6 ),
         'timestamp'=>         array('Timestamp',         'datetime',   0, AF_HIDE|AF_READONLY, 14 ),
         'active'=>            array('Active',            'bool',   0, 1),
         'name'=>              array('Name',              'str',   '', AF_OBLIGATORY, 100 ),
         'description'=>       array('Description',       'text',  '', AF_HIDE_LIST, 255),
         'url'=>               array('URL',               'url',  '', AF_OBLIGATORY, 255),
         'backlink'=>          array('Backlink From',     'url',  '', AF_HIDE_LIST, 255 ),
         'backlink_to'=>       array('Backlink To',       'url',  '', AF_HIDE_LIST, 255 ),
         'backlink_required'=> array('Backlink Required', 'bool',  0, AF_HIDE_LIST),
         'show_in_footer'   => array('Global',            'bool',  0, 0),
         'category'=>          array('Category',          'str',  '', 0, 50 ),
         'city'             => array('City'               ,'msel','', 0, 'city', 'active=1'),
         'site'=>              array('Site',              'many2one',  1, AF_HIDE, 'site'),
         'city_guide'=>        array('City guide',        'many2one', 0, AF_HIDE_LIST, 'city_guide'),
         'relocation_service'=>array('Relocation service','many2one', 0, AF_HIDE_LIST, 'relocation_service'),
         'company'=>           array('Company',           'str',  '', AF_HIDE_LIST, 50 ),
         'contact_name'=>      array('Contact Name',      'str',  '', AF_HIDE_LIST, 100 ),
         'contact_email'=>     array('Contact Email',     'email',  '', AF_HIDE_LIST, 100 ),
         'language'=>          array('Language',          'many2one', 0, 0, 'language'),
         'clicks'=>            array('Clicks',            'int',  0, AF_READONLY, 6 ),
         'notes'=>             array('Internal Notes',    'str',  '', AF_HIDE_LIST, 255 ),
      );
      break;

    case "relocation_service":
      $fields = array(
         'id'=>                array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 8),
         'active'=>            array('Active',            'bool',   0, 1),
         'show_form'=>         array('Show Form',         'bool',   0, 1),
         'section'=>           array('Section',           'str',   '', 1, 30 ),
         'name'=>              array('Name',              'str',   '', 1, 60 ),
      );
      break;

    case "city_guide":
      $fields = array(
         'id'=>                array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 8),
         'active'=>            array('Active',            'bool',   0, 1),
//         'show_form'=>         array('Show Form',         'bool',   0, 1),
         'section'=>           array('Section',           'str',   '', 1, 30 ),
         'name'=>              array('Name',              'str',   '', 1, 60 ),
      );
      break;

    case "mail_queue":
      $fields = array(
         'id'=>                array('ID',            'id',     0, AF_AUTOKEY, 20),
         'parent_id'=>         array('Parent Id',     'parent_id',   ATT_DEFAULT_NULL, AF_READONLY|AF_HIDE_ADD, 11),
         'parent_type'=>       array('Parent Type',   'parent_type', ATT_DEFAULT_NULL, AF_READONLY|AF_HIDE_ADD),
         'site_id'=>           array('Site',          'many2one',   ATT_DEFAULT_SITE_ID, AF_READONLY, 'site'),
         'create_time'=>       array('Created',       'datetime',   ATT_DEFAULT_NOW, AF_HIDE_LIST|AF_READONLY|AF_HIDE_ADD, 21 ),
         'time_to_send'=>      array('Time to Send',  'datetime',   ATT_DEFAULT_NOW, AF_HIDE_LIST, 21 ),
         'sent_time'=>         array('Sent',          'datetime',   ATT_DEFAULT_NULL, AF_READONLY|AF_HIDE_ADD|AF_READONLY_EDIT, 21 ),
         'id_user'=>           array('User',          'link',   1, AF_SEARCHABLE|AF_HIDE_ADD|AF_READONLY_EDIT, 'user'),
         'ip'=>                array('IP',            'str',    ATT_DEFAULT_CLIENT_IP, AF_HIDE_ADD|AF_READONLY_EDIT, 20 ),
         'sender'=>            array('Sender',        'str',    '', AF_OBLIGATORY, 50 ),
         'subject'=>           array('Subject',       'mail_subject',  '', AF_OBLIGATORY, 150 ),
         'recipient'=>         array('Recipient',     'text',   '', AF_SEARCHABLE|AF_OBLIGATORY),
         'headers'=>           array('Headers',       'text',   '', AF_HIDE_LIST),
         'body'=>              array('Body',          'mail_body',   '', AF_HIDE_LIST|AF_OBLIGATORY),
         'try_sent'=>          array('Try sent',      'int',  0, AF_READONLY|AF_HIDE_ADD|AF_READONLY_EDIT, 6 ),
      );
      break;

    case "sms_queue":
      $fields = array(
         'id'=>                array('ID',            'id',       0, AF_PRIMARY|AF_HIDE_LIST|AF_AUTOINCREMENT, 20),
         'parent_id'=>         array('Parent Id',     'parent_id',   ATT_DEFAULT_NULL, AF_READONLY|AF_HIDE_ADD, 11),
         'parent_type'=>       array('Parent Type',   'parent_type', ATT_DEFAULT_NULL, AF_READONLY|AF_HIDE_ADD),
         'site_id'=>           array('Site',          'many2one',   ATT_DEFAULT_SITE_ID, AF_READONLY, 'site'),
         'create_time'=>       array('Created',       'datetime', ATT_DEFAULT_NOW, AF_READONLY|AF_HIDE_ADD, 21 ),
         'time_to_send'=>      array('Time to Send',  'datetime', ATT_DEFAULT_NOW, 0, 21 ),
         'sent_time'=>         array('Sent',          'datetime', ATT_DEFAULT_NULL, AF_READONLY|AF_HIDE_ADD|AF_READONLY_EDIT, 21 ),
         'user_id'=>           array('User',          'link',     ATT_DEFAULT_USER_ID, AF_SEARCHABLE|AF_HIDE_ADD|AF_READONLY_EDIT, 'user'),
         'session_id'=>        array('Session ID',    'str',      '', AF_SEARCHABLE, 40),
         'ip'=>                array('IP',            'str',      ATT_DEFAULT_CLIENT_IP, AF_HIDE_ADD|AF_READONLY_EDIT, 20 ),
         'sender'=>            array('Sender',        'str',      '', AF_OBLIGATORY, 20),
         'recipient'=>         array('Recipient(s)',  'text',     '', AF_SEARCHABLE|AF_OBLIGATORY, 20),
         'body'=>              array('Body',          'text',     '', AF_HIDE_LIST|AF_OBLIGATORY),
         'result' =>           array('Result',        'text',      '', 0, 20),
         'try_sent'=>          array('Try sent',      'int',      0, AF_READONLY|AF_HIDE_ADD|AF_READONLY_EDIT, 6 ),
      );
      break;

    case "media":
      $fields = array(
        'id'                   =>array('ID'            , 'id',   0, AF_PRIMARY|AF_HIDE_LIST|AF_AUTOINCREMENT, 11),
        'parent_id'            =>array('Parent Id'     , 'parent_id', 0, AF_OBLIGATORY|AF_HIDE_ADD|AF_HIDE_LIST|AF_READONLY, 11),
        'property_type'        =>array('Property Type' , 'parent_type', 0, AF_OBLIGATORY|AF_HIDE_ADD|AF_HIDE_LIST|AF_READONLY, $propertyTypeArray),
//        'parent_type'          =>array('Parent Type'   , 'parent_type', 0, AF_HIDE_LIST|AF_READONLY, $propertyTypeArray),
        'guid'                 =>array('GUID'           , 'str', 0, AF_HIDE|AF_READ_ONLY, 20),
        'source_id'            =>array('Source'        , 'many2one',   1, AF_OBLIGATORY|AF_HIDE_ADD|AF_HIDE_LIST|AF_READONLY, 'source'),
        'city_id'              =>array('City Id'       , 'int', 0, AF_HIDE_LIST|AF_HIDE_ADD|AF_READONLY, 6),
        'owner_id'             =>array('Owner Id'      , 'int', 0, AF_HIDE_LIST|AF_HIDE_ADD|AF_READONLY, 11),
        'estate_agent_id'      =>array('Estate Agent Id','int', 0, AF_HIDE_ADD|AF_HIDE_LIST, 6),
        'room_id'              =>array('Room Id'       , 'int', 0, AF_HIDE_LIST|AF_HIDE_LIST|AF_HIDE_ADD|AF_READONLY, 11),
        'rank'                 =>array('Rank'          , 'int', 0, AF_HIDE_ADD, 3),
        'src'                  =>array('Src'           , 'str', 0, AF_OBLIGATORY|AF_HIDE_LIST, 255),
        'filename'             =>array('Filename'      , 'str', '', AF_OBLIGATORY, 150),
        'comment'              =>array('Comment'       , 'str', '', 0, 200),
        'type'                 =>array('Type'          , 'str', 'jpg', AF_READONLY|AF_HIDE_ADD, 10),

        'name'                 =>array('Name'          , 'str', '', AF_HIDE, 30),
        'active'               =>array('Active'        , 'bool', 1, AF_HIDE_ADD|AF_HIDE_LIST, 1),
        'resize'               =>array('Resized'       , 'bool', 1, AF_HIDE_ADD|AF_HIDE_LIST, 1),
        'height'               =>array('Height'        , 'int', 0, AF_HIDE_LIST|AF_HIDE_ADD|AF_READONLY, 11),
        'width'                =>array('Width'         , 'int', 0, AF_HIDE_LIST|AF_HIDE_ADD|AF_READONLY, 11),
        'url'                  =>array('Url'           , 'str', '', AF_HIDE_ADD|AF_HIDE_LIST, 255),
        'descriptiontype_id'   =>array('Desc.Type'     , 'many2one', '', AF_HIDE_ADD|AF_SEARCHABLE, 'description_type'),
      );
      break;

    case "source":
      $fields = array(
         'id'                   =>array('ID',                    'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 11),
         'active'=>            array('Active',            'bool',   0, 1),
         'created'=>           array('Created',           'date',   '', AF_HIDE_LIST, 6 ),
         'timestamp'=>         array('Timestamp',         'datetime',   0, AF_HIDE_LIST, 6 ),
         'scraped'=>           array('Scraped',          'date',   '', AF_HIDE_LIST, 6 ),
         'name'=>              array('Name',              'str',   '', AF_OBLIGATORY, 100 ),
         'address_street'       => array('Address Street'  , 'str', '', AF_HIDE_LIST, 100),
         'address_postcode'     => array('Address Postcode', 'str', '', AF_HIDE_LIST, 10),
         'address_city'         => array('Address City'    , 'str', '', AF_HIDE_LIST, 50),
         'base_url'=>          array('Base URL',             'url',  '', AF_HIDE_LIST, 100),
         'object_url'=>        array('Object URL',           'url',  '', AF_HIDE_LIST, 100),
         'image_url'=>         array('Image URL',            'url',  '', AF_HIDE_LIST, 100),
         'local_dir'=>         array('Local Dir',            'url',  '', AF_HIDE_LIST, 100),
         'xml_url'=>           array('XML URL',              'url',  '', AF_HIDE_LIST, 100),
      );
      break;

     case "enquiry":
      //   DB FIELD                    FLD  NAME                  TYPE     ED REQ LEN/FUNC
      $fields = array(
         'id'=>                         array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT),
         'property_type'=>              array('Property Type',     'valSelect', 0, AF_OBLIGATORY, $propertyTypeArray),
         'city_id'=>                    array('City',              'many2one',   0, AF_OBLIGATORY|AF_SEARCHABLE|AF_READONLY_EDIT, 'city'),
         'status'=>                     array('Status',            'many2one', ENQ_STATUS_REQUEST, AF_OBLIGATORY|AF_SEARCHABLE|AF_READONLY_EDIT, 'enq_status'),
         'created' =>                   array('Created'          , 'datetime', ATT_DEFAULT_NOW, AF_HIDE_LIST|AF_READONLY|AF_HIDE_ADD|AF_SEARCHABLE, 11),

         'site_id'=>                    array('Site',               'many2one', ATT_DEFAULT_SITE_ID, AF_HIDE_LIST|AF_HIDE_EDIT|AF_HIDE_ADD, 'site'),
         'owner_id'=>                   array('Owner',              'many2one', 0, AF_HIDE_LIST|AF_SEARCHABLE|AF_READONLY_EDIT, 'owner'),
         'agent_id'=>                   array('Agent',              'many2one', 0, AF_HIDE_LIST|AF_SEARCHABLE|AF_READONLY_EDIT, 'agent'),
         'aff_id'=>                     array('Affiliate',          'many2one', 0, AF_HIDE_LIST|AF_SEARCHABLE|AF_READONLY_EDIT, 'affiliate'),
         'estate_agent_id'=>            array('Estate Agent',       'many2one', 0, AF_HIDE_LIST|AF_SEARCHABLE|AF_READONLY_EDIT, 'estate_agent'),
         'staff_id'=>                   array('Staff',              'many2one', 0, AF_HIDE_LIST|AF_SEARCHABLE|AF_READONLY_EDIT, 'staff'),

         // below applies to last added property in list
         'apt_id' =>                    array('Last Property ID',       'link',   0, AF_SEARCHABLE|AF_READONLY_EDIT, 'property'),
         'apartment_name' =>            array('Last Property Name',     'str',   '', AF_SEARCHABLE|AF_READONLY_EDIT, 50),
         'apt_currency'=>               array('Currency',          'valSelect', 0, AF_HIDE_LIST|AF_READONLY_EDIT, $currencyArray),
         'apt_price'=>                  array('Price',             'money',   0, AF_SEARCHABLE|AF_READONLY),

         'address_id'=>                 array('Address',           'one2one',    0, AF_HIDE_LIST|AF_CASCADE_DELETE|AF_ONE2ONE_INTEGRATE, 'address'),
         'guest_id'=>                   array('Guest',             'link',   ATT_DEFAULT_GUEST_ID, AF_HIDE_ADD|AF_READONLY|AF_HIDE_LIST|AF_SEARCHABLE, 'guest'),
         'aff_id'=>                     array('Aff',               'many2one',   ATT_DEFAULT_AFF_ID, AF_HIDE_EDIT|AF_HIDE_ADD, 'affiliate'),
         'extra_info'=>                 array('Extra info',        'text',   '', AF_HIDE_LIST),
         'notes'=>                      array('Our notes',         'text',   '', AF_HIDE_LIST),

//         'language'=>                   array('Language',          'valSelect', ATT_DEFAULT_LANG, AF_OBLIGATORY|AF_HIDE_LIST|AF_READONLY_EDIT, $langArray),
         'language'=>                   array('Language',          'many2one', ATT_DEFAULT_LANGUAGE, 0, 'language'),

         'property_search_id'=>         array('Search',           'one2one',    0, AF_OBLIGATORY|AF_HIDE_LIST|AF_CASCADE_DELETE|AF_ONE2ONE_INTEGRATE, 'property_search'),
         'property_list' =>             array('More Properties', 'one2many', 0, AF_HIDE_LIST|AF_CASCADE_DELETE|AF_READONLY, 'property_list', 'enq_id'),

         'remote_ip'=>                  array('IP',                'str',       ATT_DEFAULT_CLIENT_IP, AF_HIDE_LIST|AF_SEARCHABLE, 20),
         'remote_cc'=>                  array('CC',                'many2one', ATT_DEFAULT_CLIENT_CC, AF_HIDE_LIST, 'countries'),

         'ref'=>                        array('Ref',               'str',    '', AF_HIDE_LIST, 20),
         'ref_other'=>                  array('Ref (other)',       'str',    '', AF_HIDE_LIST, 20),
         'ref_searchterm'=>             array('Searchterm',        'str',    '', AF_HIDE_LIST, 50),

         'booking_pin'=>                array('Booking PIN',       'str',    '', AF_HIDE_LIST|AF_HIDE_EDIT|AF_HIDE_ADD|READONLY, 10),

      );
      break;

    case "property_list":
      $fields = array(
         'id'=>                        array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 11),
         'timestamp'=>                 array('Timestamp',         'datetime', ATT_DEFAULT_NOW, AF_READONLY, 14 ),
         'enq_id'=>                    array('Enq ID',            'link',   0, AF_OBLIGATORY, 'enquiry'),

         'owner_id'=>                  array('Owner',             'many2one',   0, AF_HIDE_EDIT|AF_HIDE_ADD, 'owner', 'owner.shortstay=1', 'address.first_name'),

         'site_id'=>                   array('Site',              'many2one',   ATT_DEFAULT_SITE_ID, AF_HIDE_LIST|AF_HIDE_EDIT|AF_HIDE_ADD, 'site'),
         'aff_id'=>                    array('Aff',               'many2one',   0, AF_HIDE_LIST|AF_HIDE_EDIT|AF_HIDE_ADD, 'affiliate'),
         'agent_id'=>                  array('Agent',             'many2one',   0, AF_HIDE_LIST|AF_HIDE_EDIT|AF_HIDE_ADD, 'agent'),
         'staff_id'=>                  array('Staff',             'many2one',   0, AF_HIDE_LIST|AF_HIDE_EDIT|AF_HIDE_ADD, 'staff'),
         'estate_agent_id'=>           array('Estate Agent',      'many2one',   0, AF_HIDE_LIST|AF_HIDE_EDIT|AF_HIDE_ADD, 'estate_agent'),

         'city_id'=>                   array('City Id'            ,'int', 0, AF_HIDE_ADD|AF_READONLY, 6),
         'property_type'=>             array('Property Type',      'parent_type', 0, AF_OBLIGATORY|AF_READONLY, $propertyTypeArray),
         'apt_id'=>                    array('AptID',             'link',   0, AF_OBLIGATORY|AF_SEARCHABLE, 'property'),
         'apartment_name'=>            array('Apartment',         'str',    '', AF_SEARCHABLE, 50),
         'apt_currency'=>              array('Currency',          'valSelect', 0, AF_HIDE_LIST, $currencyArray),
         'apt_price'                => array('Price'              ,'money',  0, AF_SEARCHABLE,' 9.2'),
         'num_rooms'=>                 array('# Rooms',            'int',  0,   AF_SEARCHABLE, 30),
      );
      break;

    case "tell_a_friend":
      $fields = array(
         'id' =>              array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 11),
         'created'=>          array('Created',           'date',   ATT_DEFAULT_TODAY, AF_HIDE_LIST|AF_READONLY, 6 ),
         'timestamp'=>        array('Timestamp',         'datetime', ATT_DEFAULT_NOW, AF_HIDE|AF_READONLY, 14 ),
         'user_id'=>          array('User',              'link', ATT_DEFAULT_USER_ID, AF_READONLY, 'user'),
         'language'=>         array('Language',          'many2one',  '', 0, 'language'),
         'type' =>            array('Type',               'valSelect', 0, AF_OBLIGATORY|AF_HIDE_EDIT|AF_HIDE_ADD, $propertyTypeArray),
         'apt_id'=>           array('AptID',             'link',   0, AF_OBLIGATORY, 'realestate'),
         'apartment_name'=>   array('Apartment',         'str',    '', AF_SEARCHABLE, 50),
         'from_email'=>       array('From',              'email',  '', 0, 100 ),
         'to_email'=>         array('To',                'email',  '', 0, 100 ),
         'message'=>          array('Headers',           'text',   '', AF_HIDE_LIST),
         'copy'=>             array('Copy',              'bool', 0, AF_HIDE_LIST),
         'viewed'=>           array('Viewed',            'bool', 0, 0),
      );
      break;

    case "list_property":
      $fields = array(
         'id' =>              array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 11),
         'type' =>            array('Type',               'valSelect', 0, AF_OBLIGATORY|AF_HIDE_EDIT|AF_HIDE_ADD, $propertyTypeArray),
         'status'=>           array('Status',            'many2one', 0, AF_SEARCHABLE , 'res_status', 3),
         'active'=>           array('Active',            'bool',   0, 0),
         'timestamp'=>        array('Timestamp',         'datetime',   0, AF_HIDE|AF_READONLY, 14),
         'created'=>          array('Created',           'date',   ATT_DEFAULT_TODAY, AF_HIDE_LIST|AF_READONLY, 6),
         'city_id'=>          array('City ID',           'many2one',   0, AF_SEARCHABLE, 'city', 'active=1'),
         'apt_id'=>           array('AptID',             'link',   0, 0, 'realestate'),
         'owner_id'=>         array('Owner',             'link', ATT_DEFAULT_USER_ID, AF_READONLY, 'owner'),
         'aff_id'=>           array('Aff',               'many2one',  0, AF_HIDE_LIST|AF_HIDE_EDIT|AF_HIDE_ADD, 'affiliate'),
         'language'=>         array('Language',          'many2one',  '', 0, 'language'),
         'address_street'=>   array('Street',            'str','', AF_OBLIGATORY|AF_HIDE_LIST|AF_SEARCHABLE, 100),
         'address_number'=>   array('Number',            'int',0, AF_OBLIGATORY|AF_HIDE_LIST, 6),
         'address_suffix'=>   array('Suffix',            'str','', AF_HIDE_LIST, 10),
         'address_postcode'=> array('Postcode',          'str','', AF_OBLIGATORY|AF_HIDE_LIST|AF_SEARCHABLE, 10),
         'address_city'=>     array('City',              'str','', AF_HIDE_LIST, 50),
//         'num_rooms'=>        array('Num. Rooms',        'int', 0, 0, 2),
         'living_size'=>      array('Size',              'int', 0, AF_HIDE_LIST, 4),
         'currency' =>        array('Currency',          'valSelect', 'EUR', AF_HIDE_LIST, $currencyArray),
         'price'=>            array('Price',             'int',  0, AF_OBLIGATORY|AF_SEARCHABLE,'8'),
         'points'=>           array('Points',            'int',  0, 0,'4'),
         'free_sector'=>      array('Free Sector',       'str', '', 0, 3),
      );
      break;

    case "property_search":
      $fields = array(
         'id'                   =>array('ID',                    'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 11),
///         'checkin'          =>     array('Checkin',              'date', '', 0),
///         'checkout'          =>    array('Checkout',             'date', '', 0),
///         'num_hours'        =>     array('Search Num. hours',    'float', 0, 0, '2.2'),
///         'num_days'        =>      array('Search Num. days',     'int', 0, 0, 2),
///         'num_months'        =>    array('Search Num. months',   'int', 0, 0, 2),
         'min_price'        =>     array('Search Min. Price',    'money', 0, 0,' 9.2'),
         'max_price'        =>     array('Search Max. Price',    'money', 0, 0,' 9.2'),
         'num_rooms'        =>     array('Search Num. Rooms',    'int', 0, 0, 2),
         'num_bathrooms'    =>     array('Search Num. Bathrooms','int', 0, AF_HIDE_LIST, 2),
//         'num_employees'    =>     array('Search Num. employees','int', 0, AF_HIDE_LIST, 2),
//        'num_guests'    =>     array('Search Num. guests','int', 0, AF_HIDE_LIST, 2),
         'living_size'      =>     array('Search Size',          'int', 0, AF_HIDE_LIST, 4),
         'address_postcode' =>     array('Search Postcode',      'str', '', AF_HIDE_LIST, 10),
         'address_street'   =>     array('Search Street',        'str', '', AF_HIDE_LIST, 100),
         'districts'        =>     array('Search District'       ,'msel','', AF_HIDE_LIST, 'borough'),
         'placements'       =>     array('Search Placement'      ,'msel','', AF_HIDE_LIST, 'property_placement'),
         'facilities'       =>     array('Search Facilities'     ,'msel','', AF_HIDE_LIST, 'property_facilities'),
      );
      break;

    case "property_alert":
      $fields = array(
         'id' =>                array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 11),
         'city_id'=>            array('City',              'many2one',   0, AF_OBLIGATORY, 'city', 'msCity.active=1', 'msCity.name'),
         'language'=>          array('Language',          'many2one', '', 1, 'language'),
         'type' =>            array('Type',               'valSelect', 0, AF_OBLIGATORY|AF_HIDE_EDIT|AF_HIDE_ADD, $propertyTypeArray),
         'active'=>             array('Active',            'bool',  0, 0),
//         'timestamp'=>          array('Timestamp',         'datetime',   0, AF_HIDE|AF_READONLY, 14),
         'created'=>            array('Created',           'datetime',   ATT_DEFAULT_NOW, AF_HIDE_LIST|AF_READONLY, 6),
         'last_sent'=>          array('Last sent',         'datetime',   0, AF_READONLY, 19),
         'first_name'=>         array('First name',        'str',  '', AF_SEARCHABLE, 50),
         'last_name'=>          array('Last name',         'str',  '', AF_SEARCHABLE, 50),
         'email'=>              array('Email',             'email',  '', AF_OBLIGATORY|AF_SEARCHABLE, 50),
         'frequency'=>          array('Frequency',         'str',    '', 0, 10),
         'property_search_id'=> array('Search',            'one2one',  0, AF_ONE2ONE_INTEGRATE|AF_CASCADE_DELETE, 'property_search'),
         'enq_id'=>             array('Enq ID',            'link', 0, AF_READONLY_EDIT|AF_SEARCHABLE, 'enquiry'),
      );
      break;

    case "geoname":
      $fields = array(
         'id' =>              array('ID',                'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 11),
         'active'=>           array('Active',            'bool',  0, 0),
         'directory'=>        array('Directory',         'dir', 0, AF_OBLIGATORY|AF_SEARCHABLE, 100),
         'name'=>             array('Name',              'str', '', AF_OBLIGATORY|AF_SEARCHABLE, 100),
         'level'=>            array('Level',             'many2one',  0, AF_OBLIGATORY|AF_SEARCHABLE, 'geolevel'),
         'fid'=>              array('Foreign ID',        'int',  0, AF_OBLIGATORY|AF_SEARCHABLE, 11),
         'lang'=>             array('Language',          'str',  '', AF_SEARCHABLE, 2),
         'priority'=>         array('Priority',          'int',  0, 0, 8),
      );
      break;

    case "geolevel":
      $fields = array(
         'id'=>              array('ID',                  'id',   0, AF_PRIMARY|AF_AUTOINCREMENT, 2),
         'name'=>            array('Name',                'str',   '', 1, 20 ),
      );
      break;

    case "page":
      $fields = array(
         'id'=>            	 array('ID',                	'id',   '', AF_PRIMARY|AF_AUTOINCREMENT|AF_HIDE, 11),
         'page'=>            array('Page',                'str',   '', 40),
         'script'=>          array('Script',              'str',   '', 0, 140 ),
         'active'=>          array('Active',              'bool',  0, 0),
         'localized'=>       array('Localized',           'bool',  0, 0),
         'global'=>          array('Global',              'bool',  1, 0),
         'relative'=>        array('Relative',            'bool',  1, 0),
         'secure'=>        	 array('Secure',            	'bool',  0, 0),
         'section'=>        array('Has sections?',        'bool',  0, 0),
         'subsection'=>      array('Has sub-sections?',   'bool',  0, 0),
         'target'=>          array('target',              'str',   '', AF_HIDE_LIST, 10 ),
      );
      break;

    case "page_content":
      $fields = array(
         'id'=>                array('ID',                'id',       0, AF_PRIMARY|AF_AUTOINCREMENT, 8),
         'created'=>           array('Created',           'datetime',     ATT_DEFAULT_NOW, AF_HIDE_LIST|AF_READONLY|AF_HIDE_EDIT),
         'timestamp'=>         array('Timestamp',         'datetime',     ATT_DEFAULT_NOW, AF_HIDE_LIST|AF_READONLY|AF_HIDE_EDIT, 14 ),
         'active'=>            array('Active',             'bool',     1, 0),
         'site_id'=>           array('Site',           'many2one',  '', AF_OBLIGATORY|AF_SEARCHABLE|AF_HIDE_EDIT, 'site'),

//         'site'=>              array('Site',              'str',      '', AF_OBLIGATORY|AF_SEARCHABLE, 50 ),
         'page'=>              array('Page',              'str',      '', AF_OBLIGATORY|AF_SEARCHABLE|AF_HIDE_EDIT, 50 ),
         'language'=>           array('Language',    			  'valSelect', 'en', AF_OBLIGATORY|AF_SEARCHABLE, $langArray),
         'script'=>            array('Script',              'str',      '', AF_OBLIGATORY|AF_SEARCHABLE|AF_HIDE_EDIT, 50 ),

         'name'=>              array('Name',              'str',      '', 0, 50 ),
         'title'=>             array('Title',             'str',      '', AF_HIDE_LIST, 100 ),
         'keywords'=>          array('Keywords',          'text',      '', AF_HIDE_LIST, 255 ),
         'description'=>       array('Description',       'text',      '', AF_HIDE_LIST),
         'content'=>           array('Content (HTML)',    'html',      '', AF_HIDE_LIST, 30),

         'priority'            => array('Priority'          ,'int', 0, 0, 8),
         'show_top_menu'=>     array('Show in top menu?',  'bool',    AF_HIDE_LIST, 0),
         'show_sub_menu'=>     array('Show in sub menu?', 'bool',     AF_HIDE_LIST, 0),


      );
      break;


    case "property_description":
      $site_filters = $u_sites ? "id IN ($u_sites)" : "";
      $fields = array(
         'id'=>            	    array('ID',                	'id',       '', AF_PRIMARY|AF_AUTOINCREMENT|AF_HIDE, 11),
         'property_id'=>        array('Property Id',        'parent_id',      0, AF_OBLIGATORY|AF_READONLY|AF_HIDE_ADD, 11),
         'property_type'=>      array('Property Type',      'parent_type', 0, AF_OBLIGATORY|AF_READONLY|AF_HIDE_ADD, $propertyTypeArray),
         'active'=>            array('Active',             'bool',     1, 0),
//         'property_type'=>      array('Property Type',     'valSelect', 0, AF_OBLIGATORY, $propertyTypeArray),
         'site_id'=>            array('Site',               'many2one',  '', AF_SEARCHABLE|AF_READONLY_EDIT, 'site', $site_filters),
         'source_id'=>          array('Source',             'link',  '', AF_SEARCHABLE|AF_HIDE_ADD|AF_READONLY, 'source'),
         'created'=>            array('Created',            'datetime',  ATT_DEFAULT_NOW, AF_HIDE_ADD|AF_HIDE_LIST|AF_READONLY|AF_HIDE_LIST, 6),
         'timestamp'=>          array('Timestamp',          'datetime',  ATT_DEFAULT_NOW, AF_HIDE|AF_HIDE_ADD|AF_READONLY, 14),
         'user_id'=>            array('Author',             'many2one', ATT_DEFAULT_USER_ID, AF_HIDE_LIST|AF_HIDE_ADD|AF_SEARCHABLE|AF_READONLY, 'user'),
         'machine_translated'=> array('Machine Translated', 'bool',  0, AF_HIDE_ADD|AF_READONLY),
         'language'=>           array('Language',    			  'valSelect', 'en', AF_OBLIGATORY|AF_SEARCHABLE, $langArray),
         'descriptiontype_id'=> array('Desc.Type',          'many2one', 50, AF_OBLIGATORY|AF_SEARCHABLE, 'description_type'),
         'description'=>        array('Content (HTML)',     'html',     '', AF_OBLIGATORY|AF_HIDE_LIST, 30),
        );
      break;

    case "dictionary":
      $fields = array(
         'id'=>            	    array('ID',                	'id',       '', AF_PRIMARY|AF_AUTOINCREMENT|AF_HIDE, 11),
         'term'=>            	  array('Term',               'str',       '', AF_OBLIGATORY|AF_SEARCHABLE|AF_READONLY_EDIT, 50),
         'language'=>           array('Language',           'many2one',  ATT_DEFAULT_LANG, AF_OBLIGATORY|AF_SEARCHABLE|AF_READONLY_EDIT, 'language'),
         'author'=>             array('Author',             'many2one', ATT_DEFAULT_USER_ID, AF_SEARCHABLE|AF_READONLY, 'user'),
         'timestamp'=>          array('Timestamp',          'datetime',     ATT_DEFAULT_NOW, AF_HIDE_LIST|AF_HIDE_ADD|AF_READONLY, 14),
         'comment'=>            array('Comment',             'str',      '', AF_HIDE_LIST, 100 ),
         'section'=>            array('Section',             'str',      '', AF_HIDE_LIST|AF_SEARCHABLE, 20 ),
         'script'=>             array('Script',              'str',      '', AF_HIDE_LIST|AF_SEARCHABLE, 100 ),
         'array'=>              array('Array?',              'bool',  0, AF_SEARCHABLE),
         'machine_translated'=> array('Machine Translated?', 'bool',  0, AF_HIDE_ADD|AF_SEARCHABLE|AF_READONLY),
         'phrase'=>             array('Phrase (HTML)',      'html',     '', AF_OBLIGATORY|AF_HIDE_LIST, 30),
        );
      break;

    case "room_description":
      $fields = array(
         'id'=>            	    array('ID',                	'id',       '', AF_PRIMARY|AF_AUTOINCREMENT|AF_HIDE, 11),
         'room_id'=>            array('Room Id',            'parent_id',   0, AF_OBLIGATORY|AF_READONLY, 11),
//         'property_id'=>        array('Property Id',        'link',     0, AF_OBLIGATORY|AF_READONLY, 11),
         'created'=>            array('Created',            'datetime',  ATT_DEFAULT_NOW, AF_HIDE_LIST|AF_READONLY|AF_HIDE_LIST, 6),
         'timestamp'=>          array('Timestamp',          'datetime',     0, AF_HIDE|AF_READONLY, 14),
         'name'=>               array('Name',               'str',      '', AF_SEARCHABLE, 200),
         'description'=>        array('Description (HTML)', 'html',     '', AF_HIDE_LIST, 30),
         'language'=>           array('Language',    			  'valSelect', 'en', AF_OBLIGATORY|AF_SEARCHABLE, $langArray),
        );
      break;

    case "description_type":
      $fields = array(
         'id'=>            	    array('ID',                	'id',   '', AF_PRIMARY|AF_AUTOINCREMENT, 11),
         'name'=>               array('Name',                'str',   '', AF_OBLIGATORY|AF_SEARCHABLE, 100),
//         'languagecode'=>       array('Language',            'str',   'en', AF_OBLIGATORY|AF_SEARCHABLE, 2),
//         'descriptiontype_id'=> array('Desc.Type.Id',     'int',   '', AF_OBLIGATORY|AF_SEARCHABLE, 2 ),
      );
      break;

    case "hotel_type":
      $fields = array(
         'id'=>            	    array('ID',                	'id',   '', AF_PRIMARY|AF_AUTOINCREMENT, 11),
         'name'=>               array('Name',                'str',   '', AF_OBLIGATORY|AF_SEARCHABLE, 100),
      );
      break;

    case "room_type":
      $fields = array(
         'id'=>            	    array('ID',                	'id',   '', AF_PRIMARY|AF_AUTOINCREMENT, 11),
         'name'=>               array('Name',                'str',   '', AF_OBLIGATORY|AF_SEARCHABLE, 100),
      );
      break;

    case "facility_type":
      $fields = array(
         'id'=>            	    array('ID',                	'id',   '', AF_PRIMARY|AF_AUTOINCREMENT, 11),
         'name'=>               array('Name',                'str',   '', AF_OBLIGATORY|AF_SEARCHABLE, 100),
      );
      break;

    case "hotel_chain":
      $fields = array(
         'id'=>            	    array('ID',                	'id',   '', AF_PRIMARY|AF_AUTOINCREMENT, 11),
         'name'=>               array('Name',                'str',   '', AF_OBLIGATORY|AF_SEARCHABLE, 100),
      );
      break;

    case "exchange_rate":
      $fields = array(
         'id'=>            	    array('ID',                	'id',   '', AF_PRIMARY|AF_AUTOINCREMENT, 11),
         'last_updated'=>       array('Timestamp',          'datetime',     ATT_DEFAULT_NOW, AF_READONLY, 14),
         'from_currency'=>      array('From Currency',      'valSelect', 0, AF_OBLIGATORY, $currencyArray),
         'to_currency'=>        array('To Currency',        'valSelect', 0, AF_OBLIGATORY, $currencyArray),
         'real_rate'=>          array('Bank rate',          'float',    0, AF_READONLY, '8.8'),
         'our_rate'=>           array('Our rate',           'float',    0, AF_READONLY, '8.8'),
         'skim'=>               array('Our commission %',   'float',    0, 0, '2.2'),
      );
      break;


    default: // implicit simple object table=table key=id descriptor=name
      // mydie("get_object_attributes: Unknown type '$type'");
      $fields = array(
         'id'=>            	    array('ID',                	'id',   '', AF_PRIMARY|AF_AUTOINCREMENT, 11),
         'name'=>               array('Name',                'str',   '', AF_OBLIGATORY|AF_SEARCHABLE, 100),
      );
      break;
  }

  if($get_relations) {
    $child_fields = array();
    foreach($fields as $field=>$attributes) {
      $att_type = $attributes[ATT_TYPE];
      $att_flags = $attributes[ATT_FLAGS];
      $att_options = $attributes[ATT_RELATION_TYPE];
      //if($att_type == 'one2one' ) {
      if($att_type == 'one2one' && ($id > 0 || ($att_flags & AF_ONE2ONE_INTEGRATE)|| ($att_flags & AF_OBLIGATORY))) {
        $child_required = $att_flags & AF_OBLIGATORY ? "(**)" : "";
        $child_fields = get_object_attributes($att_options, 1);
        $child_key = get_object_key($att_options);
        $heading = get_object_name($att_options) . $child_required;
        array_push($fields, $heading); // first field is header
        //array_push($fields, get_object_name($att_options)); // first field is header
        foreach($child_fields as $cfield=>$cclass) {
          $fields[$att_options.".".$cfield] = $child_fields[$cfield];
        }
        unset($fields[$att_options.".".$child_key]); // don't include id of child
      }
    }
  }
  //array_unshift($fields, get_object_name($type)); // first field is header
  return $fields;
}


// used to map fields from imported array to native array
function get_map($type) {
  switch($type) {
    case 'image':
    $map = array(
     'photo_id' => 'guid',
     'url_original' => 'url',
     'descriptiontype_id' => 'descriptiontype_id',
    );
    break;

    case 'booking':

      mydie("classes.inc: get_map(booking) - no longer in use");
    $map = array(
    'salutation'       => 'salutation',
    'first_name'       => 'first_name',
    'last_name'        => 'last_name',
    'email_address'    => 'email_address',
    'title'            => 'title',
    'organization'     => 'organization',
    'address1'         => 'address1',
    'address2'         => 'address2',
    'city'             => 'city',
    'state'            => 'state',
    'zip'              => 'zip',
    'phone'            => 'home_phone',
    'cell_phone'       => 'cell_phone',
    'home_phone'       => 'home_phone',
    'work_phone'       => 'work_phone',
    'country'          => 'country',
    'extra_info'       => 'extra_info',
    'language'         => 'language',
    'arrival_method'   => 'arrival_method',
    'arrival_number'   => 'arrival_number',
    'arrival_time'     => 'arrival_time',
    'arrival_property' => 'arrival_property',
    'arrival_notes'    => 'arrival_notes',
    'airport_pickup'   => 'airport_pickup',

    'id'              => 'apt_id',
    'in'              => 'checkin',
    'out'             => 'checkout',
    'ng'              => 'num_guests',

    );
    break;

    case 'cc':
    $map = array(

    'cc_id'         => 'id'    ,
    'cc_number'     => 'cc_number'    ,
    'cc_type'       => 'cc_type'      ,
    'cc_cardholder' => 'cc_cardholder',
    'cc_exp_month'  => 'cc_exp_month' ,
    'cc_exp_year'   => 'cc_exp_year'  ,
    'cc_cvv2'       => 'cc_cvv2'      ,
    'address_id'         => 'address_id',
    'address1'         => 'address1',
    'city'             => 'city',
    'state'            => 'state',
    'zip'              => 'zip',
    'phone'            => 'home_phone',
    'country'          => 'country',
    'remember'          => 'remember',

    );
    break;



    case 'hotel':
    $map = array(
     'hotel_id' => 'guid',

     'address' => 'address_street',
     'zip' => 'address_postcode',
     'city' => 'address_city',
     'countrycode' => 'address_country',
     'location' => array('latitude' => 'location_lat', 'longitude' => 'location_long'),
     'checkin' => array('to' => 'checkin_to', 'from' => 'checkin_from'),
     'checkout' => array('to' => 'checkout_to', 'from' => 'checkout_from'),

     'nr_rooms' => 'num_rooms',
     'currencycode' => 'currency',

     'review_score' => 'review_score',
     'review_nr' => 'review_nr',
     'name' => 'name',

     'class' => 'rating',
     'maxrate' => 'rate_day',
     'minrate' => 'rate_day_min',
     'commission' => 'rental_commission',
     'ranking' => 'priority',
     'url' => 'source_url',
     'hoteltype_id' => 'hoteltype_id',

      //'  city_id' => 'city_id',
      //'  district' =>
      //'  preferred' => 1
      //'  class_is_estimated' => 0
      //'  is_closed' => 0
    );
    break;

    case 'room':
    $map = array(
    'room_id' => 'guid',
    'ranking' => 'priority',
    'specification_required' =>'' ,
    'bookable_direct' =>'' ,
    'creditcard_required' =>'' ,
    'min_price' => 'min_price',
    'max_price' => 'max_price',
    'smoking_requested' => 'smoking_policy',
    'bookable_indirect' => 'bookable_indirect',
    'max_persons' => 'max_guests',
    'roomtype_id' => 'type',
    );
    break;

    case 'charge':
    $map = array(
    'charge_status' =>       'status',
    'res_id' =>              'res_id',
    'paymentType' =>         'paymentaction',
    'currency' =>            'currencycode',
    'amount' =>              'amount',
    'description' =>         'description',
    'errorStr'    =>         'payment_error',
    'TIMESTAMP' =>           'remote_timestamp',
    'CORRELATIONID' =>       'correlationid',
    'ACK' =>                 'ack',
    'VERSION' =>             'version',
    'BUILD' =>               'build',
    'AVSCODE' =>             'avscode',
    'CVV2MATCH' =>           'cvv2match',
    'TRANSACTIONID' =>       'transactionid',
    'AMT' =>                 'amt',
    );
    break;

    // case 'transaction':
    // $map = array(
    //   'txn_type' => 'tx_type', // PayPal uses txn_type, we store as tx_type
    // );
    // break;

    // case 'tx2pay': // Maps our transaction object to our payment object
    // $map = array(
    //   'txn_type' => 'tx_type', // PayPal uses txn_type, we store as tx_type
    // );
    // break;

    default:
      mydie("Unkwown map type '$type'");
      break;
  }
  return $map;
}


?>